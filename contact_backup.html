<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Daniel Wanjala - Let's Connect!</title> <link rel="icon" href="assets/logo.png" type="image/png">
    <link rel="shortcut icon" href="assets/logo.png" type="image/png">
    <link rel="apple-touch-icon" href="assets/apple-touch-icon.png">

    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&family=Satoshi:wght@400;500;700&family=Inter:wght@400;500&family=IBM+Plex+Sans:wght@400;500&family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet">

    <script src="https://unpkg.com/lucide@latest"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>

    <style>
        /* Base, Fonts, Scrollbar, Mobile Menu (Consistent) */
        body { font-family: 'Inter', 'IBM Plex Sans', sans-serif; overflow-x: hidden; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; background-attachment: fixed; position: relative; }
        .font-heading { font-family: 'Satoshi', 'Space Grotesk', 'Neue Montreal', sans-serif; }
        .font-body { font-family: 'Inter', 'IBM Plex Sans', sans-serif; }
        .font-mono { font-family: 'JetBrains Mono', 'Source Code Pro', monospace; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: theme('colors.sandstone'); }
        ::-webkit-scrollbar-thumb { background: theme('colors.accent'); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: theme('colors.accent-secondary'); }
        html.dark ::-webkit-scrollbar-track { background: theme('colors.dark-secondary-bg'); }
        html.dark ::-webkit-scrollbar-thumb { background: theme('colors.dark-accent'); }
        html.dark ::-webkit-scrollbar-thumb:hover { background: theme('colors.dark-accent-secondary'); }
        html { scroll-behavior: smooth; }
        #mobile-menu { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out, opacity 0.3s ease-out; opacity: 0; }
        #mobile-menu.open { max-height: 500px; opacity: 1; }

        /* Scroll Reveal (Consistent) */
        .reveal-hidden { opacity: 0; transform: translateY(30px); transition: opacity 0.8s ease-out, transform 0.8s ease-out; }
        .reveal-visible { opacity: 1; transform: translateY(0); }
        .reveal-slide-left { opacity: 0; transform: translateX(-50px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
        .reveal-slide-right { opacity: 0; transform: translateX(50px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
        .reveal-visible.slide-in { opacity: 1; transform: translateX(0); }

        /* Enhanced Navbar (Consistent - Highlight Contact) */
        .nav-link { @apply px-3 py-2 rounded-md text-sm font-medium transition-all duration-300 ease-out relative text-secondary-text dark:text-dark-secondary-text opacity-80 hover:opacity-100; }
        .nav-link:hover:not(.nav-active) { @apply text-primary-text dark:text-dark-primary-text transform scale-[1.03]; }
        .nav-link.nav-active { @apply bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent opacity-100 font-semibold; }
        .nav-link .active-underline { display: none; position: absolute; bottom: -4px; left: 50%; transform: translateX(-50%); width: 0; height: 2px; background-image: linear-gradient(to right, theme('colors.accent'), theme('colors.accent-secondary')); border-radius: 1px; transition: width 0.4s cubic-bezier(0.23, 1, 0.32, 1); }
        html.dark .nav-link .active-underline { background-image: linear-gradient(to right, theme('colors.dark-accent'), theme('colors.dark-accent-secondary')); }
        .nav-link.nav-active .active-underline { display: block; width: 60%; }
        .mobile-nav-link { @apply block px-3 py-2 rounded-md text-base font-medium transition-all duration-200 ease-in-out text-secondary-text dark:text-dark-secondary-text; }
        .mobile-nav-link:hover { @apply bg-secondary-text/5 dark:bg-dark-secondary-text/10 text-primary-text dark:text-dark-primary-text; }
        .mobile-nav-link.nav-active { background-image: linear-gradient(to right, theme('colors.accent/10'), theme('colors.accent-secondary/20')); color: theme('colors.accent') !important; @apply font-semibold; }
        html.dark .mobile-nav-link.nav-active { background-image: linear-gradient(to right, theme('colors.dark-accent/10'), theme('colors.dark-accent-secondary/20')); color: theme('colors.dark-accent') !important; }

        /* Canvas, Main Container, Header Shrink, Back to Top (Consistent) */
        #particle-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
        #main-content-container { perspective: 1000px; transition: transform 0.5s cubic-bezier(0.23, 1, 0.32, 1); }
        header.scrolled { @apply h-14 shadow-md; }
        header.scrolled .h-16 { @apply h-14; }
        header.scrolled .h-8 { @apply h-7; }
        #back-to-top { position: fixed; bottom: 20px; right: 20px; opacity: 0; visibility: hidden; transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out, transform 0.3s ease-in-out; transform: translateY(20px); z-index: 1000; @apply focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent dark:focus:ring-dark-accent; }
        #back-to-top.visible { opacity: 1; visibility: visible; transform: translateY(0); }

        /* --- Contact Intro Animation --- */
        @keyframes kaleidoscope-bg {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .kaleidoscope-gradient {
            background: linear-gradient(135deg, theme('colors.accent/30'), theme('colors.accent-secondary/30'), theme('colors.tertiary-light/30'), theme('colors.signal-cyan/30'));
            background-size: 400% 400%;
            animation: kaleidoscope-bg 15s ease infinite;
        }
        html.dark .kaleidoscope-gradient {
             background: linear-gradient(135deg, theme('colors.dark-accent/30'), theme('colors.dark-accent-secondary/30'), theme('colors.tertiary-dark/30'), theme('colors.tech-purple/30'));
             background-size: 400% 400%;
             animation: kaleidoscope-bg 15s ease infinite;
        }

        /* --- Contact Card Styles --- */
        .contact-card {
            @apply bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-xl p-6 shadow-md text-center;
            transition: transform 0.4s ease, box-shadow 0.4s ease;
            position: relative; overflow: hidden;
        }
        .contact-card:hover {
            transform: translateY(-6px) scale(1.03);
            @apply shadow-lg dark:shadow-dark-accent/10;
        }
        /* Subtle pattern overlay */
        .contact-card::after {
            content: ''; position: absolute; inset: 0; border-radius: inherit;
            background-image: radial-gradient(circle, theme('colors.accent/5') 1px, transparent 1px);
            background-size: 10px 10px; opacity: 0; transition: opacity 0.4s ease;
        }
        html.dark .contact-card::after {
             background-image: radial-gradient(circle, theme('colors.dark-accent/5') 1px, transparent 1px);
        }
        .contact-card:hover::after { opacity: 1; }
        .contact-icon {
            @apply w-12 h-12 mx-auto mb-4 text-accent dark:text-dark-accent;
            transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55); /* Elastic bounce */
        }
        .contact-card:hover .contact-icon { transform: scale(1.1) rotate(10deg); }
        .contact-label { @apply block text-lg font-semibold mb-2 text-primary-text dark:text-dark-primary-text font-heading; }
        .contact-link { @apply block text-sm text-secondary-text dark:text-dark-secondary-text font-body break-words hover:text-accent dark:hover:text-dark-accent transition-colors duration-200; }
        .copy-button { @apply ml-2 p-1 rounded text-secondary-text dark:text-dark-secondary-text hover:bg-accent/10 dark:hover:bg-dark-accent/10 hover:text-accent dark:hover:text-dark-accent transition-all duration-200 inline-flex items-center justify-center; }
        .copy-button i { transition: transform 0.2s ease; }
        .copy-button:active i { transform: scale(0.9); }

        /* --- Contact Form Styles --- */
        .form-container {
             @apply bg-glass-light dark:bg-glass-dark backdrop-blur-md border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-xl p-8 shadow-lg;
             position: relative; overflow: hidden;
        }
        /* Animated border for form */
         .form-container::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            border-radius: inherit; padding: 2px; z-index: -1;
            background: linear-gradient(60deg, theme('colors.accent'), theme('colors.accent-secondary'), theme('colors.red-coral'), theme('colors.accent'));
            background-size: 300% 300%;
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: destination-out; mask-composite: exclude;
            animation: form-border-flow 6s linear infinite;
            opacity: 0.6;
        }
        html.dark .form-container::before {
             background: linear-gradient(60deg, theme('colors.dark-accent'), theme('colors.dark-accent-secondary'), theme('colors.signal-cyan'), theme('colors.dark-accent'));
             background-size: 300% 300%;
        }
        @keyframes form-border-flow { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        #tally-contact-form { transition: filter 0.3s ease; }
        .form-loading #tally-contact-form { filter: blur(5px); } /* Blur while loading */

        /* --- Map Section Styles --- */
        .map-container {
            @apply rounded-xl overflow-hidden shadow-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 relative;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .map-container:hover { transform: scale(1.02); @apply shadow-xl; }
        .map-overlay {
            @apply absolute inset-0 bg-gradient-to-t from-black/30 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end justify-center p-4;
        }
        .map-overlay-text { @apply text-white text-sm font-medium text-center opacity-0 transform translate-y-2 group-hover:opacity-100 group-hover:translate-y-0 transition-all duration-300 delay-100; }

        /* --- Copy Toast Styles (Consistent) --- */
         #copy-toast { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background-color: theme('colors.emerald-green'); color: white; padding: 10px 20px; border-radius: 20px; font-size: 0.9rem; z-index: 10000; opacity: 0; transition: opacity 0.3s ease-out, transform 0.3s ease-out; pointer-events: none; }
         #copy-toast.show { opacity: 1; transform: translateX(-50%) translateY(-10px); }

        /* General Button Styles (Consistent) */
        .cta-button { @apply interactive-element group relative inline-flex items-center justify-center px-8 py-3 font-semibold rounded-lg shadow-lg transition-all duration-300 ease-out overflow-hidden transform focus:outline-none focus:ring-2 focus:ring-offset-2 bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary text-white dark:text-jet-black focus:ring-accent dark:focus:ring-dark-accent; }
        .cta-button::before { content: ""; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(120deg, transparent, rgba(255, 255, 255, 0.3), transparent); transition: left 0.6s cubic-bezier(0.23, 1, 0.32, 1); }
        .cta-button:hover::before { left: 100%; }
        .cta-button:hover { @apply shadow-accent/40 dark:shadow-dark-accent/40 scale-[1.03] -translate-y-0.5; }
        .cta-button i { transition: transform 0.3s ease-out; }
        .cta-button:hover i { transform: translateX(4px) scale(1.1); }

        /* Accessibility: Focus Styles */
        *:focus-visible { outline: 2px solid theme('colors.accent'); outline-offset: 2px; border-radius: 2px; }
        html.dark *:focus-visible { outline-color: theme('colors.dark-accent'); }
        *:focus { outline: none; }

    </style>
    <script>
      tailwind.config = { /* Tailwind config - same as before */
        darkMode: 'class', theme: { extend: {
            colors: { 'jet-black': '#0B0C10', 'ghost-white': '#F7F7F7', 'signal-cyan': '#66FCF1', 'tech-purple': '#6C5CE7', 'emerald-green': '#2ECC71', 'red-coral': '#FF6B6B', 'sandstone': '#E0C097', 'whatsapp-green': '#25D366', 'primary-bg': '#F7F7F7', 'primary-text': '#0B0C10', 'secondary-bg': '#E0C097', 'secondary-text': '#4A4A4A', 'accent': '#6C5CE7', 'accent-secondary': '#FF6B6B', 'dark-primary-bg': '#0B0C10', 'dark-primary-text': '#F7F7F7', 'dark-secondary-bg': '#1F2833', 'dark-secondary-text': '#C5C6C7', 'dark-accent': '#66FCF1', 'dark-accent-secondary': '#45A29E', 'tertiary-light': '#F5B041', 'tertiary-dark': '#F39C12', 'glass-light': 'rgba(225, 229, 255, 0.1)', 'glass-dark': 'rgba(17, 24, 39, 0.2)', 'glass-darker': 'rgba(17, 24, 39, 0.3)', },
            fontFamily: { heading: ['Satoshi', 'Space Grotesk', 'Neue Montreal', 'sans-serif'], body: ['Inter', 'IBM Plex Sans', 'sans-serif'], mono: ['JetBrains Mono', 'Source Code Pro', 'monospace'], },
            keyframes: {
                spin: { 'from': { transform: 'rotate(0deg)' }, 'to': { transform: 'rotate(360deg)' } },
                'kaleidoscope-bg': { '0%': { backgroundPosition: '0% 50%' }, '50%': { backgroundPosition: '100% 50%' }, '100%': { backgroundPosition: '0% 50%' } },
                'form-border-flow': { '0%': { backgroundPosition: '0% 50%' }, '50%': { backgroundPosition: '100% 50%' }, '100%': { backgroundPosition: '0% 50%' } }
            },
            animation: { 'spin': 'spin 3s linear infinite', 'spin-slow': 'spin 10s linear infinite', 'spin-medium': 'spin 5s linear infinite', 'bounce-slow': 'bounce 2s infinite', 'pulse': 'pulse 2s infinite cubic-bezier(0.66, 0, 0, 1)', 'kaleidoscope-bg': 'kaleidoscope-bg 15s ease infinite', 'form-border-flow': 'form-border-flow 6s linear infinite' }
        } }
      }
    </script>
    <script>
        (function() { /* IIFE for theme initialization */
            const storedTheme = localStorage.getItem('theme'); let initialTheme = 'light'; if (storedTheme) { initialTheme = storedTheme; } if (initialTheme === 'dark') { document.documentElement.classList.add('dark'); } else { document.documentElement.classList.remove('dark'); } const applyBgNoise = () => { const noiseLight = "url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4' viewBox='0 0 4 4'%3E%3Cpath fill='%239C92AC' fill-opacity='0.10' d='M1 3h1v1H1V3zm2-2h1v1H3V1z'%3E%3C/path%3E%3C/svg%3E\")"; const noiseDark = "url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4' viewBox='0 0 4 4'%3E%3Cpath fill='%23C5C6C7' fill-opacity='0.05' d='M1 3h1v1H1V3zm2-2h1v1H3V1z'%3E%3C/path%3E%3C/svg%3E\")"; if (document.body) { document.body.style.backgroundImage = document.documentElement.classList.contains('dark') ? noiseDark : noiseLight; } }; if (document.readyState === 'loading') { document.addEventListener('DOMContentLoaded', applyBgNoise); } else { applyBgNoise(); }
        })();
    </script>
</head>
<body class="font-body bg-primary-bg text-primary-text dark:bg-dark-primary-bg dark:text-dark-primary-text min-h-screen relative overflow-x-hidden transition-colors duration-300">

    <canvas id="particle-canvas"></canvas>
    <div id="scrollProgressBar" class="fixed top-0 left-0 right-0 h-1 bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary origin-left z-50" style="transform: scaleX(0);"></div>

    <header id="main-header" class="fixed top-0 left-0 right-0 z-40 transition-all duration-300 backdrop-blur-md bg-glass-light dark:bg-glass-dark border-b border-secondary-text/10 dark:border-dark-secondary-text/10 h-16">
       <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16 transition-all duration-300">
                <a href="index.html" class="flex items-center space-x-2 group" aria-label="Daniel Wanjala - Home">
                     <img src="assets/logo.png" alt="" class="h-8 w-auto transition-transform duration-300 group-hover:scale-110 group-hover:rotate-[-5deg]" aria-hidden="true" onerror="this.style.display='none'; console.error('Logo image failed to load')">
                     <span class="text-xl font-bold bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent font-heading group-hover:opacity-80 transition-opacity duration-300">
                        Daniel Wanjala.
                    </span>
                </a>
                <nav class="hidden md:flex space-x-6" id="desktop-nav" aria-label="Main navigation">
                     <a href="index.html" data-section="home" class="nav-link">Home <span class="active-underline"></span></a>
                     <a href="about.html" data-section="about" class="nav-link">About <span class="active-underline"></span></a>
                     <a href="skills.html" data-section="skills" class="nav-link">Skills <span class="active-underline"></span></a>
                     <a href="education.html" data-section="education" class="nav-link">Education <span class="active-underline"></span></a>
                     <a href="projects.html" data-section="projects" class="nav-link">Projects <span class="active-underline"></span></a>
                     <a href="contact.html" data-section="contact" class="nav-link nav-active">Contact <span class="active-underline"></span></a> </nav>
                <div class="flex items-center space-x-2">
                     <button id="theme-toggle" aria-label="Toggle Dark/Light Mode" class="interactive-element p-2 rounded-full text-secondary-text dark:text-dark-secondary-text hover:text-accent dark:hover:text-dark-accent hover:bg-secondary-text/10 dark:hover:bg-dark-secondary-text/10 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-accent dark:focus:ring-dark-accent">
                        <i id="theme-icon-sun" data-lucide="sun" class="h-5 w-5 hidden" aria-hidden="true"></i>
                        <i id="theme-icon-moon" data-lucide="moon" class="h-5 w-5" aria-hidden="true"></i>
                     </button>
                    <div class="md:hidden">
                        <button id="mobile-menu-button" class="interactive-element inline-flex items-center justify-center p-2 rounded-md text-secondary-text dark:text-dark-secondary-text hover:text-accent dark:hover:text-dark-accent hover:bg-secondary-text/10 dark:hover:bg-dark-secondary-text/10 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-accent dark:focus:ring-dark-accent" aria-controls="mobile-menu" aria-expanded="false">
                            <span class="sr-only">Open main menu</span>
                            <svg id="menu-icon-open" class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                            <svg id="menu-icon-close" class="hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="md:hidden bg-glass-light dark:bg-glass-darker border-t border-secondary-text/10 dark:border-dark-secondary-text/10" id="mobile-menu">
             <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3" role="menu" aria-orientation="vertical" aria-labelledby="mobile-menu-button">
                 <a href="index.html" data-section="home" class="mobile-nav-link" role="menuitem">Home</a>
                <a href="about.html" data-section="about" class="mobile-nav-link" role="menuitem">About</a>
                <a href="skills.html" data-section="skills" class="mobile-nav-link" role="menuitem">Skills</a>
                <a href="education.html" data-section="education" class="mobile-nav-link" role="menuitem">Education</a>
                <a href="projects.html" data-section="projects" class="mobile-nav-link" role="menuitem">Projects</a>
                <a href="contact.html" data-section="contact" class="mobile-nav-link nav-active" role="menuitem">Contact</a> </div>
        </div>
    </header>

    <div id="main-content-container">
        <main class="pt-24 pb-16">

            <section id="contact-intro" class="py-24 px-4 md:px-8 lg:px-16 text-center relative overflow-hidden reveal-hidden kaleidoscope-gradient">
                 <div class="absolute inset-0 bg-primary-bg/30 dark:bg-dark-primary-bg/50 backdrop-blur-sm"></div>
                 <div class="relative z-10">
                     <i data-lucide="mail-check" class="w-16 h-16 mx-auto mb-6 text-accent dark:text-dark-accent reveal-hidden animate-bounce"></i>
                     <h1 class="text-4xl sm:text-5xl md:text-6xl font-bold mb-6 text-primary-text dark:text-dark-primary-text font-heading tracking-tight reveal-hidden" style="transition-delay: 100ms;">
                        Let's Start a Conversation!
                     </h1>
                     <p class="text-lg md:text-xl text-secondary-text dark:text-dark-secondary-text max-w-3xl mx-auto mb-8 leading-relaxed font-body reveal-hidden" style="transition-delay: 200ms;">
                        You've journeyed through my skills, explored my projects, and maybe even learned a bit about my quest for knowledge (and good coffee). Now, the digital handshake! Whether you have a burning question, a brilliant project idea, a complex data puzzle, or just want to debate the merits of different neural network architectures, I'm all ears (and emails, and messages...).
                     </p>
                     <p class="text-md text-secondary-text dark:text-dark-secondary-text max-w-2xl mx-auto leading-relaxed font-body reveal-hidden" style="transition-delay: 300ms;">
                        Reaching out is easy – pick your preferred channel below, or use the handy form. I'm usually pretty quick to respond, unless I'm lost deep in a debugging session or perhaps scaling a particularly challenging mountain trail (both require focus!). Looking forward to connecting!
                     </p>
                 </div>
                 </section>

            <section id="contact-methods" class="py-20 px-4 md:px-8 lg:px-16 bg-primary-bg dark:bg-dark-primary-bg">
                <h2 class="text-3xl md:text-4xl font-bold mb-16 text-center text-primary-text dark:text-dark-primary-text font-heading tracking-tight reveal-hidden">
                    Choose Your Channel
                </h2>
                <div class="max-w-6xl mx-auto grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">

                    <div class="contact-card interactive-element reveal-hidden" style="transition-delay: 0ms;" tabindex="0">
                        <i data-lucide="mail-open" class="contact-icon" aria-hidden="true"></i>
                        <span class="contact-label">Email</span>
                        <div class="flex items-center justify-center">
                            <a href="mailto:dmwanjala254@gmail.com" class="contact-link">dmwanjala254@gmail.com</a>
                            <button class="copy-button interactive-element" data-copy-text="dmwanjala254@gmail.com" aria-label="Copy email address">
                                <i data-lucide="copy" class="w-4 h-4"></i>
                            </button>
                        </div>
                        <p class="text-xs mt-3 text-secondary-text/70 dark:text-dark-secondary-text/70 font-body">Good ol' reliable email. Perfect for detailed inquiries or sending virtual high-fives.</p>
                    </div>

                    <div class="contact-card interactive-element reveal-hidden" style="transition-delay: 100ms;" tabindex="0">
                        <i data-lucide="linkedin" class="contact-icon" aria-hidden="true"></i>
                        <span class="contact-label">LinkedIn</span>
                        <a href="https://www.linkedin.com/in/daniel-wanjala-912b8b17b/" target="_blank" rel="noopener noreferrer" class="contact-link">linkedin.com/in/daniel-wanjala-91</a>
                         <p class="text-xs mt-3 text-secondary-text/70 dark:text-dark-secondary-text/70 font-body">Let's connect professionally! See my network, endorsements, and maybe some occasional data thoughts.</p>
                    </div>

                    <div class="contact-card interactive-element reveal-hidden" style="transition-delay: 200ms;" tabindex="0">
                        <i data-lucide="github" class="contact-icon" aria-hidden="true"></i>
                        <span class="contact-label">GitHub</span>
                        <a href="https://github.com/MadScie254" target="_blank" rel="noopener noreferrer" class="contact-link">github.com/MadScie254</a>
                         <p class="text-xs mt-3 text-secondary-text/70 dark:text-dark-secondary-text/70 font-body">Peek behind the curtain! Explore my public code repositories, contributions, and coding adventures.</p>
                    </div>

                     <div class="contact-card interactive-element reveal-hidden" style="transition-delay: 300ms;" tabindex="0">
                        <i data-lucide="message-circle" class="contact-icon text-whatsapp-green" aria-hidden="true"></i> <span class="contact-label">WhatsApp</span>
                        <a id="whatsapp-direct-link" href="#" target="_blank" rel="noopener noreferrer" class="contact-link">+254 742 007 277</a>
                         <p class="text-xs mt-3 text-secondary-text/70 dark:text-dark-secondary-text/70 font-body">For quicker chats or urgent data emergencies (just kidding... mostly!). Click the number to message.</p>
                    </div>
                </div>
                </section>

            <section id="contact-form-section" class="py-20 px-4 md:px-8 lg:px-16 bg-secondary-bg/30 dark:bg-dark-secondary-bg/30 reveal-hidden">
                 <h2 class="text-3xl md:text-4xl font-bold mb-12 text-center text-primary-text dark:text-dark-primary-text font-heading tracking-tight reveal-hidden">
                    Or Send a Message Directly
                 </h2>
                 <p class="text-center text-secondary-text dark:text-dark-secondary-text max-w-xl mx-auto mb-12 font-body reveal-hidden" style="transition-delay: 100ms;">
                    Prefer a form? No problem! Fill this out, and your message will beam directly into my inbox (via the magic of the internet and Tally forms). I'll get back to you as soon as possible.
                 </p>
                 <div class="max-w-2xl mx-auto reveal-hidden" style="transition-delay: 200ms;">
                    <div class="form-container">
                        <iframe
                            id="tally-contact-form"
                            data-tally-src="https://tally.so/embed/mR2xJd?alignLeft=1&hideTitle=1&transparentBackground=1&dynamicHeight=1"
                            loading="lazy"
                            width="100%"
                            height="410" /* Initial height */
                            frameborder="0"
                            marginheight="0"
                            marginwidth="0"
                            title="Contact Form"
                            class="rounded-lg">
                        </iframe>
                        </div>
                 </div>
                 </section>

            <section id="location" class="py-20 px-4 md:px-8 lg:px-16 bg-primary-bg dark:bg-dark-primary-bg reveal-hidden">
                <h2 class="text-3xl md:text-4xl font-bold mb-12 text-center text-primary-text dark:text-dark-primary-text font-heading tracking-tight reveal-hidden">
                    My General Neck of the Woods
                </h2>
                 <p class="text-center text-secondary-text dark:text-dark-secondary-text max-w-xl mx-auto mb-12 font-body reveal-hidden" style="transition-delay: 100ms;">
                    While I work remotely and collaborate digitally, I'm based near the vibrant city of Nairobi, Kenya. If you happen to be in the area and want to grab that coffee (or chai!) we talked about, let me know!
                 </p>
                 <div class="max-w-4xl mx-auto reveal-hidden group" style="transition-delay: 200ms;"> <div class="map-container aspect-w-16 aspect-h-9">
                         <iframe
                            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d127641.17934809768!2d36.78408045167248!3d-1.296804301837436!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x182f1172d84d49a7%3A0xf7cf0254b297924c!2sNairobi!5e0!3m2!1sen!2ske!4v1713764053037!5m2!1sen!2ske" width="100%"
                            height="450"
                            style="border:0;"
                            allowfullscreen=""
                            loading="lazy"
                            referrerpolicy="no-referrer-when-downgrade"
                            title="Approximate Location in Nairobi, Kenya">
                        </iframe>
                        <div class="map-overlay">
                            <span class="map-overlay-text">Nairobi, Kenya - The Green City in the Sun!</span>
                        </div>
                    </div>
                     <p class="text-xs text-center mt-2 text-secondary-text dark:text-dark-secondary-text font-body">
                        (Approximate area - for privacy!)
                    </p>
                 </div>
                 </section>


        </main>

        <footer class="bg-secondary-bg/10 dark:bg-dark-secondary-bg text-secondary-text dark:text-dark-secondary-text py-6 px-4 md:px-8 text-center text-sm reveal-hidden opacity-0 border-t border-secondary-text/10 dark:border-dark-secondary-text/10 font-body">
             © <span id="currentYear"></span> Daniel Wanjala. All rights reserved. | Let's Connect & Create!
        </footer>

        <button id="back-to-top" aria-label="Back to Top" class="interactive-element p-3 rounded-full bg-accent dark:bg-dark-accent text-white dark:text-jet-black shadow-lg hover:bg-accent-secondary dark:hover:bg-dark-accent-secondary transition-all duration-300 hover:scale-110">
            <i data-lucide="arrow-up" class="h-5 w-5"></i>
        </button>

        <div id="copy-toast" role="status" aria-live="polite">✅ Copied!</div>

    </div>

    <script defer>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Initialize Lucide Icons ---
            try { if (typeof lucide !== 'undefined') { lucide.createIcons(); } else { console.warn('Lucide icons library not loaded yet.'); } } catch (e) { console.error('Error creating Lucide icons:', e); }

            // --- Constants and State ---
            const scrollRevealThreshold = 0.1;
            const scrollRevealRootMargin = "0px 0px -50px 0px";
            let toneJsStarted = false;
            let synth, clickSynth;
            let particleAnimationId = null;
            let mouse = { x: null, y: null };
            let currentActiveSectionId = 'contact'; // Default for this page
            let toastTimeout; // For copy toast

            // --- DOM Element References ---
            const htmlEl = document.documentElement;
            const bodyEl = document.body;
            const mainHeader = document.getElementById('main-header');
            const themeToggleButton = document.getElementById('theme-toggle');
            const currentYearEl = document.getElementById('currentYear');
            const scrollProgressBar = document.getElementById('scrollProgressBar');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const menuIconOpen = document.getElementById('menu-icon-open');
            const menuIconClose = document.getElementById('menu-icon-close');
            const themeIconSun = document.getElementById('theme-icon-sun');
            const themeIconMoon = document.getElementById('theme-icon-moon');
            const navLinks = document.querySelectorAll('#desktop-nav .nav-link');
            const mobileNavLinks = document.querySelectorAll('#mobile-menu .mobile-nav-link');
            const mainContentContainer = document.getElementById('main-content-container');
            const particleCanvas = document.getElementById('particle-canvas');
            const backToTopButton = document.getElementById('back-to-top');
            const interactiveElements = document.querySelectorAll('a[href], button, [role="button"], [role="link"], .interactive-element');
            const copyButtons = document.querySelectorAll('.copy-button'); // Select copy buttons
            const copyToast = document.getElementById('copy-toast'); // Select toast element
            const whatsappDirectLink = document.getElementById('whatsapp-direct-link'); // WhatsApp link

            // --- Initial Setup Functions ---
            function setupToneJS() { /* ... Same as before ... */
                const startTone = () => { if (toneJsStarted || typeof Tone === 'undefined') return; try { Tone.start(); synth = new Tone.Synth({ oscillator: { type: 'sine' }, envelope: { attack: 0.005, decay: 0.1, sustain: 0.1, release: 0.1 }, volume: -25 }).toDestination(); clickSynth = new Tone.Synth({ oscillator: { type: 'triangle' }, envelope: { attack: 0.001, decay: 0.1, sustain: 0.05, release: 0.1 }, volume: -20 }).toDestination(); toneJsStarted = true; console.log("Tone.js AudioContext started."); ['click', 'keydown', 'touchstart'].forEach(evt => bodyEl.removeEventListener(evt, startTone)); } catch (e) { console.error("Tone.js initialization failed:", e); toneJsStarted = false; } }; ['click', 'keydown', 'touchstart'].forEach(evt => bodyEl.addEventListener(evt, startTone, { once: true, passive: true }));
            }
            function addSoundFeedback() { /* ... Same as before ... */
                 interactiveElements.forEach(el => { el.addEventListener('mouseenter', () => { if (toneJsStarted && synth) { try { synth.triggerAttackRelease('C5', '16n', Tone.now()); } catch(e) {} } }); el.addEventListener('click', () => { if (toneJsStarted && clickSynth) { try { clickSynth.triggerAttackRelease('E4', '16n', Tone.now()); } catch(e) {} } }); });
            }
            function setFooterYear() { /* ... Same as before ... */
                 if (currentYearEl) currentYearEl.textContent = new Date().getFullYear();
            }

             /** Sets up the copy-to-clipboard functionality */
            function setupClipboardCopy() {
                copyButtons.forEach(button => {
                    button.addEventListener('click', (e) => {
                        e.stopPropagation(); // Prevent card click if inside one
                        const textToCopy = button.dataset.copyText;
                        if (textToCopy && navigator.clipboard) {
                            navigator.clipboard.writeText(textToCopy).then(() => {
                                if (copyToast) {
                                    copyToast.textContent = '✅ Email Copied!'; // Specific message
                                    copyToast.classList.add('show');
                                    clearTimeout(toastTimeout);
                                    toastTimeout = setTimeout(() => { copyToast.classList.remove('show'); }, 2000);
                                }
                                const icon = button.querySelector('i[data-lucide]');
                                if (icon) {
                                     const originalIcon = icon.getAttribute('data-lucide');
                                     icon.setAttribute('data-lucide', 'check');
                                     try { lucide.createIcons(); } catch(e) {}
                                     setTimeout(() => {
                                         icon.setAttribute('data-lucide', originalIcon);
                                         try { lucide.createIcons(); } catch(e) {}
                                     }, 1500);
                                }
                                if (toneJsStarted && clickSynth) { try { clickSynth.triggerAttackRelease('G4', '16n', Tone.now()); } catch(e) {} }
                            }).catch(err => { console.error('Failed to copy: ', err); });
                        }
                    });
                });
            }

             /** Updates WhatsApp links */
             function setupWhatsAppLinks() {
                const whatsappBaseUrl = "https://wa.me/254742007277"; // Your number
                const whatsappMessage = "Hello Daniel, I visited your portfolio contact page and would like to connect.";
                const encodedMessage = encodeURIComponent(whatsappMessage);
                const whatsappUrlWithMessage = `${whatsappBaseUrl}?text=${encodedMessage}`;
                if (whatsappDirectLink) whatsappDirectLink.href = whatsappUrlWithMessage;
                // Update other WhatsApp links if they exist on the page
            }


            // --- Core Functionality ---
             function updateThemeUI() { /* ... Same as before ... */
                 if (!htmlEl || !bodyEl) return; const isDark = htmlEl.classList.contains('dark'); if (themeIconSun && themeIconMoon) { themeIconSun.classList.toggle('hidden', !isDark); themeIconMoon.classList.toggle('hidden', isDark); try { lucide.createIcons(); } catch(e) {} } const noiseLight = "url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4' viewBox='0 0 4 4'%3E%3Cpath fill='%239C92AC' fill-opacity='0.10' d='M1 3h1v1H1V3zm2-2h1v1H3V1z'%3E%3C/path%3E%3C/svg%3E\")"; const noiseDark = "url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4' viewBox='0 0 4 4'%3E%3Cpath fill='%23C5C6C7' fill-opacity='0.05' d='M1 3h1v1H1V3zm2-2h1v1H3V1z'%3E%3C/path%3E%3C/svg%3E\")"; bodyEl.style.backgroundImage = isDark ? noiseDark : noiseLight; if (particleCanvas) initParticles();
             }
            function setTheme(theme) { /* ... Same as before ... */
                 if (!htmlEl) return; htmlEl.classList.toggle('dark', theme === 'dark'); localStorage.setItem('theme', theme); updateThemeUI(); if (toneJsStarted && clickSynth) { try { clickSynth.triggerAttackRelease(theme === 'dark' ? 'C3' : 'G3', '8n', Tone.now()); } catch(e) {} }
            }
            function toggleMobileMenu() { /* ... Same as before ... */
                  if (!mobileMenuButton || !mobileMenu || !menuIconOpen || !menuIconClose) return; const isExpanded = mobileMenuButton.getAttribute('aria-expanded') === 'true'; mobileMenuButton.setAttribute('aria-expanded', !isExpanded); mobileMenu.classList.toggle('open'); menuIconOpen.classList.toggle('hidden'); menuIconClose.classList.toggle('hidden');
             }
             function closeMobileMenu() { /* ... Same as before ... */
                 if (!mobileMenuButton || !mobileMenu || !menuIconOpen || !menuIconClose) return; if (mobileMenuButton.getAttribute('aria-expanded') === 'true') { mobileMenuButton.setAttribute('aria-expanded', 'false'); mobileMenu.classList.remove('open'); menuIconOpen.classList.remove('hidden'); menuIconClose.classList.add('hidden'); }
             }
            function handleScroll() { /* ... Same as before ... */
                 if (!htmlEl || !scrollProgressBar || !mainHeader) return; const scrollableHeight = htmlEl.scrollHeight - window.innerHeight; const scrolled = window.scrollY; const progress = scrollableHeight > 0 ? Math.min(1, scrolled / scrollableHeight) : 0; scrollProgressBar.style.transform = `scaleX(${progress})`; mainHeader.classList.toggle('scrolled', scrolled > 50); if (backToTopButton) { backToTopButton.classList.toggle('visible', scrolled > 300); }
            }
            function setupScrollReveal() { // Simplified scroll reveal setup
                const revealObserverOptions = { threshold: scrollRevealThreshold, rootMargin: scrollRevealRootMargin };
                const revealCallback = (entries, observer) => { entries.forEach((entry, index) => { if (entry.isIntersecting) { const delay = entry.target.dataset.revealDelay ? parseInt(entry.target.dataset.revealDelay) : (index * 100); entry.target.style.transitionDelay = `${delay}ms`; entry.target.classList.add('reveal-visible'); if (entry.target.classList.contains('reveal-slide-left') || entry.target.classList.contains('reveal-slide-right')) { entry.target.classList.add('slide-in'); } observer.unobserve(entry.target); } }); };
                const revealObserver = new IntersectionObserver(revealCallback, revealObserverOptions);
                document.querySelectorAll('.reveal-hidden, .reveal-slide-left, .reveal-slide-right').forEach(el => revealObserver.observe(el));
            }
             function setupNavHighlighting() { // Simplified for single page
                navLinks.forEach(link => { link.classList.toggle('nav-active', link.getAttribute('data-section') === 'contact'); });
                mobileNavLinks.forEach(link => { link.classList.toggle('nav-active', link.getAttribute('data-section') === 'contact'); });
            }
            function setupTiltEffect() { /* ... Same as before ... */
                  if (!mainContentContainer) return; const handleOrientation = (event) => { if (event.beta === null || event.gamma === null) return; const beta = Math.max(-20, Math.min(20, event.beta)); const gamma = Math.max(-20, Math.min(20, event.gamma)); const maxTilt = 1.5; const tiltY = (beta / 20 * maxTilt).toFixed(2); const tiltX = (gamma / 20 * -maxTilt).toFixed(2); requestAnimationFrame(() => { mainContentContainer.style.transform = `perspective(1000px) rotateX(${tiltY}deg) rotateY(${tiltX}deg)`; }); }; if (window.DeviceOrientationEvent) { window.addEventListener('deviceorientation', handleOrientation, true); } else { console.log("DeviceOrientation not supported."); }
             }
            function setupBackToTop() { /* ... Same as before ... */
                 if (backToTopButton) { backToTopButton.addEventListener('click', () => { window.scrollTo({ top: 0, behavior: 'smooth' }); }); }
            }

            // --- Particle Background Logic ---
            let particles = [];
            function initParticles() { /* ... Same as before ... */
                 if (!particleCanvas) return; const ctx = particleCanvas.getContext('2d'); if (!ctx) return; if (particleAnimationId) cancelAnimationFrame(particleAnimationId); resizeCanvas(); particles.forEach(p => p.baseColor = null); createParticles(); if (!document.hidden) { drawParticles(); }
            }
            function resizeCanvas() { /* ... Same as before ... */
                  if (!particleCanvas) return; particleCanvas.width = window.innerWidth; particleCanvas.height = window.innerHeight;
             }
            function createParticles() { /* ... Same as before ... */
                 if (!particleCanvas) return; particles = []; const particleCount = Math.floor((particleCanvas.width * particleCanvas.height) / 18000); for (let i = 0; i < particleCount; i++) { particles.push({ x: Math.random() * particleCanvas.width, y: Math.random() * particleCanvas.height, vx: (Math.random() - 0.5) * 0.3, vy: (Math.random() - 0.5) * 0.3, radius: Math.random() * 1.8 + 0.8, baseRadius: Math.random() * 1.8 + 0.8, baseColor: null, drawColor: null, }); }
            }
            function drawParticles() { /* ... Same as before ... */
                  if (!particleCanvas) return; const ctx = particleCanvas.getContext('2d'); if (!ctx) return; ctx.clearRect(0, 0, particleCanvas.width, particleCanvas.height); const isDark = htmlEl.classList.contains('dark'); const twConfig = tailwind.config.theme.extend.colors; const lightColors = [`${twConfig.accent}80`, `${twConfig['accent-secondary']}80`, `${twConfig['tertiary-light']}60`]; const darkColors = [`${twConfig['dark-accent']}80`, `${twConfig['dark-accent-secondary']}80`, `${twConfig['tertiary-dark']}60`]; const themeColors = isDark ? darkColors : lightColors; const lineColor = isDark ? 'rgba(197, 198, 199, 0.05)' : 'rgba(74, 74, 74, 0.05)'; const particleInteractionRadius = 120; const particleLineThreshold = 110; particles.forEach((p, i) => { if (!p.baseColor) p.baseColor = themeColors[Math.floor(Math.random() * themeColors.length)]; p.drawColor = p.baseColor; p.radius = p.baseRadius; if (mouse.x !== null && mouse.y !== null) { const dx = mouse.x - p.x; const dy = mouse.y - p.y; const distance = Math.sqrt(dx * dx + dy * dy); if (distance < particleInteractionRadius) { const proximityFactor = 1 - (distance / particleInteractionRadius); const baseHex = p.baseColor.substring(0, 7); const currentAlphaHex = p.baseColor.substring(7, 9) || '80'; const currentAlphaDec = parseInt(currentAlphaHex, 16); const targetAlphaDec = Math.min(255, Math.floor(currentAlphaDec + proximityFactor * 100)); p.drawColor = `${baseHex}${targetAlphaDec.toString(16).padStart(2, '0')}`; p.radius = p.baseRadius + proximityFactor * 1.5; const force = proximityFactor; const pushStrength = 0.4; p.x -= (dx / distance) * force * pushStrength; p.y -= (dy / distance) * force * pushStrength; } } ctx.fillStyle = p.drawColor; ctx.beginPath(); ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2); ctx.fill(); p.x += p.vx; p.y += p.vy; if (p.x < -p.radius) p.x = particleCanvas.width + p.radius; if (p.x > particleCanvas.width + p.radius) p.x = -p.radius; if (p.y < -p.radius) p.y = particleCanvas.height + p.radius; if (p.y > particleCanvas.height + p.radius) p.y = -p.radius; for (let j = i + 1; j < particles.length; j++) { const p2 = particles[j]; const dx = p.x - p2.x; const dy = p.y - p2.y; const distance = Math.sqrt(dx * dx + dy * dy); if (distance < particleLineThreshold) { ctx.strokeStyle = lineColor; ctx.lineWidth = 0.5 * (1 - distance / particleLineThreshold); ctx.beginPath(); ctx.moveTo(p.x, p.y); ctx.lineTo(p2.x, p2.y); ctx.stroke(); } } }); particleAnimationId = requestAnimationFrame(drawParticles);
             }
            const updateMousePosition = (event) => { /* ... Same as before ... */
                 if (!particleCanvas) return; const rect = particleCanvas.getBoundingClientRect(); const clientX = event.touches ? event.touches[0].clientX : event.clientX; const clientY = event.touches ? event.touches[0].clientY : event.clientY; mouse.x = clientX - rect.left; mouse.y = clientY - rect.top;
             };
            const resetMousePosition = () => { /* ... Same as before ... */
                 mouse.x = null; mouse.y = null;
             };
            if (particleCanvas) { /* ... Same event listeners as before ... */
                 particleCanvas.addEventListener('mousemove', updateMousePosition); particleCanvas.addEventListener('touchmove', updateMousePosition, { passive: true }); particleCanvas.addEventListener('mouseleave', resetMousePosition); particleCanvas.addEventListener('touchend', resetMousePosition); let resizeTimeout; window.addEventListener('resize', () => { clearTimeout(resizeTimeout); resizeTimeout = setTimeout(initParticles, 250); }); document.addEventListener('visibilitychange', () => { if (!particleCanvas) return; if (document.hidden) { if (particleAnimationId) { cancelAnimationFrame(particleAnimationId); particleAnimationId = null; } } else { if (!particleAnimationId) { drawParticles(); } } });
            }
            // --- End Particle Logic ---

            // --- Event Listeners for Theme and Scroll ---
            if (themeToggleButton) { themeToggleButton.addEventListener('click', () => { const newTheme = htmlEl.classList.contains('dark') ? 'light' : 'dark'; setTheme(newTheme); }); }
            if (mobileMenuButton) { mobileMenuButton.addEventListener('click', toggleMobileMenu); }
            mobileNavLinks.forEach(link => { link.addEventListener('click', closeMobileMenu); });
            window.addEventListener('scroll', handleScroll, { passive: true });
            window.addEventListener('resize', () => { if (particleCanvas) initParticles(); }); // Resize event for particles
            window.addEventListener('visibilitychange', () => { if (document.hidden) { if (particleAnimationId) { cancelAnimationFrame(particleAnimationId); particleAnimationId = null; } } else { if (!particleAnimationId) { drawParticles(); } } });
            document.addEventListener('visibilitychange', () => { if (document.hidden) { if (particleAnimationId) { cancelAnimationFrame(particleAnimationId); particleAnimationId = null; } } else { if (!particleAnimationId) { drawParticles(); } } });
            document.addEventListener('mousemove', updateMousePosition); // For particles
            document.addEventListener('touchmove', updateMousePosition, { passive: true }); // For particles
            document.addEventListener('mouseleave', resetMousePosition); // For particles
            document.addEventListener('touchend', resetMousePosition); // For particles
            document.addEventListener('click', (e) => { if (e.target.closest('.copy-button')) { e.stopPropagation(); } }); // Prevent card click if inside one
            document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && mobileMenu.classList.contains('open')) { closeMobileMenu(); } }); // Close mobile menu on Escape
            document.addEventListener('click', (e) => { if (!mobileMenu.contains(e.target) && !mobileMenuButton.contains(e.target) && mobileMenu.classList.contains('open')) { closeMobileMenu(); } }); // Close mobile menu on outside click
            document.addEventListener('click', (e) => { if (e.target.closest('.copy-button')) { e.stopPropagation(); } }); // Prevent card click if inside one


            // --- Event Listeners & Initialization Call ---
            if (themeToggleButton) { themeToggleButton.addEventListener('click', () => { const newTheme = htmlEl.classList.contains('dark') ? 'light' : 'dark'; setTheme(newTheme); }); }
            if (mobileMenuButton) { mobileMenuButton.addEventListener('click', toggleMobileMenu); }
            mobileNavLinks.forEach(link => { link.addEventListener('click', closeMobileMenu); });
            window.addEventListener('scroll', handleScroll, { passive: true });

            // --- Initialize Everything ---
            setupToneJS();
            addSoundFeedback();
            setFooterYear();
            updateThemeUI();
            setupClipboardCopy(); // Initialize copy functionality
            setupWhatsAppLinks(); // Setup WhatsApp links
            setupScrollReveal();
            setupNavHighlighting();
            setupTiltEffect();
            setupBackToTop();
            if (particleCanvas) initParticles();

        }); // End DOMContentLoaded
    </script>

     <script>
        var d=document,w="https://tally.so/widgets/embed.js",v=function(){"undefined"!=typeof Tally?Tally.loadEmbeds():d.querySelectorAll("iframe[data-tally-src]:not([src])").forEach((function(e){e.src=e.dataset.tallySrc}))};if("undefined"!=typeof Tally)v();else if(d.querySelector('script[src="'+w+'"]')==null){var s=d.createElement("script");s.src=w;s.onload=v;s.onerror=function(){console.error("Failed to load Tally embed script."); var formIframe=document.getElementById('tally-contact-form'); if(formIframe){ formIframe.outerHTML = '<p class="text-center text-red-coral p-4 border border-red-coral rounded-lg">Contact form could not be loaded. Please try again later or use another contact method.</p>'; }};d.body.appendChild(s);}
    </script>

</body>
</html>
