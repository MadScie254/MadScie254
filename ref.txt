<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="manifest" href="manifest.json">
    <style>
        /* Fallback for unsupported browsers */
        body {
            background-color: #0B0C10;
        }
    </style>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Daniel Wanjala - Data Scientist / ML Engineer</title>
    <link rel="icon" href="assets/logo.png" type="image/png">
    <link rel="shortcut icon" href="assets/logo.png" type="image/png">
    <link rel="apple-touch-icon" href="assets/apple-touch-icon.png">

    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Add mobile-specific styles -->
    <style>
        /* Mobile-first base styles */
        html {
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            overscroll-behavior-y: none;
            -webkit-overflow-scrolling: touch;
        }

        /* Mobile touch targets */
        button, a, .interactive-element {
            min-height: 44px;
            min-width: 44px;
        }

        /* Mobile menu improvements */
        #mobile-menu {
            max-height: calc(100vh - 4rem);
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        /* Mobile-specific animations */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
                scroll-behavior: auto !important;
            }
        }

        /* Enhanced touch feedback */
        .touch-feedback {
            position: relative;
            overflow: hidden;
        }

        .touch-feedback::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%, -50%);
            transform-origin: 50% 50%;
        }

        .touch-feedback:active::after {
            opacity: 1;
            animation: touch-ripple 0.4s ease-out;
        }

        @keyframes touch-ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }
            100% {
                transform: scale(100, 100);
                opacity: 0;
            }
        }

        /* Mobile-optimized grid layouts */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
            width: 100%;
        }

        /* Mobile-friendly spacing */
        @media (max-width: 640px) {
            .container {
                padding-left: 1rem;
                padding-right: 1rem;
            }

            .section {
                padding-top: 3rem;
                padding-bottom: 3rem;
            }

            h1 { font-size: 2rem; }
            h2 { font-size: 1.75rem; }
            h3 { font-size: 1.5rem; }
        }

        /* Mobile-optimized music player */
        #floating-music-player {
            position: fixed;
            bottom: 1rem;
            right: 1rem;
            z-index: 50;
        }

        @media (max-width: 640px) {
            #spotify-player {
                width: calc(100vw - 2rem);
                left: 1rem;
                right: 1rem;
                transform: translateY(100%);
            }

            #spotify-player.visible {
                transform: translateY(0);
            }
        }

        /* Mobile-friendly navigation */
        @media (max-width: 768px) {
            .nav-link {
                padding: 0.75rem 1rem;
            }

            .mobile-nav-link {
                padding: 1rem;
                border-bottom: 1px solid rgba(156, 163, 175, 0.1);
            }
        }

        /* Mobile scroll improvements */
        .smooth-scroll {
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
        }

        /* Mobile-optimized forms */
        input, textarea, select {
            font-size: 16px !important; /* Prevents iOS zoom on focus */
        }

        /* Mobile gesture handling */
        .swipe-area {
            touch-action: pan-y pinch-zoom;
        }

        /* Mobile-friendly cards */
        .card {
            height: auto !important;
            min-height: 200px;
        }

        /* Improved mobile tooltips */
        @media (max-width: 640px) {
            .tooltip-text {
                position: fixed;
                bottom: 1rem;
                left: 50%;
                transform: translateX(-50%);
                width: calc(100% - 2rem);
                text-align: center;
            }
        }

        /* Mobile-optimized images */
        img {
            max-width: 100%;
            height: auto;
        }

        /* Mobile-friendly buttons */
        .btn {
            padding: 0.75rem 1.5rem;
            touch-action: manipulation;
        }

        /* Mobile scroll snap */
        .scroll-snap-container {
            scroll-snap-type: y mandatory;
            overflow-y: scroll;
            height: 100vh;
            -webkit-overflow-scrolling: touch;
        }

        .scroll-snap-item {
            scroll-snap-align: start;
            height: 100vh;
        }
    </style>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&family=Satoshi:wght@400;500;700&family=Inter:wght@400;500&family=IBM+Plex+Sans:wght@400;500&family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet">

    <script src="https://unpkg.com/lucide@latest"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>

    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>

    <style>
        /* Base body styles */
        body {
          font-family: 'Inter', 'IBM Plex Sans', sans-serif;
          overflow-x: hidden; /* Prevent horizontal scroll */
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
          background-attachment: fixed; /* Creates parallax effect for noise */
          position: relative; /* Needed for absolutely positioned elements */
        }

        /* Font utility classes */
        .font-heading { font-family: 'Satoshi', 'Space Grotesk', 'Neue Montreal', sans-serif; }
        .font-body { font-family: 'Inter', 'IBM Plex Sans', sans-serif; }
        .font-mono { font-family: 'JetBrains Mono', 'Source Code Pro', monospace; }

        /* Custom Scrollbar Styling (Note: Limited browser support & A11y impact) */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: theme('colors.sandstone'); }
        ::-webkit-scrollbar-thumb { background: theme('colors.accent'); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: theme('colors.accent-secondary'); }
        html.dark ::-webkit-scrollbar-track { background: theme('colors.dark-secondary-bg'); }
        html.dark ::-webkit-scrollbar-thumb { background: theme('colors.dark-accent'); }
        html.dark ::-webkit-scrollbar-thumb:hover { background: theme('colors.dark-accent-secondary'); }

        /* Basic shake animation */
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
          20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        .animate-shake { animation: shake 0.5s ease-in-out; }

        /* Smooth scrolling */
        html { scroll-behavior: smooth; }

        /* Modal Styles - Enhanced for better visibility */
        #projectModal {
            transition: opacity 0.3s ease-in-out;
            /* Ensure modal background covers everything */
            z-index: 50;
        }
        #projectModal.hidden-modal { opacity: 0; pointer-events: none; }
        #projectModal.visible-modal { opacity: 1; pointer-events: auto; }
        #projectModalContentWrapper {
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
            /* Set max height relative to viewport, allow vertical scrolling */
            max-height: 90vh;
            display: flex; /* Use flex to control child height */
            flex-direction: column;
            width: 100%; /* Ensure it takes full width within max-w */
        }
        #projectModal.hidden-modal #projectModalContentWrapper { transform: scale(0.9) translateY(20px); opacity: 0; }
        #projectModal.visible-modal #projectModalContentWrapper { transform: scale(1) translateY(0); opacity: 1; }
        /* Ensure the scrollable content area takes remaining space */
        #projectModalContent > div:last-child {
             overflow-y: auto; /* Enable scrolling for the content div */
             flex-grow: 1; /* Allow this div to grow */
             padding-bottom: 1.5rem; /* Add padding at the bottom */
        }

        /* Mobile Menu Transition */
        #mobile-menu {
            max-height: 0; overflow: hidden;
            transition: max-height 0.3s ease-out, opacity 0.3s ease-out; opacity: 0;
        }
        #mobile-menu.open { max-height: 500px; /* Adjust if needed */ opacity: 1; }

        /* Tooltip Styles */
        .tooltip-container { position: relative; display: inline-block; }
        .tooltip-text {
            visibility: hidden; width: max-content; text-align: center; border-radius: 6px;
            padding: 5px 10px; position: absolute; z-index: 60; /* Higher z-index */ bottom: 125%; left: 50%;
            transform: translateX(-50%); opacity: 0; transition: opacity 0.3s; font-size: 0.75rem;
            background-color: theme('colors.tertiary-light');
            color: theme('colors.primary-text');
            pointer-events: none; /* Prevent tooltip from blocking hover */
        }
        html.dark .tooltip-text {
            background-color: theme('colors.tertiary-dark');
            color: theme('colors.dark-primary-text');
        }
        .tooltip-container:hover .tooltip-text { visibility: visible; opacity: 1; }

        /* Scroll Reveal Animation Base */
        .reveal-hidden { opacity: 0; transform: translateY(30px); transition: opacity 0.8s ease-out, transform 0.8s ease-out; }
        .reveal-visible { opacity: 1; transform: translateY(0); }
        .reveal-slide-left { opacity: 0; transform: translateX(-50px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
        .reveal-slide-right { opacity: 0; transform: translateX(50px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
        .reveal-visible.slide-in { opacity: 1; transform: translateX(0); }
        /* Staggering delay added via JS */

        /* Navbar Underline */
        .nav-link.nav-active {
            @apply bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent;
        }
        .nav-link .active-underline {
             display: none; width: 0%; height: 2px;
             background-image: linear-gradient(to right, theme('colors.accent'), theme('colors.accent-secondary'));
             position: absolute; bottom: -2px; left: 50%; transform: translateX(-50%); transition: width 0.3s ease;
        }
        html.dark .nav-link .active-underline {
             background-image: linear-gradient(to right, theme('colors.dark-accent'), theme('colors.dark-accent-secondary'));
        }
        .nav-link.nav-active .active-underline { display: block !important; width: 60%; }

        /* Mobile active link */
        .mobile-nav-link.nav-active {
            background-image: linear-gradient(to right, theme('colors.accent/10'), theme('colors.accent-secondary/20'));
            color: theme('colors.accent') !important;
        }
        html.dark .mobile-nav-link.nav-active {
             background-image: linear-gradient(to right, theme('colors.dark-accent/10'), theme('colors.dark-accent-secondary/20'));
             color: theme('colors.dark-accent') !important;
        }

        /* --- Canvas Background --- */
        #particle-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            /* pointer-events: none; */ /* Removed to allow mouse interaction */
            /* Performance consideration: May impact low-end devices */
        }

         /* --- Main Content Container for Tilt --- */
        #main-content-container {
            perspective: 1000px;
            transition: transform 0.5s cubic-bezier(0.23, 1, 0.32, 1);
        }

        /* --- Futuristic Preloader Styles --- */
        #preloader {
            position: fixed; inset: 0; background-color: #F7F7F7; /* Default light bg */
            z-index: 9999; display: flex; align-items: center; justify-content: center;
            opacity: 1; transition: opacity 0.5s ease-out 1.8s; /* Faster fade out */
        }
        /* Dark preloader style (applied if dark mode is activated later) */
        html.dark #preloader { background-color: #0B0C10; }
        #preloader.hidden { opacity: 0; pointer-events: none; }

        .preloader-pulse {
            width: 60px; height: 60px;
            border-radius: 50%;
            background-color: theme('colors.accent');
            box-shadow: 0 0 0 0 theme('colors.accent/50');
            animation: pulse 2s infinite cubic-bezier(0.66, 0, 0, 1);
        }
        html.dark .preloader-pulse {
            background-color: theme('colors.dark-accent');
            box-shadow: 0 0 0 0 theme('colors.dark-accent/50');
        }

        /* Consolidated Pulse Keyframes */
        @keyframes pulse {
            to {
                /* Default to light theme pulse end state */
                box-shadow: 0 0 0 45px rgba(108, 92, 231, 0); /* Light accent alpha 0 */
            }
        }
        /* Dark theme pulse override */
        @keyframes pulse-dark {
             to {
                box-shadow: 0 0 0 45px rgba(102, 252, 241, 0); /* Dark accent alpha 0 */
             }
        }

        html.dark .preloader-pulse {
            animation-name: pulse-dark;
        }
        /* --- End Futuristic Preloader Styles --- */


         /* --- Copy Toast Styles --- */
         #copy-toast {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            background-color: theme('colors.emerald-green'); color: white;
            padding: 10px 20px; border-radius: 20px; font-size: 0.9rem;
            z-index: 10000; opacity: 0; transition: opacity 0.3s ease-out, transform 0.3s ease-out;
            pointer-events: none;
        }
        #copy-toast.show { opacity: 1; transform: translateX(-50%) translateY(-10px); }

        /* --- Know More Button Style --- Enhanced --- */
        .know-more-button {
            @apply relative inline-flex items-center justify-center px-8 py-3 text-base font-medium rounded-lg shadow-md transition-all duration-300 ease-out transform hover:-translate-y-1.5 hover:scale-105 overflow-hidden; /* Increased padding/size, added overflow */
            @apply bg-gradient-to-r from-accent/80 to-accent-secondary/80 dark:from-dark-accent/80 dark:to-dark-accent-secondary/80 text-white dark:text-jet-black;
            @apply hover:from-accent hover:to-accent-secondary dark:hover:from-dark-accent dark:hover:to-dark-accent-secondary hover:shadow-xl; /* Enhanced hover shadow */
            /* Ensure focus state is visible */
            @apply focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent dark:focus:ring-dark-accent focus:ring-offset-primary-bg dark:focus:ring-offset-dark-primary-bg; /* Added offset color */
            animation: subtle-pulse 2.5s infinite ease-in-out; /* Added pulse animation */
        }

        .know-more-button i {
            @apply ml-2 h-5 w-5 transition-transform duration-300 group-hover:translate-x-1.5 group-hover:scale-110; /* Enhanced icon animation */
        }

        /* Keyframe animation for the button pulse */
        @keyframes subtle-pulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); /* Tailwind md shadow */
            }
            50% {
                transform: scale(1.02); /* Slightly larger */
                box-shadow: 0 10px 15px -3px rgba(108, 92, 231, 0.2), 0 4px 6px -2px rgba(108, 92, 231, 0.1); /* Accent shadow - light mode */
            }
        }
        /* Dark mode pulse shadow override */
        @keyframes subtle-pulse-dark {
             0%, 100% {
                 transform: scale(1);
                 /* Adjust dark shadow if needed, using same as light for now */
                 box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
             }
             50% {
                 transform: scale(1.02);
                 box-shadow: 0 10px 15px -3px rgba(102, 252, 241, 0.15), 0 4px 6px -2px rgba(102, 252, 241, 0.1); /* Dark Accent shadow */
             }
         }
         /* Apply dark mode animation */
         html.dark .know-more-button {
             animation-name: subtle-pulse-dark;
         }
        /* --- End Know More Button Style --- */


        /* --- Section Title Hover Effect --- */
        section h2:hover {
            transform: skewX(-5deg) scale(1.02);
            transition: transform 0.3s ease-in-out;
        }

        /* --- Back to Top Button Styles --- */
        #back-to-top {
            position: fixed;
            bottom: 20px;
            right: 20px;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out, transform 0.3s ease-in-out;
            transform: translateY(20px);
            z-index: 1000;
            /* Ensure focus state is visible */
            @apply focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent dark:focus:ring-dark-accent;
        }
        #back-to-top.visible {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        /* --- Header Shrink on Scroll --- */
        header.scrolled {
            @apply h-14 shadow-md; /* Reduced height and added shadow */
        }
        header.scrolled .h-16 { /* Target the inner div */
            @apply h-14; /* Match header height */
        }
        header.scrolled .h-8 { /* Target the logo */
             @apply h-7; /* Slightly smaller logo */
        }

        /* --- Skill Card Icon Animation --- */
        .skill-card:hover .skill-icon {
            transform: translateY(-3px) scale(1.1);
        }
        .skill-icon {
            transition: transform 0.3s ease-out;
        }

        /* --- Education Timeline Icon Pulse --- */
        @keyframes pulse-icon {
            0% { transform: scale(1); }
            50% { transform: scale(1.15); }
            100% { transform: scale(1); }
        }
        .education-item.reveal-visible .timeline-icon {
            /* Apply pulse animation directly */
             animation: pulse-icon 1.5s ease-out;
        }

        /* --- Project Card Tilt Effect --- */
        .project-card {
            transition: transform 0.4s cubic-bezier(0.23, 1, 0.32, 1), box-shadow 0.4s ease;
            transform-style: preserve-3d; /* Needed for 3D effect */
            /* Ensure focus state is visible */
            @apply focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-accent dark:focus-within:ring-dark-accent rounded-xl;
        }
        .project-card:hover {
            @apply shadow-xl;
            transform: translateY(-5px) scale(1.02);
        }

        /* --- Publication Card Border Animation --- */
        .publication-card {
            position: relative; overflow: hidden;
            /* Ensure focus state is visible */
            @apply focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent dark:focus:ring-dark-accent rounded-xl;
        }
        .publication-card::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            border: 2px solid transparent; border-radius: inherit;
            background: linear-gradient(to right, theme('colors.accent'), theme('colors.accent-secondary')) border-box;
            -webkit-mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: destination-out; mask-composite: exclude;
            opacity: 0; transition: opacity 0.3s ease-in-out; z-index: -1;
            pointer-events: none; /* Prevent border from interfering */
        }
        html.dark .publication-card::before {
             background: linear-gradient(to right, theme('colors.dark-accent'), theme('colors.dark-accent-secondary')) border-box;
        }
        .publication-card:hover::before { opacity: 1; }

        /* --- Social Icon Bounce --- */
        @keyframes bounce-icon {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-4px) scale(1.1); }
        }
        .social-card:hover .social-icon {
            animation: bounce-icon 0.5s ease-in-out;
        }
        /* Ensure focus state is visible on social links */
        .social-card {
             @apply focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent dark:focus:ring-dark-accent rounded-lg;
        }

        /* --- Footer Fade-in --- */
        footer.reveal-visible {
            opacity: 1;
            transition: opacity 1s ease-in 0.5s; /* Fade in slower after reveal */
        }

        /* --- Floating WhatsApp Button --- */
        #floating-whatsapp {
            position: fixed;
            bottom: 90px; /* Position above back-to-top */
            right: 20px;
            z-index: 999; /* Below back-to-top but above most content */
            transition: transform 0.3s ease-out;
            /* Ensure focus state is visible */
            @apply focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-whatsapp-green;
        }
         #floating-whatsapp:hover {
             transform: scale(1.1);
         }

         /* --- Accessibility: Focus Styles --- */
        /* Add a generic focus style for elements that might not have one */
        *:focus-visible {
             outline: 2px solid theme('colors.accent');
             outline-offset: 2px;
             border-radius: 2px; /* Optional: match element rounding */
        }
        html.dark *:focus-visible {
             outline-color: theme('colors.dark-accent');
        }
        /* Hide default outline if using custom focus-visible */
        *:focus {
             outline: none;
        }
        /* Ensure high contrast focus for specific elements if needed */
        /* Example: .high-contrast-focus:focus-visible { outline: 3px solid blue; } */

        /* --- Skill Constellation Canvas Style --- */
        #skill-constellation-canvas {
            display: block; /* Remove extra space below canvas */
            width: 100%;
            height: 200px; /* Adjust height as needed */
            margin-bottom: 2rem; /* Space below canvas */
            cursor: crosshair; /* Indicate interactivity */
            opacity: 0; /* Initially hidden, fade in with JS */
            transition: opacity 0.8s ease-out;
        }
        #skill-constellation-canvas.visible {
            opacity: 1;
        }

        /* 3D Cube Styles */
        .perspective-1000 {
            perspective: 1000px;
        }

        .transform-style-3d {
            transform-style: preserve-3d;
        }

        .cube-face {
            @apply absolute w-48 h-48 flex items-center justify-center text-xl font-bold font-mono;
            backface-visibility: hidden;
            transition: transform 0.5s ease;
        }

        .front  { transform: translateZ(24px); }
        .back   { transform: translateZ(-24px) rotateY(180deg); }
        .right  { transform: translateX(24px) rotateY(90deg); }
        .left   { transform: translateX(-24px) rotateY(-90deg); }
        .top    { transform: translateY(-24px) rotateX(90deg); }
        .bottom { transform: translateY(24px) rotateX(-90deg); }

        #skill-cube {
            animation: slow-spin 15s infinite linear;
            transform: rotateX(-20deg) rotateY(-20deg);
        }

        #skill-cube:hover {
            animation-play-state: paused;
        }

        @keyframes slow-spin {
            from { transform: rotateX(-20deg) rotateY(0deg); }
            to { transform: rotateX(-20deg) rotateY(360deg); }
        }

        /* Wave Background Styles */
        .wave-background {
            pointer-events: none;
            mix-blend-mode: overlay;
        }

        #waveCanvas {
            filter: blur(2px);
            transform: scale(1.1);
            transition: opacity 0.3s ease;
        }

        /* AI Thought Bubble Styles */
        @keyframes neuron-pulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.5); opacity: 1; }
        }

        @keyframes synapse-flow {
            0% { stroke-dashoffset: 100; }
            100% { stroke-dashoffset: -100; }
        }

        .thought-bubble-visible {
            opacity: 1 !important;
        }

        .thought-content-visible {
            opacity: 1 !important;
            transform: translate-y-0 !important;
        }

        /* Floating Music Player Styles */
        #floating-music-player:hover #music-toggle {
            @apply border-accent dark:border-dark-accent;
        }

        #spotify-player.visible {
            opacity: 1;
            pointer-events: auto;
            transform: translateY(0);
        }

        @keyframes equalizer {
            0% { height: 5px; }
            50% { height: 15px; }
            100% { height: 5px; }
        }

        .equalizer-bar {
            width: 3px;
            background: currentColor;
            animation: equalizer 0.5s ease infinite;
        }

        .equalizer-bar:nth-child(2) { animation-delay: 0.1s; }
        .equalizer-bar:nth-child(3) { animation-delay: 0.2s; }
        .equalizer-bar:nth-child(4) { animation-delay: 0.3s; }

        /* Enhanced Floating Music Player Styles */
        #floating-music-player {
            animation: float-path 30s ease-in-out infinite;
        }

        @keyframes float-path {
            0% { transform: translate(0, -30vh) rotate(-5deg); }
            25% { transform: translate(-20px, -15vh) rotate(5deg); }
            50% { transform: translate(0, 0) rotate(-5deg); }
            75% { transform: translate(20px, 15vh) rotate(5deg); }
            100% { transform: translate(0, 30vh) rotate(-5deg); }
        }

        #spotify-player.visible {
            opacity: 1;
            pointer-events: auto;
            transform: translateX(0);
        }

        .equalizer-bar {
            width: 3px;
            background: currentColor;
            animation: equalizer 0.5s ease infinite;
            transform-origin: bottom;
        }

        @keyframes equalizer {
            0%, 100% { transform: scaleY(0.3); }
            50% { transform: scaleY(1); }
        }

        .equalizer-bar:nth-child(1) { animation-delay: 0.0s; }
        .equalizer-bar:nth-child(2) { animation-delay: 0.1s; }
        .equalizer-bar:nth-child(3) { animation-delay: 0.2s; }
        .equalizer-bar:nth-child(4) { animation-delay: 0.3s; }

        @keyframes ticker {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        .animate-ticker {
            animation: ticker 20s linear infinite;
        }

        @keyframes pulse-slow {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }

        .animate-pulse-slow {
            animation: pulse-slow 3s ease-in-out infinite;
        }

        /* Enhanced Ticker Animation */
        @keyframes ticker {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        .animate-ticker {
            animation: ticker 30s linear infinite;
            &:hover {
                animation-play-state: paused;
            }
        }

        /* Music Visualizer */
        #music-visualizer {
            background: linear-gradient(to right,
                rgba(108, 92, 231, 0.1),
                rgba(255, 107, 107, 0.1)
            );
            transition: transform 0.3s ease;
        }

        #music-visualizer:hover {
            transform: scale(1.02);
        }

        /* Mood Button Animations */
        .mood-btn {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .mood-btn:active {
            transform: scale(0.95);
        }

        /* Toast Animation */
        @keyframes slideUp {
            0% { transform: translate(-50%, 100%); }
            100% { transform: translate(-50%, 0); }
        }

        .toast-enter {
            animation: slideUp 0.3s ease-out forwards;
        }
    </style>
    <script>
      // Tailwind Config - Extended with new theme colors
      // (Keep this config as it defines the color variables used in CSS and JS)
      tailwind.config = {
        darkMode: 'class', // Keep 'class' strategy to allow manual toggle
        theme: {
          extend: {
            colors: {
              'jet-black': '#0B0C10', 'ghost-white': '#F7F7F7', 'signal-cyan': '#66FCF1',
              'tech-purple': '#6C5CE7', 'emerald-green': '#2ECC71', 'red-coral': '#FF6B6B',
              'sandstone': '#E0C097',
              'whatsapp-green': '#25D366', // Added WhatsApp color
              // Base Theme
              'primary-bg': '#F7F7F7', 'primary-text': '#0B0C10', 'secondary-bg': '#E0C097',
              'secondary-text': '#4A4A4A', 'accent': '#6C5CE7', 'accent-secondary': '#FF6B6B',
              // Dark Theme
              'dark-primary-bg': '#0B0C10', 'dark-primary-text': '#F7F7F7', 'dark-secondary-bg': '#1F2833',
              'dark-secondary-text': '#C5C6C7', 'dark-accent': '#66FCF1', 'dark-accent-secondary': '#45A29E',
              // Tertiary Accents
              'tertiary-light': '#F5B041',
              'tertiary-dark': '#F39C12',
              // Tinted Glass Backgrounds (Check contrast ratios for accessibility)
              'glass-light': 'rgba(225, 229, 255, 0.1)',
              'glass-dark': 'rgba(17, 24, 39, 0.2)',
              'glass-darker': 'rgba(17, 24, 39, 0.3)',
            },
            fontFamily: {
              heading: ['Satoshi', 'Space Grotesk', 'Neue Montreal', 'sans-serif'],
              body: ['Inter', 'IBM Plex Sans', 'sans-serif'],
              mono: ['JetBrains Mono', 'Source Code Pro', 'monospace'],
            },
            keyframes: {
               shake: {
                 '0%, 100%': { transform: 'translateX(0)' },
                 '10%, 30%, 50%, 70%, 90%': { transform: 'translateX(-5px)' },
                 '20%, 40%, 60%, 80%': { transform: 'translateX(5px)' },
               },
               pulse: { /* Consolidated pulse keyframe - used by preloader */
                    'to': { boxShadow: '0 0 0 45px rgba(108, 92, 231, 0)' } // Light theme pulse end state
               },
               'pulse-icon': { // Renamed from pulse-dot
                   '0%': { transform: 'scale(1)' },
                   '50%': { transform: 'scale(1.15)' },
                   '100%': { transform: 'scale(1)' },
               },
               'bounce-icon': { // Added for social icons
                   '0%, 100%': { transform: 'translateY(0) scale(1)' },
                   '50%': { transform: 'translateY(-4px) scale(1.1)' },
               },
               /* Added button pulse keyframes */
               'subtle-pulse': {
                   '0%, 100%': { transform: 'scale(1)', boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)' },
                   '50%': { transform: 'scale(1.02)', boxShadow: '0 10px 15px -3px rgba(108, 92, 231, 0.2), 0 4px 6px -2px rgba(108, 92, 231, 0.1)' }
               },
               'subtle-pulse-dark': {
                   '0%, 100%': { transform: 'scale(1)', boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)' },
                   '50%': { transform: 'scale(1.02)', boxShadow: '0 10px 15px -3px rgba(102, 252, 241, 0.15), 0 4px 6px -2px rgba(102, 252, 241, 0.1)' }
               }
             },
             animation: {
               shake: 'shake 0.5s ease-in-out',
               pulse: 'pulse 2s infinite cubic-bezier(0.66, 0, 0, 1)', // Preloader pulse
               'pulse-icon': 'pulse-icon 1.5s ease-out', // Updated name
               'bounce-icon': 'bounce-icon 0.5s ease-in-out', // Added
               'subtle-pulse': 'subtle-pulse 2.5s infinite ease-in-out', // Added for button
               'subtle-pulse-dark': 'subtle-pulse-dark 2.5s infinite ease-in-out' // Added for button dark mode
             }
          }
        }
      }
    </script>
    <script>
        // --- Theme Initialization (Immediately Invoked Function Expression - IIFE) ---
        // Runs early to prevent flash of unstyled content (FOUC) for theme
        (function() {
            // Check local storage *first* in case user explicitly set it during the session
            const storedTheme = localStorage.getItem('theme');
            let initialTheme = 'light'; // Default to light

            // If a theme was stored, use that
            if (storedTheme) {
                initialTheme = storedTheme;
            }
            // Apply the initial theme (defaults to light if nothing stored)
            if (initialTheme === 'dark') {
                document.documentElement.classList.add('dark');
            } else {
                // Explicitly remove 'dark' if it's not the initial theme or no theme is stored
                document.documentElement.classList.remove('dark');
            }

            // Function to apply background noise based on the current theme
            const applyBgNoise = () => {
                // Define noise patterns (consider accessibility contrast)
                const noiseLight = "url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4' viewBox='0 0 4 4'%3E%3Cpath fill='%239C92AC' fill-opacity='0.10' d='M1 3h1v1H1V3zm2-2h1v1H3V1z'%3E%3C/path%3E%3C/svg%3E\")";
                const noiseDark = "url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4' viewBox='0 0 4 4'%3E%3Cpath fill='%23C5C6C7' fill-opacity='0.05' d='M1 3h1v1H1V3zm2-2h1v1H3V1z'%3E%3C/path%3E%3C/svg%3E\")";
                // Ensure body exists before styling
                if (document.body) {
                    document.body.style.backgroundImage = document.documentElement.classList.contains('dark') ? noiseDark : noiseLight;
                }
            };

            // Apply noise pattern once DOM is ready or immediately if already loaded
             if (document.readyState === 'loading') {
                 // Wait for DOMContentLoaded to ensure body exists
                 document.addEventListener('DOMContentLoaded', applyBgNoise);
             } else {
                 applyBgNoise(); // Apply if DOM is already loaded
             }
        })();
    </script>

    <!-- Add Spotify SDK script in head -->
    <script src="https://sdk.scdn.co/spotify-player.js"></script>

    <!-- Add before closing head tag -->
    <script>
    window.onSpotifyWebPlaybackSDKReady = () => {
        const token = 'YOUR_ACCESS_TOKEN'; // We'll handle this with auth flow
        const player = new Spotify.Player({
            name: 'Daniel\'s Portfolio Player',
            getOAuthToken: cb => { cb(token); },
            volume: 0.5
        });

        // Ready
        player.addListener('ready', ({ device_id }) => {
            console.log('Ready with Device ID', device_id);
        });

        // Not Ready
        player.addListener('not_ready', ({ device_id }) => {
            console.log('Device ID has gone offline', device_id);
        });

        player.connect();
    };
    </script>
</head>
<body class="font-body bg-primary-bg text-primary-text dark:bg-dark-primary-bg dark:text-dark-primary-text min-h-screen relative overflow-x-hidden transition-colors duration-300">

    <div id="preloader">
        <div class="preloader-pulse"></div>
    </div>

    <canvas id="particle-canvas"></canvas>

    <div id="scrollProgressBar" class="fixed top-0 left-0 right-0 h-1 bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary origin-left z-50" style="transform: scaleX(0);"></div>

    <header id="main-header" class="fixed top-0 left-0 right-0 z-40 transition-all duration-300 backdrop-blur-md bg-glass-light dark:bg-glass-dark border-b border-secondary-text/10 dark:border-dark-secondary-text/10 h-16">
       <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16 transition-all duration-300">
                <a href="#hero" class="flex items-center space-x-2 group" aria-label="Daniel Wanjala - Home">
                     <img src="assets/logo.png" alt="" class="h-8 w-auto transition-transform duration-300 group-hover:scale-110 group-hover:rotate-[-5deg]" aria-hidden="true" onerror="this.style.display='none'; this.parentElement.insertAdjacentHTML('afterbegin', '<span class=\'text-xl font-bold text-accent dark:text-dark-accent\'>DW</span>'); console.error('Logo image failed to load')">
                     <span class="text-xl font-bold bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent font-heading group-hover:opacity-80 transition-opacity duration-300">
                        Daniel Wanjala.
                    </span>
                </a>
                <nav class="hidden md:flex space-x-6" id="desktop-nav" aria-label="Main navigation">
                     <a href="#about" data-section="about" class="nav-link px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 relative text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text">
                        About <span class="active-underline"></span>
                    </a>
                     <a href="#skills" data-section="skills" class="nav-link px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 relative text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text">
                        Skills <span class="active-underline"></span>
                    </a>
                    <a href="#education" data-section="education" class="nav-link px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 relative text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text">
                        Education <span class="active-underline"></span>
                    </a>
                    <a href="#projects" data-section="projects" class="nav-link px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 relative text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text">
                        Projects <span class="active-underline"></span>
                    </a>
                    <a href="#essays" data-section="essays" class="nav-link px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 relative text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text">
                        Essays <span class="active-underline"></span>
                    </a>
                    <a href="#publications" data-section="publications" class="nav-link px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 relative text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text">
                        Publications <span class="active-underline"></span>
                    </a>
                    <a href="#demos" data-section="demos" class="nav-link px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 relative text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text">
                        Demos <span class="active-underline"></span>
                    </a>
                    <a href="#contact" data-section="contact" class="nav-link px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 relative text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text">
                        Contact <span class="active-underline"></span>
                    </a>
                </nav>
                <div class="flex items-center space-x-2">
                     <button id="theme-toggle" aria-label="Toggle Dark/Light Mode" class="interactive-element p-2 rounded-full text-secondary-text dark:text-dark-secondary-text hover:text-accent dark:hover:text-dark-accent hover:bg-secondary-text/10 dark:hover:bg-dark-secondary-text/10 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-accent dark:focus:ring-dark-accent">
                        <i id="theme-icon-sun" data-lucide="sun" class="h-5 w-5 hidden" aria-hidden="true"></i>
                        <i id="theme-icon-moon" data-lucide="moon" class="h-5 w-5" aria-hidden="true"></i>
                     </button>
                    <div class="md:hidden">
                        <button id="mobile-menu-button" class="interactive-element inline-flex items-center justify-center p-2 rounded-md text-secondary-text dark:text-dark-secondary-text hover:text-accent dark:hover:text-dark-accent hover:bg-secondary-text/10 dark:hover:bg-dark-secondary-text/10 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-accent dark:focus:ring-dark-accent" aria-controls="mobile-menu" aria-expanded="false">
                            <span class="sr-only">Open main menu</span>
                            <svg id="menu-icon-open" class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                            <svg id="menu-icon-close" class="hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="md:hidden bg-glass-light dark:bg-glass-darker border-t border-secondary-text/10 dark:border-dark-secondary-text/10" id="mobile-menu">
             <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3" role="menu" aria-orientation="vertical" aria-labelledby="mobile-menu-button">
                <a href="#hero" data-section="hero" class="mobile-nav-link block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text" role="menuitem">Hero</a>
                <a href="#about" data-section="about" class="mobile-nav-link block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text" role="menuitem">About</a>
                <a href="#skills" data-section="skills" class="mobile-nav-link block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text" role="menuitem">Skills</a>
                <a href="#education" data-section="education" class="mobile-nav-link block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text" role="menuitem">Education</a>
                <a href="#projects" data-section="projects" class="mobile-nav-link block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text" role="menuitem">Projects</a>
                <a href="#essays" data-section="essays" class="mobile-nav-link block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text" role="menuitem">Essays</a>
                <a href="#publications" data-section="publications" class="mobile-nav-link block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text" role="menuitem">Publications</a>
                <a href="#demos" data-section="demos" class="mobile-nav-link block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text" role="menuitem">Demos</a>
                <a href="#contact" data-section="contact" class="mobile-nav-link block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text" role="menuitem">Contact</a>
            </div>
        </div>
    </header>

    <div id="main-content-container">
        <main>
            <section id="hero" class="h-screen flex flex-col items-center justify-center text-center relative overflow-hidden px-4 pt-16">
                <!-- Add animated wave background -->
                <div class="wave-background absolute inset-0 z-0">
                    <canvas id="waveCanvas" class="absolute inset-0 w-full h-full opacity-30 dark:opacity-20"></canvas>
                    <div class="absolute inset-0 bg-gradient-to-br from-primary-bg via-secondary-bg/50 to-primary-bg dark:from-dark-primary-bg dark:via-dark-secondary-bg/30 dark:to-dark-primary-bg opacity-80 z-0 transition-colors duration-300"></div>
                </div>

                <svg class="absolute bottom-0 left-0 w-full h-32 text-secondary-bg/30 dark:text-dark-secondary-bg/30 z-0 opacity-50 transition-colors duration-300" preserveAspectRatio="none" viewBox="0 0 1440 320" aria-hidden="true">
                    <path fill="currentColor" fill-opacity="1" d="M0,192L48,176C96,160,192,128,288,133.3C384,139,480,181,576,186.7C672,192,768,160,864,133.3C960,107,1056,85,1152,96C1248,107,1344,149,1392,170.7L1440,192L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path>
                </svg>

                <div class="relative z-10 reveal-hidden">
                    <h1 class="text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold mb-4 text-primary-text dark:text-dark-primary-text font-heading leading-tight tracking-tight">
                        I build data systems that <br class="hidden md:block" />
                        <span id="rotating-word-container" class="relative inline-block h-[1.2em] overflow-hidden align-bottom">
                            <span id="rotating-word" class="bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent inline-block">forecast</span>
                        </span>.
                    </h1>
                    <p class="text-lg md:text-xl text-secondary-text dark:text-dark-secondary-text mb-8 max-w-2xl mx-auto font-body leading-relaxed">
                        Machine learning meets real-world outcomes. From predictive insights to automated solutions. Based in Nairobi, Kenya.
                    </p>
                    <div class="flex flex-col sm:flex-row justify-center gap-4">
                        <a href="#projects" class="interactive-element group relative inline-flex items-center justify-center px-8 py-3 bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary text-white dark:text-jet-black font-semibold rounded-lg shadow-lg hover:shadow-accent/30 dark:hover:shadow-dark-accent/30 transition-all duration-300 ease-out overflow-hidden transform hover:-translate-y-1 hover:scale-103 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent dark:focus:ring-dark-accent">
                            View My Work
                            <i data-lucide="arrow-right" class="ml-2 h-5 w-5 transform transition-transform duration-300 group-hover:translate-x-1" aria-hidden="true"></i>
                        </a>
                        <a href="assets/Resume.pdf" download="Daniel_Wanjala_Resume.pdf" class="interactive-element group relative inline-flex items-center justify-center px-8 py-3 bg-transparent border-2 border-accent-secondary dark:border-dark-accent-secondary text-secondary-text dark:text-dark-secondary-text font-semibold rounded-lg shadow-md hover:shadow-accent-secondary/20 dark:hover:shadow-dark-accent-secondary/20 hover:bg-accent-secondary/10 dark:hover:bg-dark-accent-secondary/20 hover:text-primary-text dark:hover:text-dark-primary-text transition-all duration-300 ease-out overflow-hidden transform hover:-translate-y-1 hover:scale-103 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent-secondary dark:focus:ring-dark-accent-secondary">
                            Download Resume
                            <i data-lucide="download" class="ml-2 h-5 w-5 transform transition-transform duration-300 group-hover:translate-y-0.5" aria-hidden="true"></i>
                        </a>
                    </div>
                </div>
                <div class="absolute bottom-10 left-1/2 transform -translate-x-1/2 z-10 animate-bounce">
                     <a href="#about" aria-label="Scroll down to about section" title="Scroll down to about section" class="focus:outline-none focus:ring-2 focus:ring-accent dark:focus:ring-dark-accent rounded-full">
                        <i data-lucide="chevron-down" class="w-6 h-6 text-accent-secondary dark:text-dark-accent-secondary" aria-hidden="true"></i>
                     </a>
                </div>
            </section>

            <!-- Add new music section -->
            <section id="music" class="min-h-screen w-full py-20 px-4 md:px-8 lg:px-16 bg-gradient-to-br from-primary-bg via-secondary-bg/50 to-primary-bg dark:from-dark-primary-bg dark:via-dark-secondary-bg/30 dark:to-dark-primary-bg reveal-hidden">
                <div class="max-w-6xl mx-auto">
                    <!-- Hero Section with Animations -->
                    <div class="flex flex-col md:flex-row items-center gap-6 mb-12">
                        <div class="w-40 h-40">
                            <lottie-player
                                src="https://assets2.lottiefiles.com/packages/lf20_GpyDh0.json"
                                background="transparent"
                                speed="1"
                                loop
                                autoplay>
                            </lottie-player>
                        </div>
                        <div class="flex-1 text-center md:text-left">
                            <h2 class="text-4xl md:text-5xl font-bold mb-6 bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent font-heading tracking-tight reveal-hidden">
                                🎵 Bytes & Beats: The Data Scientist's Mix 🧠
                            </h2>
                            <p class="text-lg md:text-xl text-secondary-text dark:text-dark-secondary-text font-body leading-relaxed">
                                Where algorithms dance to the rhythm of innovation! 🎧
                            </p>
                        </div>
                        <div class="w-40 h-40">
                            <lottie-player
                                src="https://assets3.lottiefiles.com/packages/lf20_UJNc2t.json"
                                background="transparent"
                                speed="1"
                                loop
                                autoplay>
                            </lottie-player>
                        </div>
                    </div>

                    <!-- Fun Facts Ticker -->
                    <div class="relative overflow-hidden mb-12 bg-glass-light dark:bg-glass-dark backdrop-blur-lg rounded-xl border border-accent/20 dark:border-dark-accent/20 p-4">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8">
                                <lottie-player
                                    src="https://assets9.lottiefiles.com/packages/lf20_kkflmtur.json"
                                    background="transparent"
                                    speed="1"
                                    loop
                                    autoplay>
                                </lottie-player>
                            </div>
                            <div class="flex-1 overflow-hidden">
                                <div class="animate-ticker whitespace-nowrap text-secondary-text dark:text-dark-secondary-text font-mono">
                                    Why do programmers prefer dark mode? Because light attracts bugs 🪲 |
                                    I'd tell you a UDP joke, but you might not get it 🌐 |
                                    Why do Python programmers wear glasses? Because they can't C 👓 |
                                    What's a data scientist's favorite drink? Data-quila! 🍹 |
                                    My code is like my music playlist - mostly copied from Stack Overflow 😅 |
                                    Why did the ML model go to therapy? It had deep issues 🧠 |
                                    How many programmers does it take to change a light bulb? None, that's a hardware problem 💡 |
                                    I told my wife she was drawing her eyebrows too high. She looked surprised 😲 |
                                    Why do programmers always mix up Halloween and Christmas? Because Oct 31 = Dec 25 🎃 |
                                    What's a developer's favorite place? Foo Bar 🍺 |
                                    Why did the database administrator leave his wife? She had too many relationships 💔 |
                                    What do you call a developer who doesn't comment their code? A psychopath 🔪 |
                                    Why do programmers hate nature? It has too many bugs 🐛
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Main Content Grid -->
                    <div class="grid md:grid-cols-2 gap-8 mb-12">
                        <!-- Playlist Benefits Card -->
                        <div class="bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-accent/20 dark:border-dark-accent/20 rounded-xl p-6 md:p-8 shadow-lg reveal-hidden group hover:border-accent dark:hover:border-dark-accent transition-all duration-300">
                            <div class="flex items-center gap-4 mb-6">
                                <div class="w-16 h-16">
                                    <lottie-player
                                        src="https://assets5.lottiefiles.com/packages/lf20_2znxgjyt.json"
                                        background="transparent"
                                        speed="1"
                                        loop
                                        autoplay>
                                    </lottie-player>
                                </div>
                                <h3 class="text-2xl font-semibold text-primary-text dark:text-dark-primary-text font-heading">ML Mood Booster</h3>
                            </div>
                            <div class="space-y-4">
                                <div class="relative overflow-hidden rounded-lg p-4 bg-accent/5 dark:bg-dark-accent/5 group-hover:bg-accent/10 dark:group-hover:bg-dark-accent/10 transition-colors duration-300">
                                    <div class="flex items-start gap-3">
                                        <span class="text-2xl">🧠</span>
                                        <div>
                                            <h4 class="font-semibold text-accent dark:text-dark-accent mb-1">Neural Network Boost</h4>
                                            <p class="text-sm text-secondary-text dark:text-dark-secondary-text">Music increases neural connectivity by 42% (source: trust me, I'm a data scientist)</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="relative overflow-hidden rounded-lg p-4 bg-accent/5 dark:bg-dark-accent/5 group-hover:bg-accent/10 dark:group-hover:bg-dark-accent/10 transition-colors duration-300">
                                    <div class="flex items-start gap-3">
                                        <span class="text-2xl">⚡</span>
                                        <div>
                                            <h4 class="font-semibold text-accent dark:text-dark-accent mb-1">Code Acceleration</h4>
                                            <p class="text-sm text-secondary-text dark:text-dark-secondary-text">Typing speed increases proportionally to BPM (beats per minute)</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="relative overflow-hidden rounded-lg p-4 bg-accent/5 dark:bg-dark-accent/5 group-hover:bg-accent/10 dark:group-hover:bg-dark-accent/10 transition-colors duration-300">
                                    <div class="flex items-start gap-3">
                                        <span class="text-2xl">🎯</span>
                                        <div>
                                            <h4 class="font-semibold text-accent dark:text-dark-accent mb-1">Precision Enhancement</h4>
                                            <p class="text-sm text-secondary-text dark:text-dark-secondary-text">Reduces "It works on my machine" syndrome by 87%</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Status Card -->
                        <div class="bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-accent/20 dark:border-dark-accent/20 rounded-xl p-6 md:p-8 shadow-lg reveal-hidden group hover:border-accent dark:hover:border-dark-accent transition-all duration-300">
                            <div class="flex items-center gap-4 mb-6">
                                <div class="w-16 h-16">
                                    <lottie-player
                                        src="https://assets10.lottiefiles.com/packages/lf20_vxpxmgr9.json"
                                        background="transparent"
                                        speed="1"
                                        loop
                                        autoplay>
                                    </lottie-player>
                                </div>
                                <div class="flex-1">
                                    <h3 class="text-xl font-semibold text-primary-text dark:text-dark-primary-text font-heading">System Status</h3>
                                    <div class="flex items-center gap-2 text-accent dark:text-dark-accent">
                                        <div class="animate-pulse w-2 h-2 rounded-full bg-accent dark:bg-dark-accent"></div>
                                        <span class="text-sm font-mono">Vibing in Production v2.0.24 🎵</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Terminal-style updates -->
                            <div class="font-mono text-sm space-y-3">
                                <div class="flex items-center gap-2 group-hover:translate-x-2 transition-transform duration-300">
                                    <span class="text-accent dark:text-dark-accent">$</span>
                                    <span class="text-secondary-text dark:text-dark-secondary-text">npm install good-vibes@latest</span>
                                </div>
                                <div class="flex items-center gap-2 group-hover:translate-x-2 transition-transform duration-300" style="transition-delay: 100ms">
                                    <span class="text-accent dark:text-dark-accent">$</span>
                                    <span class="text-secondary-text dark:text-dark-secondary-text">git commit -m "🎵 feat: add more dopamine"</span>
                                </div>
                                <div class="flex items-center gap-2 group-hover:translate-x-2 transition-transform duration-300" style="transition-delay: 200ms">
                                    <span class="text-accent dark:text-dark-accent">$</span>
                                    <span class="text-secondary-text dark:text-dark-secondary-text">python3 enhance_productivity.py --music=true</span>
                                </div>
                            </div>

                            <!-- Stats -->
                            <div class="mt-6 space-y-3">
                                <div class="relative pt-1">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="text-xs font-semibold text-accent dark:text-dark-accent">Productivity</span>
                                        <span class="text-xs font-semibold text-accent dark:text-dark-accent">95%</span>
                                    </div>
                                    <div class="overflow-hidden h-2 text-xs flex rounded bg-accent/10 dark:bg-dark-accent/10">
                                        <div class="animate-pulse-slow bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary rounded-full transition-all duration-500" style="width: 95%"></div>
                                    </div>
                                </div>
                                <div class="relative pt-1">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="text-xs font-semibold text-accent dark:text-dark-accent">Vibe Level</span>
                                        <span class="text-xs font-semibold text-accent dark:text-dark-accent">100%</span>
                                    </div>
                                    <div class="overflow-hidden h-2 text-xs flex rounded bg-accent/10 dark:bg-dark-accent/10">
                                        <div class="animate-pulse-slow bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary rounded-full transition-all duration-500" style="width: 100%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Spotify Player -->
                    <div class="max-w-3xl mx-auto reveal-hidden">
                        <div class="relative group">
                            <!-- Decorative corners -->
                            <div class="absolute -top-4 -left-4 w-8 h-8 border-t-2 border-l-2 border-accent dark:border-dark-accent rounded-tl-lg transition-all duration-300 group-hover:w-12 group-hover:h-12"></div>
                            <div class="absolute -top-4 -right-4 w-8 h-8 border-t-2 border-r-2 border-accent dark:border-dark-accent rounded-tr-lg transition-all duration-300 group-hover:w-12 group-hover:h-12"></div>
                            <div class="absolute -bottom-4 -left-4 w-8 h-8 border-b-2 border-l-2 border-accent dark:border-dark-accent rounded-bl-lg transition-all duration-300 group-hover:w-12 group-hover:h-12"></div>
                            <div class="absolute -bottom-4 -right-4 w-8 h-8 border-b-2 border-r-2 border-accent dark:border-dark-accent rounded-br-lg transition-all duration-300 group-hover:w-12 group-hover:h-12"></div>
                            
                            <iframe 
                                title="Spotify Playlist Embed"
                                src="https://open.spotify.com/embed/playlist/2fWLbh8Ssvp5tBaa72EbJw?utm_source=generator" 
                                width="100%" 
                                height="352" 
                                frameBorder="0" 
                                allowfullscreen="" 
                                allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
                                class="w-full shadow-2xl transition-transform duration-300 group-hover:scale-[1.02]"
                                style="border-radius:12px;">
                            </iframe>
                        </div>
                    </div>

                    <!-- Footer Quote -->
                    <div class="text-center mt-16 reveal-hidden">
                        <div class="inline-flex items-center gap-3 px-6 py-3 bg-glass-light dark:bg-glass-dark backdrop-blur-lg rounded-full border border-accent/20 dark:border-dark-accent/20 shadow-lg group hover:border-accent dark:hover:border-dark-accent transition-all duration-300">
                            <div class="w-8 h-8">
                                <lottie-player
                                    src="https://assets3.lottiefiles.com/packages/lf20_26c4bh4w.json"
                                    background="transparent"
                                    speed="1"
                                    loop
                                    autoplay>
                                </lottie-player>
                            </div>
                            <p class="text-sm text-secondary-text dark:text-dark-secondary-text font-mono italic group-hover:text-accent dark:group-hover:text-dark-accent transition-colors duration-300">
                                "while(alive) { code.listenTo(music); brain.release(dopamine); }" 🎮
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Add Spotify Auth Button -->
                <div class="mb-8 text-center">
                    <button id="spotify-auth" class="px-6 py-3 bg-[#1DB954] hover:bg-[#1ed760] text-white rounded-full font-medium flex items-center justify-center gap-2 mx-auto transition-all duration-300 hover:scale-105">
                        <svg class="w-6 h-6" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.371-.721.49-1.101.24-3.021-1.85-6.821-2.27-11.292-1.24-.421.09-.842-.18-.932-.6-.09-.42.18-.84.601-.93 4.891-1.119 9.092-.62 12.452 1.42.431.249.55.729.301 1.1zm1.471-3.279c-.301.459-.921.62-1.381.32-3.452-2.13-8.723-2.76-12.804-1.51-.501.15-1.021-.15-1.171-.65-.15-.502.15-1.022.65-1.172 4.672-1.42 10.453-.721 14.435 1.77.46.301.619.92.319 1.38zm.129-3.34c-4.142-2.459-10.983-2.689-14.934-1.489-.601.18-1.231-.18-1.411-.779-.18-.601.18-1.231.78-1.411 4.562-1.38 12.133-1.111 16.894 1.729.57.34.749 1.08.409 1.65-.341.57-1.081.75-1.651.41z"/>
                        </svg>
                        Connect with Spotify
                    </button>
                </div>

                <!-- Add Mood Selector with Spotify Integration -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
                    <!-- Mood Selector Card -->
                    <div class="bg-glass-light dark:bg-glass-dark backdrop-blur-lg rounded-xl p-6 border border-accent/20 dark:border-dark-accent/20 reveal-hidden">
                        <h3 class="text-xl font-semibold text-primary-text dark:text-dark-primary-text font-heading mb-6">Coding Mood Selector</h3>
                        <div class="grid grid-cols-2 gap-4" id="mood-selector">
                            <button class="mood-btn flex flex-col items-center p-4 rounded-xl bg-accent/10 dark:bg-dark-accent/10 hover:bg-accent/20 dark:hover:bg-dark-accent/20 transition-all duration-300" data-playlist="37i9dQZF1DX5trt9i14X7j">
                                <span class="text-2xl mb-2">🎯</span>
                                <span class="text-sm font-medium text-accent dark:text-dark-accent">Deep Focus</span>
                                <span class="text-xs text-secondary-text dark:text-dark-secondary-text mt-1">Concentration mode</span>
                            </button>
                            <button class="mood-btn flex flex-col items-center p-4 rounded-xl bg-accent/10 dark:bg-dark-accent/10 hover:bg-accent/20 dark:hover:bg-dark-accent/20 transition-all duration-300" data-playlist="37i9dQZF1DX8dTWjpijlub">
                                <span class="text-2xl mb-2">⚡</span>
                                <span class="text-sm font-medium text-accent dark:text-dark-accent">High Energy</span>
                                <span class="text-xs text-secondary-text dark:text-dark-secondary-text mt-1">Maximum productivity</span>
                            </button>
                            <button class="mood-btn flex flex-col items-center p-4 rounded-xl bg-accent/10 dark:bg-dark-accent/10 hover:bg-accent/20 dark:hover:bg-dark-accent/20 transition-all duration-300" data-playlist="37i9dQZF1DX0jgyAiPl8Af">
                                <span class="text-2xl mb-2">🌊</span>
                                <span class="text-sm font-medium text-accent dark:text-dark-accent">Chill Vibes</span>
                                <span class="text-xs text-secondary-text dark:text-dark-secondary-text mt-1">Relaxed coding</span>
                            </button>
                            <button class="mood-btn flex flex-col items-center p-4 rounded-xl bg-accent/10 dark:bg-dark-accent/10 hover:bg-accent/20 dark:hover:bg-dark-accent/20 transition-all duration-300" data-playlist="37i9dQZF1DX5trt9i14X7j">
                                <span class="text-2xl mb-2">🐛</span>
                                <span class="text-sm font-medium text-accent dark:text-dark-accent">Debug Mode</span>
                                <span class="text-xs text-secondary-text dark:text-dark-secondary-text mt-1">Problem solving</span>
                            </button>
                        </div>
                    </div>

                    <!-- Visualizer Card -->
                    <div class="bg-glass-light dark:bg-glass-dark backdrop-blur-lg rounded-xl p-6 border border-accent/20 dark:border-dark-accent/20 reveal-hidden">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-xl font-semibold text-primary-text dark:text-dark-primary-text font-heading">Live Visualizer</h3>
                            <div class="flex items-center gap-3">
                                <button id="toggle-visualizer-1" title="Toggle Visualizer" aria-label="Toggle Visualizer" class="p-2 rounded-lg bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent hover:bg-accent/20 dark:hover:bg-dark-accent/20 transition-colors">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                        <path d="M10 3a1 1 0 000 2h4a1 1 0 100-2h-4zM3 7a1 1 0 011-1h10a1 1 0 110 2H4a1 1 0 01-1-1zM3 11a1 1 0 011-1h10a1 1 0 110 2H4a1 1 0 01-1-1z"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <canvas id="music-visualizer" class="w-full h-40 rounded-lg bg-accent/5 dark:bg-dark-accent/5"></canvas>
                    </div>
                </div>

                <!-- Add Now Playing Card -->
                <div class="mb-8 bg-glass-light dark:bg-glass-dark backdrop-blur-lg rounded-xl p-6 border border-accent/20 dark:border-dark-accent/20 reveal-hidden">
                    <div class="flex items-center gap-6">
                        <div id="now-playing-art" class="w-24 h-24 rounded-lg bg-accent/10 dark:bg-dark-accent/10 flex items-center justify-center">
                            <svg class="w-12 h-12 text-accent dark:text-dark-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"/>
                            </svg>
                        </div>
                        <div class="flex-1">
                            <h4 id="now-playing-title" class="text-lg font-semibold text-primary-text dark:text-dark-primary-text mb-1">Not Playing</h4>
                            <p id="now-playing-artist" class="text-secondary-text dark:text-dark-secondary-text">Connect with Spotify to start</p>
                            <div class="mt-4 flex items-center gap-4">
                                <button id="prev-track" aria-label="Previous Track" title="Previous Track" class="p-2 rounded-lg bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent hover:bg-accent/20 dark:hover:bg-dark-accent/20 transition-colors">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                        <path d="M8.445 14.832A1 1 0 0010 14v-2.798l5.445 3.63A1 1 0 0017 14V6a1 1 0 00-1.555-.832L10 8.798V6a1 1 0 00-1.555-.832l-6 4a1 1 0 000 1.664l6 4z"/>
                                    </svg>
                                </button>
                                <button id="play-pause-now-playing" aria-label="Play or Pause Track" title="Play or Pause Track" class="p-3 rounded-full bg-accent dark:bg-dark-accent text-white dark:text-jet-black hover:scale-105 transition-transform">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"/>
                                    </svg>
                                </button>
                                <button id="next-track" aria-label="Next Track" title="Next Track" class="p-2 rounded-lg bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent hover:bg-accent/20 dark:hover:bg-dark-accent/20 transition-colors">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                        <path d="M4.555 5.168A1 1 0 003 6v8a1 1 0 001.555.832L10 11.202V14a1 1 0 001.555.832l6-4a1 1 0 000-1.664l-6-4A1 1 0 0010 6v2.798L4.555 5.168z"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Previous Spotify embed remains -->
            </section>

            <section id="about" class="min-h-screen w-full py-20 px-4 md:px-8 lg:px-16 bg-secondary-bg/30 dark:bg-dark-secondary-bg/30 reveal-hidden pt-20">
                <h2 class="text-4xl md:text-5xl font-bold mb-12 text-center bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent font-heading tracking-tight reveal-hidden">About Me: Data With A Pulse</h2>
                <div class="grid grid-cols-1 md:grid-cols-5 gap-12 items-center max-w-6xl mx-auto">
                    <div class="md:col-span-2 flex justify-center relative group reveal-hidden">
                         <div class="relative w-64 h-64 md:w-80 md:h-80 rounded-full overflow-hidden border-4 border-accent-secondary dark:border-dark-accent-secondary shadow-xl transition-all duration-300 hover:scale-105 hover:shadow-[0_0_25px_rgba(108,92,231,0.3)] dark:hover:shadow-[0_0_25px_rgba(102,252,241,0.3)]">
                            <img src="assets/profile.jpg" alt="Portrait of Daniel Wanjala" class="w-full h-full object-cover" loading="lazy" onerror="this.onerror=null;this.src='https://placehold.co/320x320/0B0C10/F7F7F7?text=Daniel+W.'">
                            <div class="absolute inset-0 rounded-full border-2 border-accent dark:border-dark-accent opacity-0 group-hover:opacity-50 animate-pulse" aria-hidden="true"></div>
                        </div>
                    </div>
                    <div class="md:col-span-3 reveal-hidden">
                        <p class="text-lg md:text-xl text-secondary-text dark:text-dark-secondary-text mb-6 leading-relaxed font-body">
                            Hi, I'm Daniel Wanjala, a passionate <strong class="text-accent dark:text-dark-accent">Data Scientist and ML Engineer</strong> based near Nairobi, Kenya. My journey spans IT management and deep dives into data, driven by a belief in technology's power to solve real-world problems.
                        </p>
                        <p class="text-lg md:text-xl text-secondary-text dark:text-dark-secondary-text mb-8 leading-relaxed font-body">
                            Whether optimizing hospital operations with predictive analytics or building forecasting models, I focus on creating <strong class="text-accent dark:text-dark-accent">data systems that deliver tangible outcomes</strong>. I thrive on transforming complex data into actionable insights and robust applications. Currently pursuing an MSc in Data Science to further sharpen my expertise.
                        </p>
                        <div class="flex flex-wrap gap-4">
                            <div class="tooltip-container reveal-hidden" style="transition-delay: 0.1s;">
                                 <div class="flex items-center bg-glass-light dark:bg-glass-dark backdrop-blur-sm text-primary-text dark:text-dark-primary-text px-4 py-2 rounded-lg shadow-md border border-secondary-text/10 dark:border-dark-secondary-text/20">
                                    <i data-lucide="briefcase" class="w-5 h-5 mr-2 text-accent dark:text-dark-accent" aria-hidden="true"></i>
                                    <span>Senior IT Manager</span>
                                 </div>
                                 <span class="tooltip-text" role="tooltip">Kingdom Hospital, Webuye</span>
                            </div>
                             <div class="tooltip-container reveal-hidden" style="transition-delay: 0.2s;">
                                 <div class="flex items-center bg-glass-light dark:bg-glass-dark backdrop-blur-sm text-primary-text dark:text-dark-primary-text px-4 py-2 rounded-lg shadow-md border border-secondary-text/10 dark:border-dark-secondary-text/20">
                                    <i data-lucide="brain-circuit" class="w-5 h-5 mr-2 text-accent dark:text-dark-accent" aria-hidden="true"></i>
                                    <span>Data Scientist</span>
                                 </div>
                                 <span class="tooltip-text" role="tooltip">Volunteer @ Kingdom Hospital</span>
                            </div>
                             <div class="tooltip-container reveal-hidden" style="transition-delay: 0.3s;">
                                 <div class="flex items-center bg-glass-light dark:bg-glass-dark backdrop-blur-sm text-primary-text dark:text-dark-primary-text px-4 py-2 rounded-lg shadow-md border border-secondary-text/10 dark:border-dark-secondary-text/20">
                                    <i data-lucide="graduation-cap" class="w-5 h-5 mr-2 text-accent dark:text-dark-accent" aria-hidden="true"></i>
                                    <span>MSc. Student</span>
                                 </div>
                                  <span class="tooltip-text" role="tooltip">Cooperative University Kenya</span>
                            </div>
                        </div>
                    </div>
                </div>
                 <div class="text-center mt-16 reveal-hidden">
                    <a href="about.html" class="know-more-button group interactive-element">
                        Learn More About Me
                        <i data-lucide="arrow-right" aria-hidden="true"></i>
                    </a>
                </div>
            </section>

            <section id="skills" class="min-h-screen w-full py-20 px-4 md:px-8 lg:px-16 bg-primary-bg dark:bg-dark-primary-bg reveal-hidden pt-20">
                 <h2 class="text-4xl md:text-5xl font-bold mb-6 text-center bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent font-heading tracking-tight reveal-hidden">Core Competencies</h2>

                 <div class="max-w-4xl mx-auto mb-10 reveal-hidden">
                     <canvas id="skill-constellation-canvas"></canvas>
                     <p class="text-center text-xs text-secondary-text dark:text-dark-secondary-text font-mono mt-[-1rem] opacity-70">Interactive Skill Constellation</p>
                 </div>

                <!-- 3D Skill Cube -->
                <div class="max-w-md mx-auto mb-16 reveal-hidden perspective-1000">
                    <div id="skill-cube" class="relative w-48 h-48 mx-auto transform-style-3d transition-transform duration-1000 cursor-pointer hover:scale-110">
                        <div class="cube-face front bg-gradient-to-br from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary">
                            <span class="text-white dark:text-jet-black">Python</span>
                        </div>
                        <div class="cube-face back bg-gradient-to-br from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary">
                            <span class="text-white dark:text-jet-black">ML/AI</span>
                        </div>
                        <div class="cube-face right bg-gradient-to-br from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary">
                            <span class="text-white dark:text-jet-black">Data</span>
                        </div>
                        <div class="cube-face left bg-gradient-to-br from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary">
                            <span class="text-white dark:text-jet-black">SQL</span>
                        </div>
                        <div class="cube-face top bg-gradient-to-br from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary">
                            <span class="text-white dark:text-jet-black">Cloud</span>
                        </div>
                        <div class="cube-face bottom bg-gradient-to-br from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary">
                            <span class="text-white dark:text-jet-black">APIs</span>
                        </div>
                    </div>
                    <p class="text-center text-xs text-secondary-text dark:text-dark-secondary-text font-mono mt-4 opacity-70">Interactive 3D Skill Cube (Click to rotate)</p>
                </div>

                <div class="max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="skill-card bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-xl p-6 shadow-lg reveal-hidden hover:shadow-xl transition-shadow duration-300 group">
                        <div class="flex items-center mb-4">
                            <i data-lucide="code-2" class="skill-icon w-8 h-8 mr-3 text-accent dark:text-dark-accent" aria-hidden="true"></i>
                            <h3 class="text-xl font-semibold text-primary-text dark:text-dark-primary-text font-heading">Programming & Data</h3>
                        </div>
                        <ul class="space-y-2 text-secondary-text dark:text-dark-secondary-text font-body text-sm">
                            <li class="flex items-center"><i data-lucide="check-circle" class="w-4 h-4 mr-2 text-emerald-green" aria-hidden="true"></i> Python (Pandas, NumPy, Scikit-learn)</li>
                            <li class="flex items-center"><i data-lucide="check-circle" class="w-4 h-4 mr-2 text-emerald-green" aria-hidden="true"></i> SQL & Database Management</li>
                            <li class="flex items-center"><i data-lucide="check-circle" class="w-4 h-4 mr-2 text-emerald-green" aria-hidden="true"></i> Data Wrangling & Cleaning</li>
                            <li class="flex items-center"><i data-lucide="check-circle" class="w-4 h-4 mr-2 text-emerald-green" aria-hidden="true"></i> API Integration</li>
                            <li class="flex items-center"><i data-lucide="check-circle" class="w-4 h-4 mr-2 text-emerald-green" aria-hidden="true"></i> Git & Version Control</li>
                        </ul>
                    </div>
                    <div class="skill-card bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-xl p-6 shadow-lg reveal-hidden hover:shadow-xl transition-shadow duration-300 group" style="transition-delay: 100ms;">
                        <div class="flex items-center mb-4">
                            <i data-lucide="brain-circuit" class="skill-icon w-8 h-8 mr-3 text-accent dark:text-dark-accent" aria-hidden="true"></i>
                            <h3 class="text-xl font-semibold text-primary-text dark:text-dark-primary-text font-heading">Machine Learning & AI</h3>
                        </div>
                        <ul class="space-y-2 text-secondary-text dark:text-dark-secondary-text font-body text-sm">
                            <li class="flex items-center"><i data-lucide="check-circle" class="w-4 h-4 mr-2 text-emerald-green" aria-hidden="true"></i> Predictive Modeling (Regression, Classification)</li>
                            <li class="flex items-center"><i data-lucide="check-circle" class="w-4 h-4 mr-2 text-emerald-green" aria-hidden="true"></i> Time Series Forecasting (ARIMA, Prophet)</li>
                            <li class="flex items-center"><i data-lucide="check-circle" class="w-4 h-4 mr-2 text-emerald-green" aria-hidden="true"></i> Neural Networks (TensorFlow/Keras)</li>
                            <li class="flex items-center"><i data-lucide="check-circle" class="w-4 h-4 mr-2 text-emerald-green" aria-hidden="true"></i> Computer Vision Basics (OpenCV)</li>
                            <li class="flex items-center"><i data-lucide="check-circle" class="w-4 h-4 mr-2 text-emerald-green" aria-hidden="true"></i> Model Deployment (Flask/Streamlit Basics)</li>
                        </ul>
                    </div>
                    <div class="skill-card bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-xl p-6 shadow-lg reveal-hidden hover:shadow-xl transition-shadow duration-300 group" style="transition-delay: 200ms;">
                        <div class="flex items-center mb-4">
                            <i data-lucide="bar-chart-3" class="skill-icon w-8 h-8 mr-3 text-accent dark:text-dark-accent" aria-hidden="true"></i>
                            <h3 class="text-xl font-semibold text-primary-text dark:text-dark-primary-text font-heading">Visualization & Tools</h3>
                        </div>
                        <ul class="space-y-2 text-secondary-text dark:text-dark-secondary-text font-body text-sm">
                            <li class="flex items-center"><i data-lucide="check-circle" class="w-4 h-4 mr-2 text-emerald-green" aria-hidden="true"></i> Matplotlib & Seaborn</li>
                            <li class="flex items-center"><i data-lucide="check-circle" class="w-4 h-4 mr-2 text-emerald-green" aria-hidden="true"></i> Plotly & Dash (Basic)</li>
                            <li class="flex items-center"><i data-lucide="check-circle" class="w-4 h-4 mr-2 text-emerald-green" aria-hidden="true"></i> Jupyter Notebooks & Google Colab</li>
                            <li class="flex items-center"><i data-lucide="check-circle" class="w-4 h-4 mr-2 text-emerald-green" aria-hidden="true"></i> Cloud Platforms (GCP/AWS Basics)</li>
                            <li class="flex items-center"><i data-lucide="check-circle" class="w-4 h-4 mr-2 text-emerald-green" aria-hidden="true"></i> ERP Systems (Frappe/ERPNext)</li>
                        </ul>
                    </div>
                </div>
                 <div class="text-center mt-16 reveal-hidden">
                    <a href="skills.html" class="know-more-button group interactive-element">
                        Explore My Skillset
                        <i data-lucide="arrow-right" aria-hidden="true"></i>
                    </a>
                </div>
            </section>

            <section id="education" class="min-h-screen w-full py-20 px-4 md:px-8 lg:px-16 bg-secondary-bg/30 dark:bg-dark-secondary-bg/30 reveal-hidden pt-20">
                <h2 class="text-4xl md:text-5xl font-bold mb-12 text-center bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent font-heading tracking-tight reveal-hidden">Educational Journey</h2>
                <div class="max-w-4xl mx-auto space-y-10">
                    <div class="education-item relative pl-10 pb-8 border-l-2 border-accent dark:border-dark-accent reveal-slide-left">
                        <div class="timeline-icon absolute -left-4 top-0 p-1.5 bg-accent dark:bg-dark-accent text-primary-bg dark:text-dark-primary-bg rounded-full border-4 border-secondary-bg dark:border-dark-secondary-bg" aria-hidden="true">
                             <i data-lucide="graduation-cap" class="w-4 h-4"></i>
                        </div>
                        <span class="absolute left-10 -top-3 text-xs font-mono text-accent-secondary dark:text-dark-accent-secondary bg-secondary-bg dark:bg-dark-secondary-bg px-2 py-0.5 rounded">2024 – Present (Part-Time)</span>
                        <h3 class="text-xl md:text-2xl font-semibold mb-1 text-primary-text dark:text-dark-primary-text font-heading">Master of Science in Data Science</h3>
                        <p class="text-md font-medium text-secondary-text dark:text-dark-secondary-text mb-2">Cooperative University of Kenya</p>
                        <p class="text-sm text-secondary-text dark:text-dark-secondary-text font-body leading-relaxed">
                            Currently pursuing advanced training in machine learning, statistical modeling, and data-driven research methodologies. Admitted with special approval into the late September intake based on prior experience and proven competencies in Data Science.
                        </p>
                    </div>
                    <div class="education-item relative pl-10 pb-8 border-l-2 border-accent dark:border-dark-accent reveal-slide-right">
                         <div class="timeline-icon absolute -left-4 top-0 p-1.5 bg-accent dark:bg-dark-accent text-primary-bg dark:text-dark-primary-bg rounded-full border-4 border-secondary-bg dark:border-dark-secondary-bg" aria-hidden="true">
                             <i data-lucide="award" class="w-4 h-4"></i>
                         </div>
                        <span class="absolute left-10 -top-3 text-xs font-mono text-accent-secondary dark:text-dark-accent-secondary bg-secondary-bg dark:bg-dark-secondary-bg px-2 py-0.5 rounded">Apr 2023 – Nov 2023</span>
                        <h3 class="text-xl md:text-2xl font-semibold mb-1 text-primary-text dark:text-dark-primary-text font-heading">Certificate in Data Science & Machine Learning</h3>
                        <p class="text-md font-medium text-secondary-text dark:text-dark-secondary-text mb-2">Moringa School, Nairobi</p>
                        <p class="text-sm text-secondary-text dark:text-dark-secondary-text font-body leading-relaxed">
                            A project-based, immersive program focusing on predictive analytics, neural networks, data wrangling, model deployment, and real-world applications in healthcare and business intelligence.
                        </p>
                    </div>
                    <div class="education-item relative pl-10 pb-8 border-l-2 border-accent dark:border-dark-accent reveal-slide-left">
                         <div class="timeline-icon absolute -left-4 top-0 p-1.5 bg-accent dark:bg-dark-accent text-primary-bg dark:text-dark-primary-bg rounded-full border-4 border-secondary-bg dark:border-dark-secondary-bg" aria-hidden="true">
                             <i data-lucide="graduation-cap" class="w-4 h-4"></i>
                         </div>
                        <span class="absolute left-10 -top-3 text-xs font-mono text-accent-secondary dark:text-dark-accent-secondary bg-secondary-bg dark:bg-dark-secondary-bg px-2 py-0.5 rounded">May 2019 – Nov 2022</span>
                        <h3 class="text-xl md:text-2xl font-semibold mb-1 text-primary-text dark:text-dark-primary-text font-heading">Bachelor of Science in Information Technology</h3>
                        <p class="text-md font-medium text-secondary-text dark:text-dark-secondary-text mb-2">Zetech University, Kenya</p>
                        <p class="text-sm text-secondary-text dark:text-dark-secondary-text font-body leading-relaxed">
                            Specialized in software development, data structures, networking, and system integration. Graduated with a strong foundation in IT infrastructure, system design, and technical leadership.
                        </p>
                    </div>
                    <div class="education-item relative pl-10 pb-8 border-l-2 border-accent dark:border-dark-accent reveal-slide-right">
                         <div class="timeline-icon absolute -left-4 top-0 p-1.5 bg-accent dark:bg-dark-accent text-primary-bg dark:text-dark-primary-bg rounded-full border-4 border-secondary-bg dark:border-dark-secondary-bg" aria-hidden="true">
                             <i data-lucide="school" class="w-4 h-4"></i>
                         </div>
                         <span class="absolute left-10 -top-3 text-xs font-mono text-accent-secondary dark:text-dark-accent-secondary bg-secondary-bg dark:bg-dark-secondary-bg px-2 py-0.5 rounded">Graduated 2018</span>
                        <h3 class="text-xl md:text-2xl font-semibold mb-1 text-primary-text dark:text-dark-primary-text font-heading">Kenya Certificate of Secondary Education (KCSE)</h3>
                        <p class="text-md font-medium text-secondary-text dark:text-dark-secondary-text mb-2">St. Anthony's Boys High School, Kitale</p>
                        <p class="text-sm text-secondary-text dark:text-dark-secondary-text font-body leading-relaxed">
                            Completed with a focus on sciences and mathematics, building the analytical mindset that would later shape a career in data and technology. (Also Alumni and Tutorial Fellow - Part-Time Applicant).
                        </p>
                    </div>
                </div>
                 <div class="text-center mt-16 reveal-hidden">
                    <a href="education.html" class="know-more-button group interactive-element">
                        View Education Details
                        <i data-lucide="arrow-right" aria-hidden="true"></i>
                    </a>
                </div>
            </section>

            <section id="projects" class="min-h-screen w-full py-20 px-4 md:px-8 lg:px-16 bg-primary-bg dark:bg-dark-primary-bg reveal-hidden pt-20">
                 <h2 class="text-4xl md:text-5xl font-bold mb-12 text-center bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent font-heading tracking-tight reveal-hidden">Projects: Work That Talks Back</h2>
                 <div class="columns-1 md:columns-2 lg:columns-3 gap-6 max-w-7xl mx-auto" style="perspective: 1500px;">
                    <article class="project-card interactive-element relative rounded-xl overflow-hidden shadow-lg cursor-pointer bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 group break-inside-avoid mb-6 reveal-hidden" data-project-id="1" tabindex="0" role="button" aria-haspopup="dialog">
                         <div class="absolute top-0 left-0 h-1 w-full bg-gradient-to-r from-blue-500 to-blue-400 z-10" aria-hidden="true"></div>
                        <div class="relative h-48 w-full">
                             <img src="assets/project1_main.png" alt="GDP Growth Prediction Model" class="project-image absolute inset-0 w-full h-full object-cover transition-opacity duration-500" loading="lazy" data-original-src="assets/project1_main.png" data-alt-src="assets/project1_alt.png" onerror="this.onerror=null;this.src='https://placehold.co/600x400/0B0C10/F7F7F7?text=GDP+Model'">
                        </div>
                        <div class="p-6 text-primary-text dark:text-dark-primary-text">
                            <h3 class="text-xl font-semibold mb-2 font-heading text-accent dark:text-dark-accent">GDP Growth Prediction Model</h3>
                            <p class="text-sm mb-3 text-secondary-text dark:text-dark-secondary-text font-body">Developed a machine learning model to predict annual GDP growth using economic indicators.</p>
                            <div class="flex flex-wrap gap-2" aria-label="Project Tags">
                                <span class="text-xs bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent px-2 py-1 rounded-full font-mono">Finance</span>
                                <span class="text-xs bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent px-2 py-1 rounded-full font-mono">AI</span>
                                <span class="text-xs bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent px-2 py-1 rounded-full font-mono">Python</span>
                            </div>
                        </div>
                        <div class="absolute inset-0 bg-gradient-to-t from-primary-bg/80 dark:from-dark-primary-bg/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300" aria-hidden="true"></div>
                        <div class="absolute bottom-4 left-4 text-accent dark:text-dark-accent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center text-sm" aria-hidden="true">
                            View Project <i data-lucide="arrow-right" class="ml-1 h-4 w-4"></i>
                        </div>
                    </article>
                    <article class="project-card interactive-element relative rounded-xl overflow-hidden shadow-lg cursor-pointer bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 group break-inside-avoid mb-6 reveal-hidden" data-project-id="2" tabindex="0" role="button" aria-haspopup="dialog">
                        <div class="absolute top-0 left-0 h-1 w-full bg-gradient-to-r from-emerald-500 to-emerald-400 z-10" aria-hidden="true"></div>
                        <div class="relative h-48 w-full">
                             <img src="assets/project2_main.png" alt="AI-Driven Plant Disease Detection" class="project-image absolute inset-0 w-full h-full object-cover transition-opacity duration-500" loading="lazy" data-original-src="assets/project2_main.png" data-alt-src="assets/project2_alt.png" onerror="this.onerror=null;this.src='https://placehold.co/600x400/0B0C10/F7F7F7?text=Plant+AI'">
                        </div>
                         <div class="p-6 text-primary-text dark:text-dark-primary-text">
                            <h3 class="text-xl font-semibold mb-2 font-heading text-accent dark:text-dark-accent">AI-Driven Plant Disease Detection</h3>
                            <p class="text-sm mb-3 text-secondary-text dark:text-dark-secondary-text font-body">Collaboratively developed an advanced plant disease detection system using image processing.</p>
                            <div class="flex flex-wrap gap-2" aria-label="Project Tags">
                                <span class="text-xs bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent px-2 py-1 rounded-full font-mono">Health</span>
                                <span class="text-xs bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent px-2 py-1 rounded-full font-mono">AI</span>
                                <span class="text-xs bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent px-2 py-1 rounded-full font-mono">CV</span>
                            </div>
                        </div>
                         <div class="absolute inset-0 bg-gradient-to-t from-primary-bg/80 dark:from-dark-primary-bg/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300" aria-hidden="true"></div>
                        <div class="absolute bottom-4 left-4 text-accent dark:text-dark-accent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center text-sm" aria-hidden="true">
                            View Project <i data-lucide="arrow-right" class="ml-1 h-4 w-4"></i>
                        </div>
                    </article>
                    <article class="project-card interactive-element relative rounded-xl overflow-hidden shadow-lg cursor-pointer bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 group break-inside-avoid mb-6 reveal-hidden" data-project-id="3" tabindex="0" role="button" aria-haspopup="dialog">
                       <div class="absolute top-0 left-0 h-1 w-full bg-gradient-to-r from-red-500 to-red-400 z-10" aria-hidden="true"></div>
                        <div class="relative h-48 w-full">
                             <img src="assets/project3_main.png" alt="Kenya's GDP Forecasting Tool" class="project-image absolute inset-0 w-full h-full object-cover transition-opacity duration-500" loading="lazy" data-original-src="assets/project3_main.png" data-alt-src="assets/project3_alt.png" onerror="this.onerror=null;this.src='https://placehold.co/600x400/0B0C10/F7F7F7?text=Kenya+GDP'">
                        </div>
                          <div class="p-6 text-primary-text dark:text-dark-primary-text">
                            <h3 class="text-xl font-semibold mb-2 font-heading text-accent dark:text-dark-accent">Kenya's GDP Forecasting Tool</h3>
                            <p class="text-sm mb-3 text-secondary-text dark:text-dark-secondary-text font-body">Developed a forecasting tool to analyze and predict Kenya's GDP trends.</p>
                            <div class="flex flex-wrap gap-2" aria-label="Project Tags">
                                <span class="text-xs bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent px-2 py-1 rounded-full font-mono">Finance</span>
                                <span class="text-xs bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent px-2 py-1 rounded-full font-mono">TimeSeries</span>
                                <span class="text-xs bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent px-2 py-1 rounded-full font-mono">Python</span>
                            </div>
                        </div>
                         <div class="absolute inset-0 bg-gradient-to-t from-primary-bg/80 dark:from-dark-primary-bg/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300" aria-hidden="true"></div>
                        <div class="absolute bottom-4 left-4 text-accent dark:text-dark-accent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center text-sm" aria-hidden="true">
                            View Project <i data-lucide="arrow-right" class="ml-1 h-4 w-4"></i>
                        </div>
                    </article>
                    <article class="project-card interactive-element relative rounded-xl overflow-hidden shadow-lg cursor-pointer bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 group break-inside-avoid mb-6 reveal-hidden" data-project-id="4" tabindex="0" role="button" aria-haspopup="dialog">
                       <div class="absolute top-0 left-0 h-1 w-full bg-gradient-to-r from-purple-500 to-purple-400 z-10" aria-hidden="true"></div>
                        <div class="relative h-48 w-full">
                            <img src="assets/project4_main.png" alt="InvestWise Predictor" class="project-image absolute inset-0 w-full h-full object-cover transition-opacity duration-500" loading="lazy" data-original-src="assets/project4_main.png" data-alt-src="assets/project4_alt.png" onerror="this.onerror=null;this.src='https://placehold.co/600x400/0B0C10/F7F7F7?text=InvestWise'">
                        </div>
                         <div class="p-6 text-primary-text dark:text-dark-primary-text">
                            <h3 class="text-xl font-semibold mb-2 font-heading text-accent dark:text-dark-accent">InvestWise Predictor</h3>
                            <p class="text-sm mb-3 text-secondary-text dark:text-dark-secondary-text font-body">Intelligent online tool using neural networks to predict investment opportunities in Kenya.</p>
                            <div class="flex flex-wrap gap-2" aria-label="Project Tags">
                                 <span class="text-xs bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent px-2 py-1 rounded-full font-mono">Finance</span>
                                 <span class="text-xs bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent px-2 py-1 rounded-full font-mono">AI</span>
                                 <span class="text-xs bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent px-2 py-1 rounded-full font-mono">Web</span>
                            </div>
                        </div>
                         <div class="absolute inset-0 bg-gradient-to-t from-primary-bg/80 dark:from-dark-primary-bg/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300" aria-hidden="true"></div>
                        <div class="absolute bottom-4 left-4 text-accent dark:text-dark-accent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center text-sm" aria-hidden="true">
                            View Project <i data-lucide="arrow-right" class="ml-1 h-4 w-4"></i>
                        </div>
                    </article>
                    <article class="project-card interactive-element relative rounded-xl overflow-hidden shadow-lg cursor-pointer bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 group break-inside-avoid mb-6 reveal-hidden" data-project-id="5" tabindex="0" role="button" aria-haspopup="dialog">
                       <div class="absolute top-0 left-0 h-1 w-full bg-gradient-to-r from-yellow-500 to-yellow-400 z-10" aria-hidden="true"></div>
                        <div class="relative h-48 w-full">
                            <img src="assets/project5_main.png" alt="Netflix Stock Profit Analysis" class="project-image absolute inset-0 w-full h-full object-cover transition-opacity duration-500" loading="lazy" data-original-src="assets/project5_main.png" data-alt-src="assets/project5_alt.png" onerror="this.onerror=null;this.src='https://placehold.co/600x400/0B0C10/F7F7F7?text=Netflix+Stock'">
                        </div>
                          <div class="p-6 text-primary-text dark:text-dark-primary-text">
                            <h3 class="text-xl font-semibold mb-2 font-heading text-accent dark:text-dark-accent">Netflix Stock Profit Analysis</h3>
                            <p class="text-sm mb-3 text-secondary-text dark:text-dark-secondary-text font-body">Analyzed Netflix's stock performance to identify profit trends and patterns.</p>
                            <div class="flex flex-wrap gap-2" aria-label="Project Tags">
                                <span class="text-xs bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent px-2 py-1 rounded-full font-mono">Finance</span>
                                <span class="text-xs bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent px-2 py-1 rounded-full font-mono">Analysis</span>
                                <span class="text-xs bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent px-2 py-1 rounded-full font-mono">Python</span>
                            </div>
                        </div>
                         <div class="absolute inset-0 bg-gradient-to-t from-primary-bg/80 dark:from-dark-primary-bg/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300" aria-hidden="true"></div>
                        <div class="absolute bottom-4 left-4 text-accent dark:text-dark-accent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center text-sm" aria-hidden="true">
                            View Project <i data-lucide="arrow-right" class="ml-1 h-4 w-4"></i>
                        </div>
                    </article>
                </div>
                 <div class="text-center mt-16 reveal-hidden">
                    <a href="projects.html" class="know-more-button group interactive-element">
                        See All Projects
                        <i data-lucide="arrow-right" aria-hidden="true"></i>
                    </a>
                </div>
            </section>

            <section id="essays" class="min-h-screen w-full py-20 px-4 md:px-8 lg:px-16 bg-secondary-bg/30 dark:bg-dark-secondary-bg/30 reveal-hidden pt-20">
                <h2 class="text-4xl md:text-5xl font-bold mb-12 text-center bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent font-heading tracking-tight reveal-hidden">Essays: Thinking in Algorithms</h2>
                <div class="max-w-3xl mx-auto">
                    <article class="essay-card bg-glass-light dark:bg-glass-dark border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-xl p-6 mb-6 shadow-lg relative overflow-hidden group reveal-slide-left focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-accent dark:focus-within:ring-dark-accent">
                         <span class="absolute top-4 right-4 text-xs bg-accent-secondary/20 dark:bg-dark-accent-secondary/70 text-accent-secondary dark:text-sandstone px-2 py-1 rounded-full font-mono uppercase tracking-widest">Ethics</span>
                         <a href="https://www.sciencedirect.com/science/article/pii/S0090261624000044#:~:text=Finally%2C%20algorithmic%2Ddecision%2Dmaking%20can,and%20who%20can%20access%20it." target="_blank" rel="noopener noreferrer" class="interactive-element block focus:outline-none">
                            <h3 class="text-xl font-semibold mb-2 text-accent dark:text-dark-accent font-heading group-hover:underline">The Ethics of Algorithmic Decision Making</h3>
                         </a>
                        <p class="text-secondary-text dark:text-dark-secondary-text text-sm mb-3 font-body">Exploring the biases and societal impacts of automated decision systems.</p>
                        <div class="flex justify-between items-center text-xs text-secondary-text dark:text-dark-secondary-text/80">
                            <span class="font-mono">~7 min read</span>
                            <p class="text-accent dark:text-sandstone italic opacity-0 group-hover:opacity-100 transition-opacity duration-300">"Bias in, bias out."</p>
                        </div>
                        <div class="essay-progress-bar absolute bottom-0 left-0 h-1 bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary w-0 group-hover:w-full transition-all duration-500 ease-in-out" aria-hidden="true"></div>
                    </article>
                    <article class="essay-card bg-glass-light dark:bg-glass-dark border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-xl p-6 mb-6 shadow-lg relative overflow-hidden group reveal-slide-right focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-accent dark:focus-within:ring-dark-accent">
                         <span class="absolute top-4 right-4 text-xs bg-accent-secondary/20 dark:bg-dark-accent-secondary/70 text-accent-secondary dark:text-sandstone px-2 py-1 rounded-full font-mono uppercase tracking-widest">Infrastructure</span>
                         <a href="https://cnvrg.io/wp-content/uploads/2020/11/Best-Practices-for-Building-a-Scalable-Machine-Learning-Infrastructure.pdf" target="_blank" rel="noopener noreferrer" class="interactive-element block focus:outline-none">
                            <h3 class="text-xl font-semibold mb-2 text-accent dark:text-dark-accent font-heading group-hover:underline">Scaling Machine Learning Infrastructure</h3>
                         </a>
                        <p class="text-secondary-text dark:text-dark-secondary-text text-sm mb-3 font-body">Challenges and solutions for deploying ML models effectively at scale.</p>
                        <div class="flex justify-between items-center text-xs text-secondary-text dark:text-dark-secondary-text/80">
                            <span class="font-mono">~10 min read</span>
                             <p class="text-accent dark:text-sandstone italic opacity-0 group-hover:opacity-100 transition-opacity duration-300">"MLOps is key."</p>
                        </div>
                         <div class="essay-progress-bar absolute bottom-0 left-0 h-1 bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary w-0 group-hover:w-full transition-all duration-500 ease-in-out" aria-hidden="true"></div>
                    </article>
                 </div>
                 <div class="text-center mt-16 reveal-hidden">
                    <a href="essays.html" class="know-more-button group interactive-element">
                        Read More Essays
                        <i data-lucide="arrow-right" aria-hidden="true"></i>
                    </a>
                </div>
            </section>

            <section id="publications" class="min-h-screen w-full py-20 px-4 md:px-8 lg:px-16 bg-primary-bg dark:bg-dark-primary-bg reveal-hidden pt-20">
                 <h2 class="text-4xl md:text-5xl font-bold mb-12 text-center bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent font-heading tracking-tight reveal-hidden">Publications & Articles</h2>
                <div class="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-6 lg:gap-8">
                    <a href="https://www.linkedin.com/pulse/logarithms-algorithms-invisible-engines-ai-data-science-wanjala-u9qgf/?trackingId=nX28LhJOSLauFfN5YIOsHQ%3D%3D" target="_blank" rel="noopener noreferrer" class="interactive-element publication-card block bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-xl p-6 shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300 reveal-hidden" data-reveal-delay="0">
                        <h3 class="text-lg font-semibold mb-2 text-accent dark:text-dark-accent font-heading">Logarithms & Algorithms: The Invisible Engines of AI, Data Science, and Beyond</h3>
                        <p class="text-sm text-secondary-text dark:text-dark-secondary-text mb-3 font-body line-clamp-2">Ever wondered how Google finds exactly what you're looking for in a fraction of a second? Or how does Spotify...</p>
                        <div class="text-xs text-secondary-text dark:text-dark-secondary-text/80 font-mono flex items-center justify-between">
                            <span>by Daniel Wanjala</span>
                            <span>~10 min read</span>
                        </div>
                    </a>
                    <a href="https://www.linkedin.com/pulse/from-excel-neural-networks-my-journey-data-science-daniel-wanjala-s6vjf/?trackingId=nX28LhJOSLauFfN5YIOsHQ%3D%3D" target="_blank" rel="noopener noreferrer" class="interactive-element publication-card block bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-xl p-6 shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300 reveal-hidden" data-reveal-delay="100">
                        <h3 class="text-lg font-semibold mb-2 text-accent dark:text-dark-accent font-heading">From Excel to Neural Networks: My Journey in Data Science</h3>
                        <p class="text-sm text-secondary-text dark:text-dark-secondary-text mb-3 font-body line-clamp-2">First off, let me start by saying: that it's been a while. My LinkedIn feed probably thought I disappeared into the data abyss...</p>
                        <div class="text-xs text-secondary-text dark:text-dark-secondary-text/80 font-mono flex items-center justify-between">
                            <span>by Daniel Wanjala</span>
                            <span>~12 min read</span>
                        </div>
                    </a>
                     <a href="https://www.linkedin.com/pulse/why-ai-bots-leave-customers-frustrated-improving-zuriand-wanjala-9kbhf/?trackingId=nX28LhJOSLauFfN5YIOsHQ%3D%3D" target="_blank" rel="noopener noreferrer" class="interactive-element publication-card block bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-xl p-6 shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300 reveal-hidden" data-reveal-delay="200">
                        <h3 class="text-lg font-semibold mb-2 text-accent dark:text-dark-accent font-heading">Why AI Bots Leave Customers Frustrated: Improving Safaricom's Zuri (And Others)</h3>
                        <p class="text-sm text-secondary-text dark:text-dark-secondary-text mb-3 font-body line-clamp-2">If you call Safaricom or Airtel, you might feel frustrated because you're only interacting with an AI bot. While these bots, such as Safaricom's Zuri...</p>
                        <div class="text-xs text-secondary-text dark:text-dark-secondary-text/80 font-mono flex items-center justify-between">
                            <span>by Daniel Wanjala</span>
                            <span>~6 min read</span>
                        </div>
                    </a>
                     <a href="https://www.linkedin.com/pulse/frappe-framework-concepts-beginners-intermediate-daniel-wanjala-wki5f/?trackingId=nX28LhJOSLauFfN5YIOsHQ%3D%3D" target="_blank" rel="noopener noreferrer" class="interactive-element publication-card block bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-xl p-6 shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300 reveal-hidden" data-reveal-delay="0">
                        <h3 class="text-lg font-semibold mb-2 text-accent dark:text-dark-accent font-heading">Frappe Framework Concepts for Beginners and Intermediate</h3>
                        <p class="text-sm text-secondary-text dark:text-dark-secondary-text mb-3 font-body line-clamp-2">Frappe Introduction to Frappe Framework Overview of Frappe Framework Frappe is an open-source web application framework built on Python and JavaScript...</p>
                        <div class="text-xs text-secondary-text dark:text-dark-secondary-text/80 font-mono flex items-center justify-between">
                            <span>by Daniel Wanjala</span>
                            <span>~8 min read</span>
                        </div>
                    </a>
                    <a href="https://www.linkedin.com/pulse/lets-talk-kenya-finance-bill-2024-how-machine-learning-daniel-wanjala-fapjf/?trackingId=nX28LhJOSLauFfN5YIOsHQ%3D%3D" target="_blank" rel="noopener noreferrer" class="interactive-element publication-card block bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-xl p-6 shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300 reveal-hidden" data-reveal-delay="100">
                        <h3 class="text-lg font-semibold mb-2 text-accent dark:text-dark-accent font-heading">Let's Talk about the Kenya Finance Bill 2024 😪 and how Machine Learning will help...</h3>
                        <p class="text-sm text-secondary-text dark:text-dark-secondary-text mb-3 font-body line-clamp-2">Introduction The Kenya Finance Bill 2024 introduces a series of new tax measures and adjustments aimed at increasing government revenue...</p>
                        <div class="text-xs text-secondary-text dark:text-dark-secondary-text/80 font-mono flex items-center justify-between">
                            <span>by Daniel Wanjala</span>
                            <span>~10 min read</span>
                        </div>
                    </a>
                    <a href="https://www.linkedin.com/pulse/how-machine-learning-transportation-can-transform-africas-wanjala-163gf/?trackingId=nX28LhJOSLauFfN5YIOsHQ%3D%3D" target="_blank" rel="noopener noreferrer" class="interactive-element publication-card block bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-xl p-6 shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300 reveal-hidden" data-reveal-delay="200">
                        <h3 class="text-lg font-semibold mb-2 text-accent dark:text-dark-accent font-heading">How Machine Learning in Transportation Can Transform Africa's Transit Systems</h3>
                        <p class="text-sm text-secondary-text dark:text-dark-secondary-text mb-3 font-body line-clamp-2">Highway Design Highway SafeBoda Twiga Foods Africa's transportation sector is undergoing a radical transformation, thanks to the infusion of machine...</p>
                        <div class="text-xs text-secondary-text dark:text-dark-secondary-text/80 font-mono flex items-center justify-between">
                            <span>by Daniel Wanjala</span>
                            <span>~14 min read</span>
                        </div>
                    </a>
                    <a href="https://www.linkedin.com/pulse/machine-learning-blockchain-crypto-financial-analysis-daniel-wanjala-bf0mf/?trackingId=nX28LhJOSLauFfN5YIOsHQ%3D%3D" target="_blank" rel="noopener noreferrer" class="interactive-element publication-card block bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-xl p-6 shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300 reveal-hidden" data-reveal-delay="0">
                        <h3 class="text-lg font-semibold mb-2 text-accent dark:text-dark-accent font-heading">Machine Learning, Blockchain, and Crypto in Financial Analysis</h3>
                        <p class="text-sm text-secondary-text dark:text-dark-secondary-text mb-3 font-body line-clamp-2">Introduction: In the financial world, machine learning, blockchain, and cryptocurrencies are three emerging technologies reshaping how we analyze...</p>
                        <div class="text-xs text-secondary-text dark:text-dark-secondary-text/80 font-mono flex items-center justify-between">
                            <span>by Daniel Wanjala</span>
                            <span>~13 min read</span>
                        </div>
                    </a>
                    <a href="https://www.linkedin.com/pulse/oracle-machine-learning-algorithms-daniel-wanjala-fqo5f/?trackingId=nX28LhJOSLauFfN5YIOsHQ%3D%3D" target="_blank" rel="noopener noreferrer" class="interactive-element publication-card block bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-xl p-6 shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300 reveal-hidden" data-reveal-delay="100">
                        <h3 class="text-lg font-semibold mb-2 text-accent dark:text-dark-accent font-heading">The Oracle of Machine Learning Algorithms</h3>
                        <p class="text-sm text-secondary-text dark:text-dark-secondary-text mb-3 font-body line-clamp-2">The field of technology has been revolutionized by machine learning algorithms, which provide unparalleled insights and efficiency...</p>
                        <div class="text-xs text-secondary-text dark:text-dark-secondary-text/80 font-mono flex items-center justify-between">
                            <span>by Daniel Wanjala</span>
                            <span>~3 min read</span>
                        </div>
                    </a>
                    <a href="https://www.linkedin.com/pulse/importance-diversity-inclusion-data-science-ml-daniel-wanjala-lw3if/?trackingId=nX28LhJOSLauFfN5YIOsHQ%3D%3D" target="_blank" rel="noopener noreferrer" class="interactive-element publication-card block bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-xl p-6 shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300 reveal-hidden" data-reveal-delay="200">
                        <h3 class="text-lg font-semibold mb-2 text-accent dark:text-dark-accent font-heading">The Importance of Diversity and Inclusion in Data Science and ML</h3>
                        <p class="text-sm text-secondary-text dark:text-dark-secondary-text mb-3 font-body line-clamp-2">I. Introduction Diversity and inclusion are crucial elements in any field, and data science and machine learning (ML) are no exception...</p>
                        <div class="text-xs text-secondary-text dark:text-dark-secondary-text/80 font-mono flex items-center justify-between">
                            <span>by Daniel Wanjala</span>
                            <span>~15 min read</span>
                        </div>
                    </a>
                </div>
                 <div class="text-center mt-16 reveal-hidden">
                    <a href="publications.html" class="know-more-button group interactive-element">
                        View All Publications
                        <i data-lucide="arrow-right" aria-hidden="true"></i>
                    </a>
                </div>
            </section>

            <section id="demos" class="min-h-screen w-full py-20 px-4 md:px-8 lg:px-16 bg-secondary-bg/30 dark:bg-dark-secondary-bg/30 reveal-hidden pt-20">
                 <h2 class="text-4xl md:text-5xl font-bold mb-12 text-center bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent font-heading tracking-tight reveal-hidden">Live Demos: Try My Logic</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-6xl mx-auto">
                    <article class="demo-card interactive-element bg-glass-light dark:bg-glass-dark backdrop-blur-sm border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-xl p-6 shadow-lg cursor-pointer hover:border-accent/60 dark:hover:border-dark-accent/60 transition-all duration-300 group reveal-hidden hover:-translate-y-1 focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-accent dark:focus-within:ring-dark-accent" tabindex="0" role="link" aria-label="Try Plant Disease Detector Demo">
                        <i data-lucide="code" class="mb-3 text-accent dark:text-dark-accent h-6 w-6" aria-hidden="true"></i>
                        <h3 class="text-xl font-semibold mb-2 text-primary-text dark:text-dark-primary-text font-heading">Plant Disease Detector</h3>
                        <p class="text-secondary-text dark:text-dark-secondary-text text-sm font-body">Upload an image to detect common plant diseases.</p>
                        <div class="mt-4 text-right text-xs text-accent dark:text-dark-accent opacity-70 group-hover:opacity-100 font-mono">
                            Try Demo →
                        </div>
                    </article>
                    <article class="demo-card interactive-element bg-glass-light dark:bg-glass-dark backdrop-blur-sm border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-xl p-6 shadow-lg cursor-pointer hover:border-accent/60 dark:hover:border-dark-accent/60 transition-all duration-300 group reveal-hidden hover:-translate-y-1 focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-accent dark:focus-within:ring-dark-accent" style="transition-delay: 0.1s;" tabindex="0" role="link" aria-label="Try GDP Forecast Interactive Demo">
                        <i data-lucide="code" class="mb-3 text-accent dark:text-dark-accent h-6 w-6" aria-hidden="true"></i>
                        <h3 class="text-xl font-semibold mb-2 text-primary-text dark:text-dark-primary-text font-heading">GDP Forecast Interactive</h3>
                        <p class="text-secondary-text dark:text-dark-secondary-text text-sm font-body">Adjust parameters to see GDP forecast variations.</p>
                        <div class="mt-4 text-right text-xs text-accent dark:text-dark-accent opacity-70 group-hover:opacity-100 font-mono">
                            Try Demo →
                        </div>
                    </article>
                     </div>
                <p class="text-center text-secondary-text dark:text-dark-secondary-text mt-12 text-sm reveal-hidden font-body">
                    Note: Live demos may link to external platforms like Streamlit Cloud or JS playgrounds. (Actual links TBD)
                </p>
                 <div class="text-center mt-16 reveal-hidden">
                    <a href="demos.html" class="know-more-button group interactive-element">
                        Explore Demos
                        <i data-lucide="arrow-right" aria-hidden="true"></i>
                    </a>
                </div>
            </section>

            <section id="wireframes" class="min-h-screen w-full py-20 px-4 md:px-8 lg:px-16 bg-primary-bg dark:bg-dark-primary-bg reveal-hidden pt-20">
                <h2 class="text-4xl md:text-5xl font-bold mb-12 text-center bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent font-heading tracking-tight reveal-hidden">Mobile Experience</h2>
                
                <!-- Mobile Wireframes Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-6xl mx-auto">
                    <!-- Navigation Wireframe -->
                    <div class="wireframe-card bg-glass-light dark:bg-glass-dark backdrop-blur-lg rounded-xl p-6 border border-accent/20 dark:border-dark-accent/20 shadow-lg group hover:border-accent dark:hover:border-dark-accent transition-all duration-300 reveal-hidden">
                        <div class="flex items-center gap-4 mb-6">
                            <div class="w-12 h-12 flex items-center justify-center rounded-lg bg-accent/10 dark:bg-dark-accent/10">
                                <i data-lucide="smartphone" class="w-6 h-6 text-accent dark:text-dark-accent"></i>
                            </div>
                            <h3 class="text-xl font-semibold text-primary-text dark:text-dark-primary-text font-heading">Mobile Navigation</h3>
                        </div>
                        <div class="space-y-4">
                            <div class="aspect-[9/16] bg-accent/5 dark:bg-dark-accent/5 rounded-lg p-4 relative overflow-hidden group-hover:bg-accent/10 dark:group-hover:bg-dark-accent/10 transition-colors duration-300">
                                <!-- Mobile Nav Wireframe -->
                                <div class="absolute top-0 left-0 right-0 h-14 bg-accent/10 dark:bg-dark-accent/10 flex items-center justify-between px-4">
                                    <div class="w-8 h-8 rounded-full bg-accent/20 dark:bg-dark-accent/20"></div>
                                    <div class="w-8 h-8 flex items-center justify-center">
                                        <i data-lucide="menu" class="w-6 h-6 text-accent dark:text-dark-accent"></i>
                                    </div>
                                </div>
                                <div class="mt-16 space-y-2">
                                    <div class="h-10 bg-accent/10 dark:bg-dark-accent/10 rounded-lg w-full"></div>
                                    <div class="h-10 bg-accent/10 dark:bg-dark-accent/10 rounded-lg w-3/4"></div>
                                    <div class="h-10 bg-accent/10 dark:bg-dark-accent/10 rounded-lg w-5/6"></div>
                                </div>
                            </div>
                            <p class="text-sm text-secondary-text dark:text-dark-secondary-text">Optimized navigation with collapsible menu and smooth transitions.</p>
                        </div>
                    </div>

                    <!-- Music Player Wireframe -->
                    <div class="wireframe-card bg-glass-light dark:bg-glass-dark backdrop-blur-lg rounded-xl p-6 border border-accent/20 dark:border-dark-accent/20 shadow-lg group hover:border-accent dark:hover:border-dark-accent transition-all duration-300 reveal-hidden">
                        <div class="flex items-center gap-4 mb-6">
                            <div class="w-12 h-12 flex items-center justify-center rounded-lg bg-accent/10 dark:bg-dark-accent/10">
                                <i data-lucide="music" class="w-6 h-6 text-accent dark:text-dark-accent"></i>
                            </div>
                            <h3 class="text-xl font-semibold text-primary-text dark:text-dark-primary-text font-heading">Music Experience</h3>
                        </div>
                        <div class="space-y-4">
                            <div class="aspect-[9/16] bg-accent/5 dark:bg-dark-accent/5 rounded-lg p-4 relative overflow-hidden group-hover:bg-accent/10 dark:group-hover:bg-dark-accent/10 transition-colors duration-300">
                                <!-- Music Player Wireframe -->
                                <div class="absolute bottom-4 left-4 right-4">
                                    <div class="bg-accent/10 dark:bg-dark-accent/10 rounded-xl p-4 space-y-4">
                                        <div class="flex items-center gap-4">
                                            <div class="w-16 h-16 rounded-lg bg-accent/20 dark:bg-dark-accent/20"></div>
                                            <div class="flex-1 space-y-2">
                                                <div class="h-4 bg-accent/20 dark:bg-dark-accent/20 rounded w-3/4"></div>
                                                <div class="h-3 bg-accent/20 dark:bg-dark-accent/20 rounded w-1/2"></div>
                                            </div>
                                        </div>
                                        <div class="flex justify-center gap-4">
                                            <div class="w-10 h-10 rounded-full bg-accent/20 dark:bg-dark-accent/20"></div>
                                            <div class="w-12 h-12 rounded-full bg-accent dark:bg-dark-accent"></div>
                                            <div class="w-10 h-10 rounded-full bg-accent/20 dark:bg-dark-accent/20"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <p class="text-sm text-secondary-text dark:text-dark-secondary-text">Touch-optimized music controls and responsive player interface.</p>
                        </div>
                    </div>

                    <!-- Content Wireframe -->
                    <div class="wireframe-card bg-glass-light dark:bg-glass-dark backdrop-blur-lg rounded-xl p-6 border border-accent/20 dark:border-dark-accent/20 shadow-lg group hover:border-accent dark:hover:border-dark-accent transition-all duration-300 reveal-hidden">
                        <div class="flex items-center gap-4 mb-6">
                            <div class="w-12 h-12 flex items-center justify-center rounded-lg bg-accent/10 dark:bg-dark-accent/10">
                                <i data-lucide="layout" class="w-6 h-6 text-accent dark:text-dark-accent"></i>
                            </div>
                            <h3 class="text-xl font-semibold text-primary-text dark:text-dark-primary-text font-heading">Content Layout</h3>
                        </div>
                        <div class="space-y-4">
                            <div class="aspect-[9/16] bg-accent/5 dark:bg-dark-accent/5 rounded-lg p-4 relative overflow-hidden group-hover:bg-accent/10 dark:group-hover:bg-dark-accent/10 transition-colors duration-300">
                                <!-- Content Layout Wireframe -->
                                <div class="space-y-4">
                                    <div class="h-40 bg-accent/10 dark:bg-dark-accent/10 rounded-lg"></div>
                                    <div class="space-y-2">
                                        <div class="h-4 bg-accent/10 dark:bg-dark-accent/10 rounded w-3/4"></div>
                                        <div class="h-4 bg-accent/10 dark:bg-dark-accent/10 rounded w-full"></div>
                                        <div class="h-4 bg-accent/10 dark:bg-dark-accent/10 rounded w-5/6"></div>
                                    </div>
                                    <div class="grid grid-cols-2 gap-2">
                                        <div class="h-20 bg-accent/10 dark:bg-dark-accent/10 rounded"></div>
                                        <div class="h-20 bg-accent/10 dark:bg-dark-accent/10 rounded"></div>
                                    </div>
                                </div>
                            </div>
                            <p class="text-sm text-secondary-text dark:text-dark-secondary-text">Responsive grid layouts and adaptive content presentation.</p>
                        </div>
                    </div>
                </div>

                <!-- Mobile Features List -->
                <div class="mt-16 max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8 reveal-hidden">
                    <div class="space-y-6">
                        <h3 class="text-2xl font-semibold text-accent dark:text-dark-accent font-heading">Touch Optimized</h3>
                        <ul class="space-y-4">
                            <li class="flex items-start gap-3">
                                <i data-lucide="check-circle" class="w-6 h-6 text-emerald-green flex-shrink-0 mt-1"></i>
                                <p class="text-secondary-text dark:text-dark-secondary-text">Larger touch targets for better interaction</p>
                            </li>
                            <li class="flex items-start gap-3">
                                <i data-lucide="check-circle" class="w-6 h-6 text-emerald-green flex-shrink-0 mt-1"></i>
                                <p class="text-secondary-text dark:text-dark-secondary-text">Swipe gestures for navigation and music control</p>
                            </li>
                            <li class="flex items-start gap-3">
                                <i data-lucide="check-circle" class="w-6 h-6 text-emerald-green flex-shrink-0 mt-1"></i>
                                <p class="text-secondary-text dark:text-dark-secondary-text">Haptic feedback for enhanced interaction</p>
                            </li>
                        </ul>
                    </div>
                    <div class="space-y-6">
                        <h3 class="text-2xl font-semibold text-accent dark:text-dark-accent font-heading">Performance</h3>
                        <ul class="space-y-4">
                            <li class="flex items-start gap-3">
                                <i data-lucide="check-circle" class="w-6 h-6 text-emerald-green flex-shrink-0 mt-1"></i>
                                <p class="text-secondary-text dark:text-dark-secondary-text">Optimized image loading and caching</p>
                            </li>
                            <li class="flex items-start gap-3">
                                <i data-lucide="check-circle" class="w-6 h-6 text-emerald-green flex-shrink-0 mt-1"></i>
                                <p class="text-secondary-text dark:text-dark-secondary-text">Smooth animations and transitions</p>
                            </li>
                            <li class="flex items-start gap-3">
                                <i data-lucide="check-circle" class="w-6 h-6 text-emerald-green flex-shrink-0 mt-1"></i>
                                <p class="text-secondary-text dark:text-dark-secondary-text">Offline functionality for music playback</p>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Mobile-First Stats -->
                <div class="mt-16 bg-glass-light dark:bg-glass-dark backdrop-blur-lg rounded-xl p-8 border border-accent/20 dark:border-dark-accent/20 max-w-4xl mx-auto reveal-hidden">
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
                        <div class="text-center">
                            <div class="text-3xl font-bold bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent mb-2">90%</div>
                            <p class="text-sm text-secondary-text dark:text-dark-secondary-text">Mobile Users</p>
                        </div>
                        <div class="text-center">
                            <div class="text-3xl font-bold bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent mb-2">0.8s</div>
                            <p class="text-sm text-secondary-text dark:text-dark-secondary-text">Load Time</p>
                        </div>
                        <div class="text-center">
                            <div class="text-3xl font-bold bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent mb-2">95%</div>
                            <p class="text-sm text-secondary-text dark:text-dark-secondary-text">Satisfaction</p>
                        </div>
                        <div class="text-center">
                            <div class="text-3xl font-bold bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent mb-2">60fps</div>
                            <p class="text-sm text-secondary-text dark:text-dark-secondary-text">Animation</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="contact" class="min-h-screen w-full py-20 px-4 md:px-8 lg:px-16 bg-primary-bg dark:bg-dark-primary-bg reveal-hidden pt-20">
                 <h2 class="text-4xl md:text-5xl font-bold mb-12 text-center bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent font-heading tracking-tight reveal-hidden">Contact: Let's Collaborate</h2>
                <div class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-12">
                    <div class="reveal-slide-left">
                        <h3 class="text-2xl font-semibold mb-6 text-primary-text dark:text-dark-primary-text font-heading">Connect with me</h3>
                        <div class="space-y-4">
                            <a href="https://www.linkedin.com/in/daniel-wanjala-912b8b17b/" target="_blank" rel="noopener noreferrer" class="social-card interactive-element flex items-center p-4 bg-glass-light dark:bg-glass-dark backdrop-blur-sm border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-lg text-primary-text dark:text-dark-primary-text hover:bg-accent/10 dark:hover:bg-dark-accent/10 hover:border-accent dark:hover:border-dark-accent transition-all duration-300 group hover:-translate-y-0.5 hover:shadow-lg">
                                <i data-lucide="linkedin" class="social-icon w-6 h-6 mr-4 text-accent dark:text-dark-accent transition-transform" aria-hidden="true"></i>
                                <span class="font-medium font-body">LinkedIn</span>
                                <i data-lucide="arrow-right" class="ml-auto h-5 w-5 text-secondary-text dark:text-dark-secondary-text group-hover:text-accent dark:group-hover:text-dark-accent group-hover:translate-x-1 transition-transform" aria-hidden="true"></i>
                            </a>
                            <a href="https://github.com/MadScie254" target="_blank" rel="noopener noreferrer" class="social-card interactive-element flex items-center p-4 bg-glass-light dark:bg-glass-dark backdrop-blur-sm border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-lg text-primary-text dark:text-dark-primary-text hover:bg-accent/10 dark:hover:bg-dark-accent/10 hover:border-accent dark:hover:border-dark-accent transition-all duration-300 group hover:-translate-y-0.5 hover:shadow-lg" style="transition-delay: 0.1s;">
                                <i data-lucide="github" class="social-icon w-6 h-6 mr-4 text-accent dark:text-dark-accent transition-transform" aria-hidden="true"></i>
                                <span class="font-medium font-body">GitHub</span>
                                <i data-lucide="arrow-right" class="ml-auto h-5 w-5 text-secondary-text dark:text-dark-secondary-text group-hover:text-accent dark:group-hover:text-dark-accent group-hover:translate-x-1 transition-transform" aria-hidden="true"></i>
                            </a>
                             <div class="social-card flex items-center p-4 bg-glass-light dark:bg-glass-dark backdrop-blur-md border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-lg text-primary-text dark:text-dark-primary-text transition-all duration-300 group hover:border-accent/50 dark:hover:border-dark-accent/50 reveal-hidden focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-accent dark:focus-within:ring-dark-accent" data-reveal-delay="200">
                                <i data-lucide="mail" class="social-icon w-6 h-6 mr-4 text-accent dark:text-dark-accent transition-transform" aria-hidden="true"></i>
                                <a href="mailto:dmwanjala254@gmail.com" class="font-medium font-body hover:text-accent dark:hover:text-dark-accent transition-colors break-all focus:outline-none">dmwanjala254@gmail.com</a>
                                <button class="copy-btn ml-auto flex-shrink-0 p-1 rounded hover:bg-accent/20 dark:hover:bg-dark-accent/20 text-secondary-text dark:text-dark-secondary-text hover:text-accent dark:hover:text-dark-accent transition-colors interactive-element focus:outline-none focus:ring-2 focus:ring-accent dark:focus:ring-dark-accent" data-copy-text="dmwanjala254@gmail.com" aria-label="Copy email address">
                                    <i data-lucide="copy" class="w-4 h-4" aria-hidden="true"></i>
                                </button>
                            </div>
                            <a id="whatsapp-link" href="#" target="_blank" rel="noopener noreferrer" class="social-card interactive-element flex items-center p-4 bg-glass-light dark:bg-glass-dark backdrop-blur-sm border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-lg text-primary-text dark:text-dark-primary-text hover:bg-accent/10 dark:hover:bg-dark-accent/10 hover:border-accent dark:hover:border-dark-accent transition-all duration-300 group hover:-translate-y-0.5 hover:shadow-lg" style="transition-delay: 0.3s;">
n-all duration-300 group hover:-translate-y-0.5 hover:shadow-lg" style="transition-delay: 0.3s;">
                                <i data-lucide="message-circle" class="social-icon w-6 h-6 mr-4 text-accent dark:text-dark-accent transition-transform" aria-hidden="true"></i>
                                <span class="font-medium font-body">WhatsApp</span>
                                <i data-lucide="arrow-right" class="ml-auto h-5 w-5 text-secondary-text dark:text-dark-secondary-text group-hover:text-accent dark:group-hover:text-dark-accent group-hover:translate-x-1 transition-transform" aria-hidden="true"></i>
                            </a>
                            <a id="whatsapp-direct-link" href="#" target="_blank" rel="noopener noreferrer" class="mt-6 inline-block text-sm text-accent dark:text-dark-accent hover:underline reveal-hidden font-body interactive-element focus:outline-none focus:ring-1 focus:ring-accent dark:focus:ring-dark-accent rounded" data-reveal-delay="400">
                                👋🏽 Message me directly on WhatsApp
                            </a>
                        </div>
                         <div class="mt-10 reveal-hidden" data-reveal-delay="300">
                            <h3 class="text-xl font-semibold mb-4 text-primary-text dark:text-dark-primary-text font-heading">Find Me Here</h3>
                             <div class="aspect-w-16 aspect-h-9 rounded-lg overflow-hidden shadow-md border border-secondary-text/10 dark:border-dark-secondary-text/20">
                                <iframe
                                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3988.790618214888!2d36.78901261475408!3d-1.302246999051988!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x182f1a6bfd7f3d7f%3A0x7f4e9b0a5f9f0e5!2sMbagathi%20Way%2C%20Nairobi!5e0!3m2!1sen!2ske!4v1678886000000!5m2!1sen!2ske"
                                    width="100%"
                                    height="300"
                                    allowfullscreen=""
                                    title="Google Map Location near Mbagathi Way"
                                    class="border-0">
                                </iframe>
                                </div>
                            <p class="text-xs text-center mt-2 text-secondary-text dark:text-dark-secondary-text font-body">
                                Near Mbagathi Way, Nairobi, Kenya (Approx. Location)
                            </p>
                        </div>
                    </div>
                    <div class="reveal-slide-right">
                         <h3 class="text-2xl font-semibold mb-6 text-primary-text dark:text-dark-primary-text font-heading">Send a Message</h3>
                         <iframe
                            id="tally-contact-form"
                            data-tally-src="https://tally.so/embed/mR2xJd?alignLeft=1&hideTitle=1&transparentBackground=1&dynamicHeight=1"
                            width="100%"
                            height="410" /* Initial height, JS will adjust */
                            frameborder="0"
                            marginheight="0"
                            marginwidth="0"
                            title="Contact Form"
                            class="rounded-lg border border-secondary-text/20 dark:border-dark-secondary-text/30 shadow-md">
                        </iframe>
                         <p id="tally-fallback" class="hidden text-center text-red-coral p-4 border border-red-coral rounded-lg mt-4">Contact form could not be loaded. Please try again later or use another contact method.</p>
                        <p class="text-xs text-center mt-4 text-secondary-text dark:text-dark-secondary-text font-body">
                            Alternatively, use the form above or connect via the links on the left.
                        </p>
                    </div>
                </div>
                 <div class="text-center mt-16 reveal-hidden">
                    <a href="contact.html" class="know-more-button group interactive-element">
                        Get In Touch
                        <i data-lucide="arrow-right" aria-hidden="true"></i>
                    </a>
                </div>
            </section>
        </main>

        <footer class="bg-secondary-bg/10 dark:bg-dark-secondary-bg text-secondary-text dark:text-dark-secondary-text py-6 px-4 md:px-8 text-center text-sm reveal-hidden opacity-0 border-t border-secondary-text/10 dark:border-dark-secondary-text/10 font-body">
             © <span id="currentYear"></span> Daniel Wanjala. All rights reserved. | Predicting Progress. Designing Resilience.
        </footer>

        <div id="projectModal" class="fixed inset-0 bg-black/80 dark:bg-jet-black/90 backdrop-blur-lg flex items-center justify-center p-4 hidden-modal" role="dialog" aria-modal="true" aria-labelledby="projectModalTitle">
            <div id="projectModalContentWrapper" class="bg-glass-light dark:bg-glass-darker backdrop-blur-lg text-primary-text dark:text-dark-primary-text rounded-xl shadow-2xl overflow-hidden max-w-3xl w-full border border-secondary-text/10 dark:border-dark-secondary-text/20">
                 <div id="projectModalContent" class="flex flex-col h-full">
                     </div>
            </div>
        </div>

        <div id="copy-toast" role="status" aria-live="polite">✅ Copied!</div>

        <a id="floating-whatsapp" href="#" target="_blank" rel="noopener noreferrer" aria-label="Chat on WhatsApp" class="interactive-element p-3 rounded-full bg-whatsapp-green text-white shadow-lg hover:bg-whatsapp-green/90">
             <i data-lucide="message-circle" class="h-6 w-6" aria-hidden="true"></i>
        </a>

        <button id="back-to-top" aria-label="Back to Top" class="interactive-element p-3 rounded-full bg-accent dark:bg-dark-accent text-white dark:text-jet-black shadow-lg hover:bg-accent-secondary dark:hover:bg-dark-accent-secondary transition-all duration-300">
            <i data-lucide="arrow-up" class="h-5 w-5" aria-hidden="true"></i>
        </button>

        <div id="ai-thought-bubble" class="fixed top-24 right-4 w-64 h-64 pointer-events-none z-30 opacity-0 transition-opacity duration-500">
            <canvas id="neural-network" class="w-full h-full"></canvas>
            <div id="thought-content" class="absolute bottom-full right-0 mb-2 p-3 bg-glass-light dark:bg-glass-dark backdrop-blur-lg rounded-lg border border-accent/20 dark:border-dark-accent/20 text-xs font-mono max-w-[200px] opacity-0 transform translate-y-2 transition-all duration-300">
                <div class="flex items-center gap-2 mb-1">
                    <div class="animate-pulse w-2 h-2 rounded-full bg-accent dark:bg-dark-accent"></div>
                    <span class="text-accent dark:text-dark-accent">AI Processing...</span>
                </div>
                <p class="text-secondary-text dark:text-dark-secondary-text leading-relaxed"></p>
            </div>
        </div>

        <div id="floating-music-player" class="fixed z-40 transition-all duration-1000 ease-in-out transform hover:scale-105" style="top: 50%; right: 2rem;">
            <button id="music-toggle" class="interactive-element flex items-center gap-2 px-4 py-2 bg-glass-light dark:bg-glass-dark backdrop-blur-lg rounded-full border border-accent/20 dark:border-dark-accent/20 text-accent dark:text-dark-accent shadow-lg hover:shadow-xl transition-all duration-300 group">
                <div class="flex items-end h-5 gap-[2px]">
                    <div class="equalizer-bar"></div>
                    <div class="equalizer-bar"></div>
                    <div class="equalizer-bar"></div>
                    <div class="equalizer-bar"></div>
                </div>
                <span class="text-sm font-medium">Ambient Vibes</span>
            </button>
            
            <div id="spotify-player" class="absolute right-full top-0 mr-4 w-80 rounded-lg shadow-2xl opacity-0 pointer-events-none transform translate-x-4 transition-all duration-300">
                <div class="relative bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-accent/20 dark:border-dark-accent/20 rounded-lg p-3">
                    <button id="close-player" aria-label="Close music player" class="absolute -top-2 -right-2 p-1 bg-accent dark:bg-dark-accent text-white dark:text-jet-black rounded-full shadow-lg hover:scale-110 transition-transform duration-200 z-10">
                        <i data-lucide="x" class="w-4 h-4" aria-hidden="true"></i>
                    </button>
                    <div class="flex gap-2 mb-2">
                        <button id="playlist-1" class="px-3 py-1 rounded-full text-xs font-medium bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent hover:bg-accent/20 dark:hover:bg-dark-accent/20 transition-colors">Coding</button>
                        <button id="playlist-2" class="px-3 py-1 rounded-full text-xs font-medium bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent hover:bg-accent/20 dark:hover:bg-dark-accent/20 transition-colors">Ambient</button>
                    </div>
                    <div id="playlist-container" class="relative">
                        <iframe id="coding-playlist"
                            title="Spotify Embed: Coding Playlist"
                            src="https://open.spotify.com/embed/playlist/15hwbVhuzHziWcRl2bamTo?utm_source=generator&theme=0"
                            width="100%"
                            height="352"
                            frameborder="0"
                            allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
                            
                            class="rounded-lg transition-opacity duration-300">
                        </iframe>
                        <iframe id="ambient-playlist"
                            title="Spotify Embed: Ambient Playlist"
                            src="https://open.spotify.com/embed/playlist/6mg2L5TF0ttmDbHsHgv2Ir?utm_source=generator&theme=0"
                            width="100%"
                            height="352"
                            frameborder="0"
                            allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
                            
                            class="rounded-lg absolute inset-0 opacity-0 pointer-events-none transition-opacity duration-300">
                        </iframe>
                    </div>
                </div>
            </div>
        </div>

        <!-- Add interactive music visualizer -->
        <div class="mt-8 mb-12 bg-glass-light dark:bg-glass-dark backdrop-blur-lg rounded-xl p-6 overflow-hidden reveal-hidden">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-xl font-semibold text-primary-text dark:text-dark-primary-text font-heading">Music Visualizer</h3>
                <button id="toggle-visualizer" class="px-4 py-2 rounded-full bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent text-sm font-medium hover:bg-accent/20 dark:hover:bg-dark-accent/20 transition-colors">
                    Toggle Animation
                </button>
            </div>
            <canvas id="music-visualizer" class="w-full h-32 rounded-lg"></canvas>
        </div>

        <!-- Add interactive mood selector -->
        <div class="mb-8 bg-glass-light dark:bg-glass-dark backdrop-blur-lg rounded-xl p-6 reveal-hidden">
            <h3 class="text-xl font-semibold text-primary-text dark:text-dark-primary-text font-heading mb-4">Coding Mood Selector</h3>
            <div class="flex flex-wrap gap-3" id="mood-selector">
                <button class="mood-btn px-4 py-2 rounded-full bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent text-sm font-medium hover:bg-accent/20 dark:hover:bg-dark-accent/20 transition-all hover:scale-105" data-mood="focus">
                    🎯 Deep Focus
                </button>
                <button class="mood-btn px-4 py-2 rounded-full bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent text-sm font-medium hover:bg-accent/20 dark:hover:bg-dark-accent/20 transition-all hover:scale-105" data-mood="energy">
                    ⚡ High Energy
                </button>
                <button class="mood-btn px-4 py-2 rounded-full bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent text-sm font-medium hover:bg-accent/20 dark:hover:bg-dark-accent/20 transition-all hover:scale-105" data-mood="chill">
                    🌊 Chill Vibes
                </button>
                <button class="mood-btn px-4 py-2 rounded-full bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent text-sm font-medium hover:bg-accent/20 dark:hover:bg-dark-accent/20 transition-all hover:scale-105" data-mood="debug">
                    🐛 Debug Mode
                </button>
            </div>
        </div>

        <!-- Add after the music section title -->
        <div class="max-w-4xl mx-auto mb-12">
            <!-- Spotify Connect Button -->
            <div class="text-center mb-8">
                <button onclick="connectToSpotify()" class="interactive-element px-6 py-3 bg-[#1DB954] hover:bg-[#1ed760] text-white rounded-full font-medium flex items-center justify-center gap-2 mx-auto transition-all duration-300 hover:scale-105">
                    <svg class="w-6 h-6" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.371-.721.49-1.101.24-3.021-1.85-6.821-2.27-11.292-1.24-.421.09-.842-.18-.932-.6-.09-.42.18-.84.601-.93 4.891-1.119 9.092-.62 12.452 1.42.431.249.55.729.301 1.1zm1.471-3.279c-.301.459-.921.62-1.381.32-3.452-2.13-8.723-2.76-12.804-1.51-.501.15-1.021-.15-1.171-.65-.15-.502.15-1.022.65-1.172 4.672-1.42 10.453-.721 14.435 1.77.46.301.619.92.319 1.38zm.129-3.34c-4.142-2.459-10.983-2.689-14.934-1.489-.601.18-1.231-.18-1.411-.779-.18-.601.18-1.231.78-1.411 4.562-1.38 12.133-1.111 16.894 1.729.57.34.749 1.08.409 1.65-.341.57-1.081.75-1.651.41z"/>
                    </svg>
                    Connect with Spotify
                </button>
            </div>

            <!-- Mood Grid -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4" id="mood-selector">
                <button class="mood-btn group" data-playlist="37i9dQZF1DX5trt9i14X7j">
                    <div class="relative overflow-hidden rounded-xl bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-accent/20 dark:border-dark-accent/20 p-6 transition-all duration-300 hover:border-accent dark:hover:border-dark-accent hover:shadow-lg group-hover:scale-105">
                        <div class="absolute inset-0 bg-gradient-to-br from-accent/10 to-accent-secondary/10 dark:from-dark-accent/10 dark:to-dark-accent-secondary/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        <div class="relative z-10">
                            <span class="text-3xl mb-3 block">🎯</span>
                            <h4 class="text-lg font-semibold text-primary-text dark:text-dark-primary-text mb-1">Deep Focus</h4>
                            <p class="text-sm text-secondary-text dark:text-dark-secondary-text">For intense coding sessions</p>
                        </div>
                    </div>
                </button>

                <button class="mood-btn group" data-playlist="37i9dQZF1DX8dTWjpijlub">
                    <div class="relative overflow-hidden rounded-xl bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-accent/20 dark:border-dark-accent/20 p-6 transition-all duration-300 hover:border-accent dark:hover:border-dark-accent hover:shadow-lg group-hover:scale-105">
                        <div class="absolute inset-0 bg-gradient-to-br from-accent/10 to-accent-secondary/10 dark:from-dark-accent/10 dark:to-dark-accent-secondary/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        <div class="relative z-10">
                            <span class="text-3xl mb-3 block">⚡</span>
                            <h4 class="text-lg font-semibold text-primary-text dark:text-dark-primary-text mb-1">High Energy</h4>
                            <p class="text-sm text-secondary-text dark:text-dark-secondary-text">Maximum productivity</p>
                        </div>
                    </div>
                </button>

                <button class="mood-btn group" data-playlist="37i9dQZF1DX0jgyAiPl8Af">
                    <div class="relative overflow-hidden rounded-xl bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-accent/20 dark:border-dark-accent/20 p-6 transition-all duration-300 hover:border-accent dark:hover:border-dark-accent hover:shadow-lg group-hover:scale-105">
                        <div class="absolute inset-0 bg-gradient-to-br from-accent/10 to-accent-secondary/10 dark:from-dark-accent/10 dark:to-dark-accent-secondary/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        <div class="relative z-10">
                            <span class="text-3xl mb-3 block">🌊</span>
                            <h4 class="text-lg font-semibold text-primary-text dark:text-dark-primary-text mb-1">Chill Vibes</h4>
                            <p class="text-sm text-secondary-text dark:text-dark-secondary-text">Relaxed coding flow</p>
                        </div>
                    </div>
                </button>

                <button class="mood-btn group" data-playlist="37i9dQZF1DX5trt9i14X7j">
                    <div class="relative overflow-hidden rounded-xl bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-accent/20 dark:border-dark-accent/20 p-6 transition-all duration-300 hover:border-accent dark:hover:border-dark-accent hover:shadow-lg group-hover:scale-105">
                        <div class="absolute inset-0 bg-gradient-to-br from-accent/10 to-accent-secondary/10 dark:from-dark-accent/10 dark:to-dark-accent-secondary/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        <div class="relative z-10">
                            <span class="text-3xl mb-3 block">🐛</span>
                            <h4 class="text-lg font-semibold text-primary-text dark:text-dark-primary-text mb-1">Debug Mode</h4>
                            <p class="text-sm text-secondary-text dark:text-dark-secondary-text">Problem solving time</p>
                        </div>
                    </div>
                </button>
            </div>
        </div>

        <!-- Add after the mood selector -->
        <div class="mt-8 bg-glass-light dark:bg-glass-dark backdrop-blur-lg rounded-xl p-6 border border-accent/20 dark:border-dark-accent/20">
            <div class="flex items-center gap-4">
                <div id="now-playing-art" class="w-16 h-16 rounded-lg bg-accent/10 dark:bg-dark-accent/10 flex items-center justify-center">
                    <svg class="w-8 h-8 text-accent dark:text-dark-accent" viewBox="0 0 24 24">
                        <path fill="currentColor" d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/>
                    </svg>
                </div>
                <div class="flex-1">
                    <h4 id="now-playing-title" class="text-lg font-semibold text-primary-text dark:text-dark-primary-text">Not Playing</h4>
                    <p id="now-playing-artist" class="text-secondary-text dark:text-dark-secondary-text">Connect to Spotify to start</p>
                </div>
                <div class="flex items-center gap-2">
                    <button id="play-pause" aria-label="Play or Pause music" class="p-3 rounded-full bg-accent dark:bg-dark-accent text-white dark:text-jet-black hover:scale-110 transition-transform duration-300">
                        <svg class="w-6 h-6" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M8 5v14l11-7z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div> <script defer>
        /**
         * Main JavaScript for Daniel Wanjala's Portfolio
         * Handles interactivity, animations, theme switching, modals, etc.
         * Includes Particle Background and Skill Constellation animations.
         */
        document.addEventListener('DOMContentLoaded', () => {
            // --- Initialize Lucide Icons ---
            try {
                if (typeof lucide !== 'undefined') {
                    lucide.createIcons();
                } else {
                    console.warn('Lucide icons library not loaded yet.');
                }
            } catch (e) {
                console.error('Error creating Lucide icons:', e);
            }


            // --- Constants and State ---
            const name = "Daniel Wanjala"; // Used potentially elsewhere

            // Project data (ensure paths are correct)
            // Added placeholder image URLs for robustness
            const projectsData = [
              { id: 1, title: "GDP Growth Prediction Model", description: "Developed a machine learning model...", tags: ["Finance", "AI", "Python"], imageUrl: "assets/project1_main.png", altImageUrl: "assets/project1_alt.png", placeholderUrl: "https://placehold.co/600x400/0B0C10/F7F7F7?text=GDP+Model", problem: "Needed a reliable way to forecast...", dataUsed: "Exchange rates, inflation rates...", results: "Provided insights for policymakers...", techStack: ["Python", "Scikit-learn", "Pandas"], githubUrl: "https://github.com/MadScie254/Phase-3-Project-Modelling", liveDemoUrl: null, accentColor: "blue-500" },
              { id: 2, title: "AI-Driven Plant Disease Detection", description: "Collaboratively developed an advanced system...", tags: ["Health", "AI", "CV"], imageUrl: "assets/project2_main.png", altImageUrl: "assets/project2_alt.png", placeholderUrl: "https://placehold.co/600x400/2ECC71/F7F7F7?text=Plant+AI", problem: "Early and accurate detection is crucial...", dataUsed: "Image datasets of plants...", results: "Enhanced early detection...", techStack: ["Python", "TensorFlow", "OpenCV"], githubUrl: "https://github.com/MadScie254/Capstone-Lazarus", liveDemoUrl: null, accentColor: "emerald-green" },
              { id: 3, title: "Kenya's GDP Forecasting Tool", description: "Developed a forecasting tool...", tags: ["Finance", "TimeSeries", "Python"], imageUrl: "assets/project3_main.png", altImageUrl: "assets/project3_alt.png", placeholderUrl: "https://placehold.co/600x400/FF6B6B/F7F7F7?text=Kenya+GDP", problem: "Stakeholders needed fact-based analysis...", dataUsed: "Time-series data, economic indicators...", results: "Aided in strategic planning...", techStack: ["Python", "Statsmodels", "Pandas"], githubUrl: "https://github.com/MadScie254/GDP-Forecast-Sample", liveDemoUrl: null, accentColor: "red-coral" },
              { id: 4, title: "InvestWise Predictor", description: "Intelligent online tool using neural networks...", tags: ["Finance", "AI", "Web"], imageUrl: "assets/project4_main.png", altImageUrl: "assets/project4_alt.png", placeholderUrl: "https://placehold.co/600x400/6C5CE7/F7F7F7?text=InvestWise", problem: "Investors needed data-driven guidance...", dataUsed: "Economic indicators, trade data...", results: "Assisted investors in making informed decisions...", techStack: ["Python", "TensorFlow", "Flask (implied)"], githubUrl: "https://github.com/MadScie254/InvestWise-Predictor-Project", liveDemoUrl: null, accentColor: "tech-purple" },
              { id: 5, title: "Netflix Stock Profit Analysis", description: "Analyzed Netflix's stock performance...", tags: ["Finance", "Analysis", "Python"], imageUrl: "assets/project5_main.png", altImageUrl: "assets/project5_alt.png", placeholderUrl: "https://placehold.co/600x400/E0C097/0B0C10?text=Netflix+Stock", problem: "Understanding historical performance...", dataUsed: "Historical Netflix stock data.", results: "Provided insights into profitability...", techStack: ["Python", "Pandas", "Matplotlib"], githubUrl: "https://github.com/MadScie254/Netflix-Analysis", liveDemoUrl: null, accentColor: "sandstone" }
            ];

            // Configuration
            const whatsappBaseUrl = "https://wa.me/254742007277"; // Your WhatsApp number
            const whatsappMessage = "Hello Daniel, I visited your portfolio and would like to connect.";
            const particleInteractionRadius = 120; // Radius for mouse interaction with particles
            const particleLineThreshold = 110; // Max distance for connecting lines between particles
            const scrollRevealThreshold = 0.1; // Percentage of element visible to trigger animation
            const scrollRevealRootMargin = "0px 0px -50px 0px"; // Adjust trigger point relative to viewport
            const navScrollThreshold = 0; // Threshold for nav highlighting
            const navScrollRootMargin = "-20% 0px -70% 0px"; // Active area for nav highlighting
            const skillConstellationNodeRadius = 4;
            const skillConstellationInteractionRadius = 80;
            const skillConstellationLineThreshold = 150;

            // State Variables
            let toneJsStarted = false;
            let synth, clickSynth;
            let particleAnimationId = null; // ID for particle animation frame
            let skillConstellationAnimationId = null; // ID for skill constellation animation
            let mouse = { x: null, y: null }; // Mouse position relative to window
            let constellationMouse = { x: null, y: null }; // Mouse position relative to skill canvas
            let isScrolling; // Timer for scroll end detection
            let currentActiveSectionId = null; // Track active navigation section
            let toastTimeout; // Timer for copy toast
            let modalOpen = false; // Track if modal is open
            let previouslyFocusedElement = null; // For modal focus management
            let skillConstellationVisible = false; // Track if skill canvas is in view

            // --- DOM Element References ---
            // Cache frequently accessed DOM elements
            const htmlEl = document.documentElement;
            const bodyEl = document.body;
            const preloader = document.getElementById('preloader');
            const mainHeader = document.getElementById('main-header');
            const themeToggleButton = document.getElementById('theme-toggle');
            const themeIconSun = document.getElementById('theme-icon-sun');
            const themeIconMoon = document.getElementById('theme-icon-moon');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const menuIconOpen = document.getElementById('menu-icon-open');
            const menuIconClose = document.getElementById('menu-icon-close');
            const rotatingWordEl = document.getElementById('rotating-word');
            const projectCards = document.querySelectorAll('.project-card');
            const projectModal = document.getElementById('projectModal');
            const projectModalContent = document.getElementById('projectModalContent');
            const projectModalContentWrapper = document.getElementById('projectModalContentWrapper');
            const currentYearEl = document.getElementById('currentYear');
            const scrollProgressBar = document.getElementById('scrollProgressBar');
            const navLinks = document.querySelectorAll('#desktop-nav .nav-link');
            const mobileNavLinks = document.querySelectorAll('#mobile-menu .mobile-nav-link');
            const sections = document.querySelectorAll('main section[id]'); // Sections for nav highlighting
            const whatsappLink = document.getElementById('whatsapp-link');
            const whatsappDirectLink = document.getElementById('whatsapp-direct-link');
            const floatingWhatsappLink = document.getElementById('floating-whatsapp');
            const copyButtons = document.querySelectorAll('.copy-btn');
            const copyToast = document.getElementById('copy-toast');
            const mainContentContainer = document.getElementById('main-content-container');
            const particleCanvas = document.getElementById('particle-canvas');
            const skillConstellationCanvas = document.getElementById('skill-constellation-canvas'); // New Canvas
            const backToTopButton = document.getElementById('back-to-top');
            const interactiveElements = document.querySelectorAll('a[href], button, [role="button"], [role="link"], .project-card, .essay-card, .demo-card, #theme-toggle, .publication-card, .skill-card, .education-item, #back-to-top, .copy-btn, #floating-whatsapp');


            // --- Initial Setup Functions ---

            /** Hides the preloader after a delay when the window loads. */
            function hidePreloader() {
                 window.addEventListener('load', () => {
                     setTimeout(() => {
                        if (preloader) preloader.classList.add('hidden');
                     }, 500);
                 }, { once: true });
            }

            /** Updates all WhatsApp links with the pre-defined message. */
            function setupWhatsAppLinks() {
                const encodedMessage = encodeURIComponent(whatsappMessage);
                const whatsappUrlWithMessage = `${whatsappBaseUrl}?text=${encodedMessage}`;
                if (whatsappLink) whatsappLink.href = whatsappUrlWithMessage;
                if (whatsappDirectLink) whatsappDirectLink.href = whatsappUrlWithMessage;
                if (floatingWhatsappLink) floatingWhatsappLink.href = whatsappUrlWithMessage;
            }

            /** Initializes Tone.js for audio feedback on first user interaction. */
            function setupToneJS() {
                const startTone = () => {
                    if (toneJsStarted || typeof Tone === 'undefined') return;
                    try {
                        Tone.start();
                        synth = new Tone.Synth({ oscillator: { type: 'sine' }, envelope: { attack: 0.005, decay: 0.1, sustain: 0.1, release: 0.1 }, volume: -25 }).toDestination();
                        clickSynth = new Tone.Synth({ oscillator: { type: 'triangle' }, envelope: { attack: 0.001, decay: 0.1, sustain: 0.05, release: 0.1 }, volume: -20 }).toDestination();
                        toneJsStarted = true;
                        console.log("Tone.js AudioContext started.");
                        ['click', 'keydown', 'touchstart'].forEach(evt =>
                            bodyEl.removeEventListener(evt, startTone)
                        );
                    } catch (e) {
                        console.error("Tone.js initialization failed:", e);
                        toneJsStarted = false;
                    }
                };
                ['click', 'keydown', 'touchstart'].forEach(evt =>
                    bodyEl.addEventListener(evt, startTone, { once: true, passive: true })
                );
            }

            /** Adds sound feedback listeners to interactive elements. */
            function addSoundFeedback() {
                interactiveElements.forEach(el => {
                     el.addEventListener('mouseenter', () => {
                        if (toneJsStarted && synth) {
                            try { synth.triggerAttackRelease('C5', '16n', Tone.now()); } catch(e) { /* Silenced */ }
                        }
                    });
                     el.addEventListener('click', () => {
                        if (toneJsStarted && clickSynth) {
                             try { clickSynth.triggerAttackRelease('E4', '16n', Tone.now()); } catch(e) { /* Silenced */ }
                        }
                    });
                });
            }

            /** Sets the initial footer year. */
            function setFooterYear() {
                 if (currentYearEl) currentYearEl.textContent = new Date().getFullYear();
            }

            // --- Core Functionality ---

            /** Updates the UI (icons, background noise, canvas colors) based on the current theme. */
            function updateThemeUI() {
                if (!htmlEl || !bodyEl) return;
                const isDark = htmlEl.classList.contains('dark');

                // Toggle theme icons
                if (themeIconSun && themeIconMoon) {
                    themeIconSun.classList.toggle('hidden', !isDark);
                    themeIconMoon.classList.toggle('hidden', isDark);
                    try { lucide.createIcons(); } catch(e) { console.error("Error re-rendering Lucide icons on theme change:", e); }
                }

                // Apply appropriate background noise pattern
                const noiseLight = "url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4' viewBox='0 0 4 4'%3E%3Cpath fill='%239C92AC' fill-opacity='0.10' d='M1 3h1v1H1V3zm2-2h1v1H3V1z'%3E%3C/path%3E%3C/svg%3E\")";
                const noiseDark = "url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4' viewBox='0 0 4 4'%3E%3Cpath fill='%23C5C6C7' fill-opacity='0.05' d='M1 3h1v1H1V3zm2-2h1v1H3V1z'%3E%3C/path%3E%3C/svg%3E\")";
                bodyEl.style.backgroundImage = isDark ? noiseDark : noiseLight;

                // Re-initialize particles if canvas exists
                if (particleCanvas) initParticles();
                // Re-initialize skill constellation if canvas exists
                if (skillConstellationCanvas) initSkillConstellation();
            }

            /** Sets the theme (light/dark), updates localStorage, and triggers UI/sound updates. */
            function setTheme(theme) {
                if (!htmlEl) return;
                htmlEl.classList.toggle('dark', theme === 'dark');
                localStorage.setItem('theme', theme);
                updateThemeUI(); // Update icons, background, and canvases

                if (toneJsStarted && clickSynth) {
                     try { clickSynth.triggerAttackRelease(theme === 'dark' ? 'C3' : 'G3', '8n', Tone.now()); } catch(e) { /* Silenced */ }
                }
            }

            /** Toggles the mobile navigation menu visibility and updates ARIA attributes. */
            function toggleMobileMenu() {
                 if (!mobileMenuButton || !mobileMenu || !menuIconOpen || !menuIconClose) return;
                 const isExpanded = mobileMenuButton.getAttribute('aria-expanded') === 'true';
                 mobileMenuButton.setAttribute('aria-expanded', !isExpanded);
                 mobileMenu.classList.toggle('open');
                 menuIconOpen.classList.toggle('hidden');
                 menuIconClose.classList.toggle('hidden');
            }

            /** Closes the mobile menu (used when a link is clicked). */
            function closeMobileMenu() {
                if (!mobileMenuButton || !mobileMenu || !menuIconOpen || !menuIconClose) return;
                if (mobileMenuButton.getAttribute('aria-expanded') === 'true') {
                    mobileMenuButton.setAttribute('aria-expanded', 'false');
                    mobileMenu.classList.remove('open');
                    menuIconOpen.classList.remove('hidden');
                    menuIconClose.classList.add('hidden');
                }
            }

            /** Animates the rotating word in the hero section. */
            function setupHeroWordRotation() {
                 const words = ["forecast", "heal", "accelerate", "optimize", "innovate", "analyze", "deploy"];
                 let wordIndex = 0;
                 if (rotatingWordEl) {
                     rotatingWordEl.style.transition = 'opacity 0.3s ease-in-out, transform 0.3s ease-in-out';
                     setInterval(() => {
                         wordIndex = (wordIndex + 1) % words.length;
                         rotatingWordEl.style.opacity = '0';
                         rotatingWordEl.style.transform = 'translateY(10px)';
                         setTimeout(() => {
                             rotatingWordEl.textContent = words[wordIndex];
                             rotatingWordEl.style.opacity = '1';
                             rotatingWordEl.style.transform = 'translateY(0)';
                         }, 300);
                     }, 3000);
                 }
            }

            /** Adds hover effect to swap project card images. */
            function setupProjectCardImageSwap() {
                projectCards.forEach(card => {
                     const img = card.querySelector('.project-image');
                    if (img) {
                        const originalSrc = img.getAttribute('data-original-src');
                        const altSrc = img.getAttribute('data-alt-src');
                        if (originalSrc && originalSrc !== 'null' && altSrc && altSrc !== 'null') {
                            card.addEventListener('mouseenter', () => { img.src = altSrc; });
                            card.addEventListener('mouseleave', () => { img.src = originalSrc; });
                        }
                    }
                });
            }

            /** Fetches GitHub repository stats using the public API. */
            async function fetchGitHubStats(githubUrl, statsContentEl, buttonEl) {
                if (!githubUrl || !statsContentEl || !buttonEl) return;

                buttonEl.textContent = 'Loading...';
                buttonEl.disabled = true;
                statsContentEl.classList.remove('hidden');
                statsContentEl.innerHTML = `<p class="text-sm text-secondary-text dark:text-dark-secondary-text">Fetching stats...</p>`;

                try {
                    const url = new URL(githubUrl);
                    const pathParts = url.pathname.split('/').filter(Boolean);
                    if (pathParts.length < 2) throw new Error("Invalid GitHub URL path");
                    const owner = pathParts[0];
                    const repo = pathParts[1];
                    const apiUrl = `https://api.github.com/repos/${owner}/${repo}`;

                    const response = await fetch(apiUrl);
                    if (!response.ok) {
                        if (response.status === 403) throw new Error(`API rate limit exceeded`);
                        else if (response.status === 404) throw new Error(`Repository not found`);
                        else throw new Error(`HTTP error! Status: ${response.status}`);
                    }
                    const data = await response.json();

                    statsContentEl.innerHTML = `
                        <span class="inline-flex items-center mr-4"><i data-lucide="star" class="w-4 h-4 mr-1 text-yellow-500" aria-hidden="true"></i> ${data.stargazers_count ?? 'N/A'} Stars</span>
                        <span class="inline-flex items-center mr-4"><i data-lucide="git-fork" class="w-4 h-4 mr-1 text-secondary-text dark:text-dark-secondary-text" aria-hidden="true"></i> ${data.forks_count ?? 'N/A'} Forks</span>
                        <span class="inline-flex items-center"><i data-lucide="eye" class="w-4 h-4 mr-1 text-blue-500" aria-hidden="true"></i> ${data.watchers_count ?? 'N/A'} Watchers</span>
                    `;
                    lucide.createIcons();
                    buttonEl.classList.add('hidden');

                } catch (error) {
                    console.error("Error fetching GitHub stats:", error);
                    statsContentEl.innerHTML = `<p class="text-red-coral text-sm">Could not load stats: ${error.message}.</p>`;
                    buttonEl.textContent = 'Retry Stats';
                    buttonEl.disabled = false;
                }
            }



             /** Opens the project modal with details for the given project ID. */
            function openModal(projectId) {
                const project = projectsData.find(p => p.id === parseInt(projectId));
                if (!project || !projectModalContent || !projectModal || !projectModalContentWrapper) return;

                previouslyFocusedElement = document.activeElement;

                const techStackHtml = project.techStack?.map(tech => `<span class="text-xs bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent px-2 py-1 rounded-full font-mono">${tech}</span>`).join(' ') || 'N/A';
                const githubButton = project.githubUrl ? `<a href="${project.githubUrl}" target="_blank" rel="noopener noreferrer" class="interactive-element inline-flex items-center px-4 py-2 bg-secondary-text dark:bg-dark-accent-secondary text-primary-bg dark:text-jet-black rounded-lg hover:opacity-80 transition-opacity duration-200 font-medium shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent dark:focus:ring-dark-accent"> <i data-lucide="github" class="mr-2 h-4 w-4" aria-hidden="true"></i> GitHub </a>` : '';
                const demoButton = project.liveDemoUrl ? `<a href="${project.liveDemoUrl}" target="_blank" rel="noopener noreferrer" class="interactive-element inline-flex items-center px-4 py-2 bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary text-white dark:text-jet-black rounded-lg hover:opacity-80 transition-opacity duration-200 font-medium shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent dark:focus:ring-dark-accent"> <i data-lucide="code" class="mr-2 h-4 w-4" aria-hidden="true"></i> Live Demo </a>` : '';
                const modalImageUrl = project.altImageUrl && project.altImageUrl !== 'null' ? project.altImageUrl : (project.imageUrl && project.imageUrl !== 'null' ? project.imageUrl : project.placeholderUrl);

                projectModalContent.innerHTML = `
                    <div class="relative flex-shrink-0">
                       <img src="${modalImageUrl}" alt="${project.title}" class="w-full h-48 sm:h-64 object-cover" loading="lazy" onerror="this.onerror=null;this.src='${project.placeholderUrl}'">
                       <button id="closeModalButton" class="interactive-element absolute top-3 right-3 text-primary-text dark:text-dark-primary-text bg-primary-bg/60 dark:bg-dark-primary-bg/60 rounded-full p-2 hover:bg-accent/20 dark:hover:bg-dark-accent/20 transition-colors duration-200 z-10 focus:outline-none focus:ring-2 focus:ring-accent dark:focus:ring-dark-accent" aria-label="Close project details">
                         <i data-lucide="x" class="h-5 w-5" aria-hidden="true"></i>
                       </button>
                       <div class="absolute bottom-0 left-0 h-1.5 w-full bg-gradient-to-r from-${project.accentColor || 'accent'} to-${project.accentColor ? project.accentColor.replace('-500','-400') : 'accent-secondary'}" aria-hidden="true"></div>
                    </div>
                    <div class="p-6 md:p-8 overflow-y-auto flex-grow">
                      <h2 id="projectModalTitle" class="text-2xl md:text-3xl font-bold mb-4 bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent font-heading">${project.title}</h2>
                      <div>
                        <h4 class="font-semibold text-lg mb-1 text-accent dark:text-dark-accent font-heading">Problem Statement</h4>
                        <p class="mb-4 text-secondary-text dark:text-dark-secondary-text font-body">${project.problem || 'Details not available.'}</p>
                        <h4 class="font-semibold text-lg mb-1 text-accent dark:text-dark-accent font-heading">Data Used</h4>
                        <p class="mb-4 text-secondary-text dark:text-dark-secondary-text font-body">${project.dataUsed || 'Details not available.'}</p>
                        <h4 class="font-semibold text-lg mb-1 text-accent dark:text-dark-accent font-heading">Results</h4>
                        <p class="mb-4 text-secondary-text dark:text-dark-secondary-text font-body">${project.results || 'Details not available.'}</p>
                        <h4 class="font-semibold text-lg mb-2 text-accent dark:text-dark-accent font-heading">Tech Stack</h4>
                        <div class="flex flex-wrap gap-2 mb-6">${techStackHtml}</div>
                      </div>
                      <div id="github-stats-container" class="mt-6 pt-4 border-t border-secondary-text/10 dark:border-dark-secondary-text/20 ${!project.githubUrl ? 'hidden' : ''}">
                          <button id="fetch-stats-button" class="interactive-element text-sm text-accent dark:text-dark-accent hover:underline mb-2 focus:outline-none focus:ring-1 focus:ring-accent dark:focus:ring-dark-accent rounded group">
                              <span class="inline-flex items-center">
                                  <i data-lucide="git-branch" class="w-4 h-4 mr-2 transition-transform duration-300 group-hover:rotate-45" aria-hidden="true"></i>
                                  Show GitHub Stats
                              </span>
                          </button>
                          <div id="github-stats-content" class="hidden">
                              <div class="bg-glass-light dark:bg-glass-dark backdrop-blur-md rounded-lg p-4 border border-accent/20 dark:border-dark-accent/20 shadow-lg relative overflow-hidden transition-all duration-300 ease-out transform hover:scale-[1.02] hover:shadow-xl">
                                  <!-- Pulsing border effect -->
                                  <div class="absolute inset-0 bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary opacity-0 transition-opacity duration-500 stats-border-pulse"></div>
                                  
                                  <!-- Stats grid -->
                                  <div class="grid grid-cols-3 gap-4">
                                      <!-- Stars -->
                                      <div class="stat-item text-center">
                                          <div class="inline-flex items-center justify-center mb-2 relative group">
                                              <i data-lucide="star" class="w-6 h-6 text-transparent bg-gradient-to-r from-yellow-400 to-yellow-600 bg-clip-text transition-transform duration-300 group-hover:scale-110" aria-hidden="true"></i>
                                          </div>
                                          <div class="font-mono text-lg font-bold bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent stat-value">0</div>
                                          <div class="text-xs text-secondary-text dark:text-dark-secondary-text mt-1">Stars</div>
                                          <div class="h-1 w-full bg-secondary-text/10 dark:bg-dark-secondary-text/10 rounded-full mt-2 overflow-hidden">
                                              <div class="stat-progress h-full w-0 bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary rounded-full transition-all duration-1000"></div>
                                          </div>
                                      </div>
                                      
                                      <!-- Forks -->
                                      <div class="stat-item text-center">
                                          <div class="inline-flex items-center justify-center mb-2 relative group">
                                              <i data-lucide="git-fork" class="w-6 h-6 text-transparent bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text transition-transform duration-300 group-hover:scale-110" aria-hidden="true"></i>
                                          </div>
                                          <div class="font-mono text-lg font-bold bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent stat-value">0</div>
                                          <div class="text-xs text-secondary-text dark:text-dark-secondary-text mt-1">Forks</div>
                                          <div class="h-1 w-full bg-secondary-text/10 dark:bg-dark-secondary-text/10 rounded-full mt-2 overflow-hidden">
                                              <div class="stat-progress h-full w-0 bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary rounded-full transition-all duration-1000"></div>
                                          </div>
                                      </div>
                                      
                                      <!-- Watchers -->
                                      <div class="stat-item text-center">
                                          <div class="inline-flex items-center justify-center mb-2 relative group">
                                              <i data-lucide="eye" class="w-6 h-6 text-transparent bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text transition-transform duration-300 group-hover:scale-110" aria-hidden="true"></i>
                                          </div>
                                          <div class="font-mono text-lg font-bold bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent stat-value">0</div>
                                          <div class="text-xs text-secondary-text dark:text-dark-secondary-text mt-1">Watchers</div>
                                          <div class="h-1 w-full bg-secondary-text/10 dark:bg-dark-secondary-text/10 rounded-full mt-2 overflow-hidden">
                                              <div class="stat-progress h-full w-0 bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary rounded-full transition-all duration-1000"></div>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                              
                              <!-- Error state -->
                              <div id="github-stats-error" class="hidden">
                                  <div class="bg-red-coral/10 border border-red-coral/20 rounded-lg p-4 mt-4 animate-shake">
                                      <p class="text-red-coral text-sm flex items-center">
                                          <i data-lucide="alert-circle" class="w-4 h-4 mr-2" aria-hidden="true"></i>
                                          <span class="error-message">Could not load stats.</span>
                                      </p>
                                      <button class="retry-button mt-2 text-xs text-accent dark:text-dark-accent hover:underline focus:outline-none focus:ring-1 focus:ring-accent dark:focus:ring-dark-accent rounded px-2 py-1 inline-flex items-center">
                                          <i data-lucide="refresh-cw" class="w-3 h-3 mr-1" aria-hidden="true"></i>
                                          Retry
                                      </button>
                                  </div>
                              </div>
                          </div>
                          <p class="text-xs text-secondary-text dark:text-dark-secondary-text mt-2">Note: Stats via public GitHub API. May be rate-limited.</p>
                      </div>
                      <div class="flex flex-wrap gap-4 mt-6">${githubButton}${demoButton}</div>
                    </div>`;

                const closeButton = projectModalContent.querySelector('#closeModalButton');
                if (closeButton) closeButton.addEventListener('click', closeModal);

                const fetchStatsButton = projectModalContent.querySelector('#fetch-stats-button');
                const statsContent = projectModalContent.querySelector('#github-stats-content');
                if (fetchStatsButton && statsContent && project.githubUrl) {
                    fetchStatsButton.addEventListener('click', () => fetchGitHubStats(project.githubUrl, statsContent, fetchStatsButton));
                }

                projectModal.classList.remove('hidden-modal');
                projectModal.classList.add('visible-modal');
                bodyEl.style.overflow = 'hidden';
                modalOpen = true;
                lucide.createIcons();

                projectModalContentWrapper.focus();
                const focusableElements = projectModalContentWrapper.querySelectorAll(
                    'a[href], button:not([disabled]), textarea:not([disabled]), input:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])'
                );
                if (closeButton) closeButton.focus();
                else if (focusableElements[0]) focusableElements[0].focus();

                projectModal.addEventListener('keydown', handleModalKeyDown);

            } // End openModal

            /** Handles keydown events within the modal for focus trapping and closing. */
            function handleModalKeyDown(event) {
                 if (!modalOpen) return;
                 const isTabPressed = event.key === 'Tab';
                 const isEscapePressed = event.key === 'Escape';

                 if (isEscapePressed) { closeModal(); return; }
                 if (!isTabPressed) { return; }

                 const focusableElements = projectModalContentWrapper.querySelectorAll(
                     'a[href], button:not([disabled]), textarea:not([disabled]), input:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])'
                 );
                 const firstElement = focusableElements[0];
                 const lastElement = focusableElements[focusableElements.length - 1];

                 if (event.shiftKey) { // Shift + Tab
                     if (document.activeElement === firstElement) { lastElement.focus(); event.preventDefault(); }
                 } else { // Tab
                     if (document.activeElement === lastElement) { firstElement.focus(); event.preventDefault(); }
                 }
             }

            /** Closes the project modal, restores focus, and cleans up listeners. */
            function closeModal() {
                if (!projectModal || !projectModalContent) return;
                projectModal.classList.add('hidden-modal');
                projectModal.classList.remove('visible-modal');
                bodyEl.style.overflow = '';
                modalOpen = false;
                if (previouslyFocusedElement) { previouslyFocusedElement.focus(); previouslyFocusedElement = null; }
                projectModal.removeEventListener('keydown', handleModalKeyDown);
                setTimeout(() => { projectModalContent.innerHTML = ''; }, 300);
            }

            /** Updates the scroll progress bar and handles header shrinking. */
            function handleScroll() {
                if (!htmlEl || !scrollProgressBar || !mainHeader) return;
                const scrollableHeight = htmlEl.scrollHeight - window.innerHeight;
                const scrolled = window.scrollY;
                const progress = scrollableHeight > 0 ? Math.min(1, scrolled / scrollableHeight) : 0;
                scrollProgressBar.style.transform = `scaleX(${progress})`;
                mainHeader.classList.toggle('scrolled', scrolled > 50);
                if (backToTopButton) backToTopButton.classList.toggle('visible', scrolled > 300);
            }

            /** Sets up the Intersection Observer for scroll reveal animations. */
            function setupScrollReveal() {
                const revealObserverOptions = { threshold: scrollRevealThreshold, rootMargin: scrollRevealRootMargin };
                const revealCallback = (entries, observer) => {
                    entries.forEach((entry, index) => {
                        if (entry.isIntersecting) {
                            const delay = entry.target.dataset.revealDelay ? parseInt(entry.target.dataset.revealDelay) : (index * 100);
                            entry.target.style.transitionDelay = `${delay}ms`;
                            entry.target.classList.add('reveal-visible');
                            if (entry.target.classList.contains('reveal-slide-left') || entry.target.classList.contains('reveal-slide-right')) {
                                entry.target.classList.add('slide-in');
                            }
                            if (entry.target.classList.contains('education-item')) {
                                const icon = entry.target.querySelector('.timeline-icon');
                                if (icon) icon.style.animationDelay = `${delay + 200}ms`;
                            }
                            observer.unobserve(entry.target);
                        }
                    });
                };
                const revealObserver = new IntersectionObserver(revealCallback, revealObserverOptions);
                document.querySelectorAll('.reveal-hidden, .reveal-slide-left, .reveal-slide-right').forEach(el => revealObserver.observe(el));
            }

            /** Sets up the Intersection Observer for highlighting active navigation links. */
            function setupNavHighlighting() {
                const navObserverOptions = { root: null, rootMargin: navScrollRootMargin, threshold: navScrollThreshold };
                 const navObserverCallback = (entries) => {
                    let intersectingSectionId = null;
                    let maxRatio = 0;
                     entries.forEach(entry => {
                         if (entry.isIntersecting && entry.intersectionRatio >= maxRatio) {
                             maxRatio = entry.intersectionRatio;
                             intersectingSectionId = entry.target.getAttribute('id');
                         }
                     });
                     if (!intersectingSectionId && window.scrollY < window.innerHeight * 0.3) intersectingSectionId = 'hero';
                     else if (!intersectingSectionId && currentActiveSectionId) intersectingSectionId = currentActiveSectionId;

                     if (intersectingSectionId && intersectingSectionId !== currentActiveSectionId) {
                        currentActiveSectionId = intersectingSectionId;
                        navLinks.forEach(link => link.classList.toggle('nav-active', link.getAttribute('data-section') === currentActiveSectionId));
                        mobileNavLinks.forEach(link => link.classList.toggle('nav-active', link.getAttribute('data-section') === currentActiveSectionId));
                     }
                };
                const navObserver = new IntersectionObserver(navObserverCallback, navObserverOptions);
                document.querySelectorAll('main section[id], #hero').forEach(section => {
                    if(section) navObserver.observe(section);
                });

                const initialHash = window.location.hash.substring(1);
                 currentActiveSectionId = (initialHash && document.getElementById(initialHash)) ? initialHash : 'hero';
                 navLinks.forEach(link => link.classList.toggle('nav-active', link.getAttribute('data-section') === currentActiveSectionId));
                 mobileNavLinks.forEach(link => link.classList.toggle('nav-active', link.getAttribute('data-section') === currentActiveSectionId));
            } // End setupNavHighlighting

            /** Sets up the copy-to-clipboard functionality for buttons. */
            function setupClipboardCopy() {
                copyButtons.forEach(button => {
                     button.addEventListener('click', () => {
                        const textToCopy = button.dataset.copyText;
                        if (textToCopy && navigator.clipboard) {
                            navigator.clipboard.writeText(textToCopy).then(() => {
                                if (copyToast) {
                                    copyToast.classList.add('show');
                                    clearTimeout(toastTimeout);
                                    toastTimeout = setTimeout(() => { copyToast.classList.remove('show'); }, 2000);
                                }
                                const icon = button.querySelector('i[data-lucide]');
                                if (icon) {
                                     const originalIcon = icon.getAttribute('data-lucide');
                                     icon.setAttribute('data-lucide', 'check');
                                     try { lucide.createIcons(); } catch(e) { /* Silenced */ }
                                     setTimeout(() => {
                                         icon.setAttribute('data-lucide', originalIcon);
                                         try { lucide.createIcons(); } catch(e) { /* Silenced */ }
                                     }, 1500);
                                }
                                if (toneJsStarted && clickSynth) {
                                     try { clickSynth.triggerAttackRelease('G4', '16n', Tone.now()); } catch(e) { /* Silenced */ }
                                }
                            }).catch(err => console.error('Failed to copy text: ', err));
                        } else console.warn('Clipboard API not available or no text to copy.');
                    });
                });
            }

            /** Sets up the device orientation tilt effect (if supported). */
            function setupTiltEffect() {
                 if (!mainContentContainer) return;
                 const handleOrientation = (event) => {
                     if (event.beta === null || event.gamma === null) return;
                     const beta = Math.max(-20, Math.min(20, event.beta));
                     const gamma = Math.max(-20, Math.min(20, event.gamma));
                     const maxTilt = 1.5;
                     const tiltY = (beta / 20 * maxTilt).toFixed(2);
                     const tiltX = (gamma / 20 * -maxTilt).toFixed(2);
                     requestAnimationFrame(() => { mainContentContainer.style.transform = `perspective(1500px) rotateX(${tiltY}deg) rotateY(${tiltX}deg)`; });
                 };
                 if (window.DeviceOrientationEvent) window.addEventListener('deviceorientation', handleOrientation, true);
                 else console.log("DeviceOrientation not supported.");
            }

            /** Sets up the back-to-top button functionality. */
            function setupBackToTop() {
                if (backToTopButton) {
                    backToTopButton.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));
                }
            }


            // --- Particle Background Logic ---
            let particles = [];
            /** Initializes or re-initializes the particle canvas and animation. */
            function initParticles() {
                if (!particleCanvas) return;
                const ctx = particleCanvas.getContext('2d');
                if (!ctx) return;
                if (particleAnimationId) cancelAnimationFrame(particleAnimationId);
                resizeParticleCanvas();
                particles.forEach(p => p.baseColor = null);
                createParticles();
                if (!document.hidden) drawParticles();
            }

            /** Resizes the particle canvas to fill the window. */
            function resizeParticleCanvas() {
                if (!particleCanvas) return;
                particleCanvas.width = window.innerWidth;
                particleCanvas.height = window.innerHeight;
            }

            /** Creates the initial set of particles. */
            function createParticles() {
                if (!particleCanvas) return;
                particles = [];
                const particleCount = Math.floor((particleCanvas.width * particleCanvas.height) / 18000);
                for (let i = 0; i < particleCount; i++) {
                    particles.push({
                        x: Math.random() * particleCanvas.width, y: Math.random() * particleCanvas.height,
                        vx: (Math.random() - 0.5) * 0.3, vy: (Math.random() - 0.5) * 0.3,
                        radius: Math.random() * 1.8 + 0.8, baseRadius: Math.random() * 1.8 + 0.8,
                        baseColor: null, drawColor: null,
                    });
                }
            }

            /** The main animation loop for drawing particles and lines. */
            function drawParticles() {
                if (!particleCanvas) return;
                const ctx = particleCanvas.getContext('2d');
                if (!ctx) return;
                ctx.clearRect(0, 0, particleCanvas.width, particleCanvas.height);
                const isDark = htmlEl.classList.contains('dark');
                const twConfig = tailwind.config.theme.extend.colors;
                const lightColors = [`${twConfig.accent}80`, `${twConfig['accent-secondary']}80`, `${twConfig['tertiary-light']}60`];
                const darkColors = [`${twConfig['dark-accent']}80`, `${twConfig['dark-accent-secondary']}80`, `${twConfig['tertiary-dark']}60`];
                const themeColors = isDark ? darkColors : lightColors;
                const lineColor = isDark ? 'rgba(197, 198, 199, 0.05)' : 'rgba(74, 74, 74, 0.05)';

                particles.forEach((p, i) => {
                    if (!p.baseColor) p.baseColor = themeColors[Math.floor(Math.random() * themeColors.length)];
                    p.drawColor = p.baseColor; p.radius = p.baseRadius;

                    // Mouse interaction (using window-relative mouse coords)
                    if (mouse.x !== null && mouse.y !== null) {
                        const rect = particleCanvas.getBoundingClientRect();
                        const canvasMouseX = mouse.x - rect.left;
                        const canvasMouseY = mouse.y - rect.top;
                        const dx = canvasMouseX - p.x;
                        const dy = canvasMouseY - p.y;
                        const distance = Math.sqrt(dx * dx + dy * dy);

                        if (distance < particleInteractionRadius) {
                            const proximityFactor = 1 - (distance / particleInteractionRadius);
                            const baseHex = p.baseColor.substring(0, 7);
                            const currentAlphaHex = p.baseColor.substring(7, 9) || '80';
                            const currentAlphaDec = parseInt(currentAlphaHex, 16);
                            const targetAlphaDec = Math.min(255, Math.floor(currentAlphaDec + proximityFactor * 100));
                            p.drawColor = `${baseHex}${targetAlphaDec.toString(16).padStart(2, '0')}`;
                            p.radius = p.baseRadius + proximityFactor * 1.5;
                            const force = proximityFactor; const pushStrength = 0.4;
                            p.x -= (dx / distance) * force * pushStrength;
                            p.y -= (dy / distance) * force * pushStrength;
                        }
                    }

                    ctx.fillStyle = p.drawColor; ctx.beginPath(); ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2); ctx.fill();
                    p.x += p.vx; p.y += p.vy;
                    if (p.x < -p.radius) p.x = particleCanvas.width + p.radius; if (p.x > particleCanvas.width + p.radius) p.x = -p.radius;
                    if (p.y < -p.radius) p.y = particleCanvas.height + p.radius; if (p.y > particleCanvas.height + p.radius) p.y = -p.radius;

                    for (let j = i + 1; j < particles.length; j++) {
                        const p2 = particles[j]; const dx = p.x - p2.x; const dy = p.y - p2.y; const distance = Math.sqrt(dx * dx + dy * dy);
                        if (distance < particleLineThreshold) {
                            ctx.strokeStyle = lineColor; ctx.lineWidth = 0.5 * (1 - distance / particleLineThreshold);
                            ctx.beginPath(); ctx.moveTo(p.x, p.y); ctx.lineTo(p2.x, p2.y); ctx.stroke();
                        }
                    }
                });
                particleAnimationId = requestAnimationFrame(drawParticles);
            } // End drawParticles


            // --- Skill Constellation Logic --- "Brilliant Creation"
            let skillNodes = [];
            const skillNames = [ // Match skills from cards or add more
                "Python", "SQL", "Pandas", "NumPy", "Scikit-learn", "ML", "AI",
                "TensorFlow", "Keras", "TimeSeries", "Forecast", "CV", "API", "Git",
                "Matplotlib", "Seaborn", "Plotly", "Cloud", "ERP", "WebDev" // Added WebDev
            ];

            /** Initializes or re-initializes the skill constellation canvas. */
            function initSkillConstellation() {
                if (!skillConstellationCanvas) return;
                const ctx = skillConstellationCanvas.getContext('2d');
                if (!ctx) return;

                if (skillConstellationAnimationId) cancelAnimationFrame(skillConstellationAnimationId); // Stop previous animation

                resizeSkillCanvas();
                createSkillNodes();

                // Use IntersectionObserver to start/stop animation based on visibility
                const observerOptions = { threshold: 0.1 }; // Trigger when 10% visible
                const observerCallback = (entries) => {
                    entries.forEach(entry => {
                        skillConstellationVisible = entry.isIntersecting;
                        if (skillConstellationVisible) {
                            skillConstellationCanvas.classList.add('visible'); // Fade in
                            if (!skillConstellationAnimationId) drawSkillConstellation(); // Start animation if not running
                        } else {
                            skillConstellationCanvas.classList.remove('visible'); // Fade out
                            if (skillConstellationAnimationId) {
                                cancelAnimationFrame(skillConstellationAnimationId); // Stop animation
                                skillConstellationAnimationId = null;
                            }
                        }
                    });
                };
                const skillObserver = new IntersectionObserver(observerCallback, observerOptions);
                skillObserver.observe(skillConstellationCanvas);
            }

            /** Resizes the skill constellation canvas. */
            function resizeSkillCanvas() {
                 if (!skillConstellationCanvas) return;
                 // Make canvas responsive based on its container, but keep fixed height
                 const parentWidth = skillConstellationCanvas.parentElement.clientWidth;
                 skillConstellationCanvas.width = parentWidth;
                 // Height is fixed via CSS, but set here too if needed: skillConstellationCanvas.height = 200;
            }

            /** Creates the skill nodes with random positions. */
            function createSkillNodes() {
                if (!skillConstellationCanvas) return;
                skillNodes = [];
                const padding = 30; // Padding from canvas edges
                skillNames.forEach(name => {
                    skillNodes.push({
                        name: name,
                        x: Math.random() * (skillConstellationCanvas.width - padding * 2) + padding,
                        y: Math.random() * (skillConstellationCanvas.height - padding * 2) + padding,
                        vx: (Math.random() - 0.5) * 0.15, // Slower movement
                        vy: (Math.random() - 0.5) * 0.15,
                        radius: skillConstellationNodeRadius,
                        targetRadius: skillConstellationNodeRadius, // For hover effect
                        color: null, // Set in draw loop based on theme
                        alpha: 1 // For hover effect
                    });
                });
            }

            /** Animation loop for the skill constellation. */
            function drawSkillConstellation() {
                if (!skillConstellationCanvas || !skillConstellationVisible) {
                    skillConstellationAnimationId = null; // Ensure animation stops if canvas disappears or isn't visible
                    return;
                }
                const ctx = skillConstellationCanvas.getContext('2d');
                if (!ctx) return;

                ctx.clearRect(0, 0, skillConstellationCanvas.width, skillConstellationCanvas.height);

                const isDark = htmlEl.classList.contains('dark');
                const twConfig = tailwind.config.theme.extend.colors;
                // Define colors (use accents)
                const nodeColor = isDark ? twConfig['dark-accent'] : twConfig['accent'];
                const hoverColor = isDark ? twConfig['dark-accent-secondary'] : twConfig['accent-secondary'];
                const lineColor = isDark ? 'rgba(102, 252, 241, 0.15)' : 'rgba(108, 92, 231, 0.15)'; // Faint accent lines
                const textColor = isDark ? twConfig['dark-secondary-text'] : twConfig['secondary-text'];
                const hoverTextColor = isDark ? twConfig['dark-primary-text'] : twConfig['primary-text'];

                skillNodes.forEach((node, i) => {
                    let isHovering = false;
                    // Mouse interaction for skills canvas
                    if (constellationMouse.x !== null && constellationMouse.y !== null) {
                        const dx = constellationMouse.x - node.x;
                        const dy = constellationMouse.y - node.y;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        if (distance < skillConstellationInteractionRadius) {
                            isHovering = true;
                            const proximityFactor = 1 - (distance / skillConstellationInteractionRadius);
                            node.targetRadius = skillConstellationNodeRadius + proximityFactor * 3; // Grow slightly
                            node.alpha = 1; // Fully opaque
                            // Optional: Slightly push away
                            // const force = proximityFactor * 0.05;
                            // node.x -= (dx / distance) * force;
                            // node.y -= (dy / distance) * force;
                        } else {
                            node.targetRadius = skillConstellationNodeRadius;
                            node.alpha = 0.7; // Slightly transparent when not hovered
                        }
                    } else {
                        node.targetRadius = skillConstellationNodeRadius;
                        node.alpha = 0.7;
                    }

                    // Smooth radius change
                    node.radius += (node.targetRadius - node.radius) * 0.1;

                    // Draw node
                    ctx.fillStyle = isHovering ? `${hoverColor}${Math.round(node.alpha * 255).toString(16).padStart(2, '0')}` : `${nodeColor}${Math.round(node.alpha * 255).toString(16).padStart(2, '0')}`;
                    ctx.beginPath();
                    ctx.arc(node.x, node.y, node.radius, 0, Math.PI * 2);
                    ctx.fill();

                    // Draw text label on hover
                    if (isHovering) {
                        ctx.fillStyle = hoverTextColor;
                        ctx.font = '11px "JetBrains Mono", monospace'; // Use mono font
                        ctx.textAlign = 'center';
                        ctx.fillText(node.name, node.x, node.y - node.radius - 5); // Position above node
                    }

                    // Update position & bounce off edges
                    node.x += node.vx;
                    node.y += node.vy;
                    if (node.x < node.radius || node.x > skillConstellationCanvas.width - node.radius) node.vx *= -1;
                    if (node.y < node.radius || node.y > skillConstellationCanvas.height - node.radius) node.vy *= -1;

                    // Draw connecting lines (simple proximity based)
                    for (let j = i + 1; j < skillNodes.length; j++) {
                        const node2 = skillNodes[j];
                        const dx = node.x - node2.x;
                        const dy = node.y - node2.y;
                        const distance = Math.sqrt(dx * dx + dy * dy);

                        if (distance < skillConstellationLineThreshold) {
                            // Line opacity fades with distance
                            const lineAlpha = Math.max(0, 1 - distance / skillConstellationLineThreshold) * 0.5; // Max 50% opacity
                            ctx.strokeStyle = lineColor.replace('0.15', lineAlpha.toFixed(2)); // Adjust alpha
                            ctx.lineWidth = 0.8;
                            ctx.beginPath();
                            ctx.moveTo(node.x, node.y);
                            ctx.lineTo(node2.x, node2.y);
                            ctx.stroke();
                        }
                    }
                });

                skillConstellationAnimationId = requestAnimationFrame(drawSkillConstellation);
            } // End drawSkillConstellation

            /** Updates the mouse position relative to the skill constellation canvas. */
            const updateConstellationMousePosition = (event) => {
                if (!skillConstellationCanvas) return;
                const rect = skillConstellationCanvas.getBoundingClientRect();
                const clientX = event.touches ? event.touches[0].clientX : event.clientX;
                const clientY = event.touches ? event.touches[0].clientY : event.clientY;
                constellationMouse.x = clientX - rect.left;
                constellationMouse.y = clientY - rect.top;
            };

            /** Resets the skill constellation mouse position. */
            const resetConstellationMousePosition = () => {
                constellationMouse.x = null;
                constellationMouse.y = null;
            };


            // --- Event Listeners & Initialization Call ---

            // General Mouse Position Listener (for particle canvas)
            window.addEventListener('mousemove', (e) => { mouse.x = e.clientX; mouse.y = e.clientY; });
            window.addEventListener('mouseout', () => { mouse.x = null; mouse.y = null; }); // Reset when mouse leaves window

            // Theme Toggle Button
            if (themeToggleButton) themeToggleButton.addEventListener('click', () => setTheme(htmlEl.classList.contains('dark') ? 'light' : 'dark'));

            // Mobile Menu Button & Links
            if (mobileMenuButton) mobileMenuButton.addEventListener('click', toggleMobileMenu);
            mobileNavLinks.forEach(link => link.addEventListener('click', closeMobileMenu));

            // Project Card Clicks & Keydown (Open Modal)
            projectCards.forEach(card => {
                card.addEventListener('click', () => openModal(card.getAttribute('data-project-id')));
                card.addEventListener('keydown', (event) => { if (event.key === 'Enter' || event.key === ' ') { event.preventDefault(); openModal(card.getAttribute('data-project-id')); } });
            });

            // Close modal on background click
            if(projectModal) projectModal.addEventListener('click', (event) => { if (event.target === projectModal) closeModal(); });

            // Scroll Listener
            window.addEventListener('scroll', handleScroll, { passive: true });

            // Skill Constellation Canvas Listeners
            if (skillConstellationCanvas) {
                skillConstellationCanvas.addEventListener('mousemove', updateConstellationMousePosition);
                skillConstellationCanvas.addEventListener('touchmove', updateConstellationMousePosition, { passive: true });
                skillConstellationCanvas.addEventListener('mouseleave', resetConstellationMousePosition);
                skillConstellationCanvas.addEventListener('touchend', resetConstellationMousePosition);

                // Handle resize for skill canvas
                let skillResizeTimeout;
                window.addEventListener('resize', () => {
                    clearTimeout(skillResizeTimeout);
                    skillResizeTimeout = setTimeout(() => {
                        // Re-initialize only if it's currently visible to avoid unnecessary computation
                        if (skillConstellationVisible) {
                            initSkillConstellation();
                        } else {
                            // Just resize if not visible, nodes will be recreated when it becomes visible
                            resizeSkillCanvas();
                            createSkillNodes(); // Recreate nodes with new positions based on potential new size
                        }
                    }, 250);
                });
            }

            // --- Initialize Everything ---
            hidePreloader();
            setupWhatsAppLinks();
            setupToneJS();
            addSoundFeedback();
            setFooterYear();
            updateThemeUI(); // Set initial theme UI state (calls initParticles & initSkillConstellation indirectly)
            setupHeroWordRotation();
            setupProjectCardImageSwap();
            setupScrollReveal();
            setupNavHighlighting();
            setupClipboardCopy();
            setupTiltEffect();
            setupBackToTop();
            // Initial calls to init canvases are handled by updateThemeUI now

        }); // End DOMContentLoaded
    </script>

    <script>
        var d=document,w="https://tally.so/widgets/embed.js",v=function(){"undefined"!=typeof Tally?Tally.loadEmbeds():d.querySelectorAll("iframe[data-tally-src]:not([src])").forEach((function(e){e.src=e.dataset.tallySrc}))};if("undefined"!=typeof Tally)v();else if(d.querySelector('script[src="'+w+'"]')==null){var s=d.createElement("script");s.src=w;s.onload=v;s.onerror=function(){console.error("Failed to load Tally embed script."); var formIframe=document.getElementById('tally-contact-form'); var fallbackMsg=document.getElementById('tally-fallback'); if(formIframe) formIframe.style.display='none'; if(fallbackMsg) fallbackMsg.classList.remove('hidden'); };d.body.appendChild(s);}
    </script>

    <script>
        // Skill Cube Interaction
        document.addEventListener('DOMContentLoaded', () => {
            const cube = document.getElementById('skill-cube');
            if (!cube) return;

            let isDragging = false;
            let startX, startY;
            let rotationX = -20;
            let rotationY = -20;

            cube.addEventListener('mousedown', (e) => {
                isDragging = true;
                cube.style.animation = 'none';
                startX = e.clientX;
                startY = e.clientY;
                e.preventDefault();
            });

            document.addEventListener('mousemove', (e) => {
                if (!isDragging) return;
                
                const deltaX = e.clientX - startX;
                const deltaY = e.clientY - startY;
                
                rotationY += deltaX * 0.5;
                rotationX -= deltaY * 0.5;
                
                cube.style.transform = `rotateX(${rotationX}deg) rotateY(${rotationY}deg)`;
                
                startX = e.clientX;
                startY = e.clientY;
            });

            document.addEventListener('mouseup', () => {
                isDragging = false;
                cube.style.animation = 'slow-spin 15s infinite linear';
            });

            // Add touch support
            cube.addEventListener('touchstart', (e) => {
                isDragging = true;
                cube.style.animation = 'none';
                startX = e.touches[0].clientX;
                startY = e.touches[0].clientY;
                e.preventDefault();
            });

            document.addEventListener('touchmove', (e) => {
                if (!isDragging) return;
                
                const deltaX = e.touches[0].clientX - startX;
                const deltaY = e.touches[0].clientY - startY;
                
                rotationY += deltaX * 0.5;
                rotationX -= deltaY * 0.5;
                
                cube.style.transform = `rotateX(${rotationX}deg) rotateY(${rotationY}deg)`;
                
                startX = e.touches[0].clientX;
                startY = e.touches[0].clientY;
            });

            document.addEventListener('touchend', () => {
                isDragging = false;
                cube.style.animation = 'slow-spin 15s infinite linear';
            });
        });
    </script>

    <script>
        // Wave Animation
        document.addEventListener('DOMContentLoaded', () => {
            const canvas = document.getElementById('waveCanvas');
            if (!canvas) return;

            const ctx = canvas.getContext('2d');
            let width = canvas.width = window.innerWidth;
            let height = canvas.height = window.innerHeight;
            
            const waves = [];
            const numWaves = 3;
            const colors = {
                light: ['rgba(108, 92, 231, 0.2)', 'rgba(255, 107, 107, 0.2)', 'rgba(45, 152, 218, 0.2)'],
                dark: ['rgba(102, 252, 241, 0.2)', 'rgba(69, 162, 158, 0.2)', 'rgba(98, 205, 199, 0.2)']
            };

            class Wave {
                constructor(index) {
                    this.index = index;
                    this.reset();
                }

                reset() {
                    this.amplitude = Math.random() * 20 + 10;
                    this.period = Math.random() * 200 + 200;
                    this.phase = Math.random() * Math.PI * 2;
                    this.speed = (Math.random() * 0.1 + 0.1) * (Math.random() < 0.5 ? 1 : -1);
                    this.colorIndex = Math.floor(Math.random() * colors.light.length);
                }

                update() {
                    this.phase += this.speed;
                    if (this.phase > Math.PI * 2) this.phase = 0;
                }

                draw(ctx, width, height, scrollProgress, mouseX) {
                    const isDark = document.documentElement.classList.contains('dark');
                    const currentColors = isDark ? colors.dark : colors.light;
                    
                    ctx.beginPath();
                    ctx.moveTo(0, height);

                    for (let x = 0; x <= width; x += 5) {
                        const relativeX = (x / width) - 0.5;
                        const distanceFromMouse = mouseX ? Math.abs(x - mouseX) / width : 1;
                        const mouseInfluence = Math.max(0, 1 - distanceFromMouse * 2);
                        
                        const y = height * 0.5 + 
                            this.amplitude * Math.sin((x / this.period) + this.phase) * (1 + scrollProgress * 0.5) +
                            (mouseInfluence * 20 * Math.sin(x / 30 + Date.now() / 1000));
                        
                        ctx.lineTo(x, y);
                    }

                    ctx.lineTo(width, height);
                    ctx.closePath();

                    const gradient = ctx.createLinearGradient(0, 0, width, height);
                    gradient.addColorStop(0, currentColors[this.colorIndex]);
                    gradient.addColorStop(1, currentColors[(this.colorIndex + 1) % currentColors.length]);
                    
                    ctx.fillStyle = gradient;
                    ctx.fill();
                }
            }

            // Initialize waves
            for (let i = 0; i < numWaves; i++) {
                waves.push(new Wave(i));
            }

            let mouseX = null;
            let scrollProgress = 0;
            let animationFrame;

            // Animation loop
            function animate() {
                ctx.clearRect(0, 0, width, height);
                
                waves.forEach(wave => {
                    wave.update();
                    wave.draw(ctx, width, height, scrollProgress, mouseX);
                });

                animationFrame = requestAnimationFrame(animate);
            }

            // Handle resize
            window.addEventListener('resize', () => {
                width = canvas.width = window.innerWidth;
                height = canvas.height = window.innerHeight;
            });

            // Handle mouse movement
            document.addEventListener('mousemove', (e) => {
                mouseX = e.clientX;
            });

            // Handle scroll
            window.addEventListener('scroll', () => {
                const maxScroll = document.documentElement.scrollHeight - window.innerHeight;
                scrollProgress = Math.min(1, window.scrollY / maxScroll);
            });

            // Start animation
            animate();

            // Cleanup on page visibility change
            document.addEventListener('visibilitychange', () => {
                if (document.hidden) {
                    cancelAnimationFrame(animationFrame);
                } else {
                    animate();
                }
            });
        });
    </script>

    <script>
        // AI Thought Bubble Visualization
        document.addEventListener('DOMContentLoaded', () => {
            const bubble = document.getElementById('ai-thought-bubble');
            const canvas = document.getElementById('neural-network');
            const thoughtContent = document.getElementById('thought-content');
            const thoughtText = thoughtContent.querySelector('p');
            
            if (!bubble || !canvas || !thoughtContent) return;

            const ctx = canvas.getContext('2d');
            let width = canvas.width = 256;
            let height = canvas.height = 256;
            
            // Neural network structure
            const layers = [4, 6, 8, 6, 4];
            const neurons = [];
            const synapses = [];
            let activeNeurons = new Set();
            let activeSynapses = new Set();
            
            // Initialize neurons
            layers.forEach((count, layerIndex) => {
                const layer = [];
                const layerY = height * (layerIndex + 1) / (layers.length + 1);
                
                for (let i = 0; i < count; i++) {
                    const neuron = {
                        x: width * (i + 1) / (count + 1),
                        y: layerY,
                        radius: 3,
                        activation: 0,
                        layer: layerIndex
                    };
                    layer.push(neuron);
                }
                neurons.push(layer);
            });
            
            // Create synapses
            for (let i = 0; i < neurons.length - 1; i++) {
                const currentLayer = neurons[i];
                const nextLayer = neurons[i + 1];
                
                currentLayer.forEach(neuron1 => {
                    nextLayer.forEach(neuron2 => {
                        synapses.push({
                            from: neuron1,
                            to: neuron2,
                            weight: Math.random(),
                            signal: 0
                        });
                    });
                });
            }

            function drawNetwork() {
                ctx.clearRect(0, 0, width, height);
                
                // Draw synapses
                synapses.forEach(synapse => {
                    const active = activeSynapses.has(synapse);
                    ctx.beginPath();
                    ctx.moveTo(synapse.from.x, synapse.from.y);
                    ctx.lineTo(synapse.to.x, synapse.to.y);
                    
                    const gradient = ctx.createLinearGradient(
                        synapse.from.x, synapse.from.y,
                        synapse.to.x, synapse.to.y
                    );
                    
                    const isDark = document.documentElement.classList.contains('dark');
                    const baseColor = isDark ? 'rgba(102, 252, 241,' : 'rgba(108, 92, 231,';
                    
                    gradient.addColorStop(0, `${baseColor}${active ? '0.5' : '0.1'})`);
                    gradient.addColorStop(1, `${baseColor}${active ? '0.1' : '0.1'})`);
                    
                    ctx.strokeStyle = gradient;
                    ctx.lineWidth = active ? 2 : 1;
                    ctx.stroke();
                });
                
                // Draw neurons
                neurons.flat().forEach(neuron => {
                    const active = activeNeurons.has(neuron);
                    ctx.beginPath();
                    ctx.arc(neuron.x, neuron.y, neuron.radius * (active ? 1.5 : 1), 0, Math.PI * 2);
                    
                    const isDark = document.documentElement.classList.contains('dark');
                    ctx.fillStyle = isDark ? 
                        `rgba(102, 252, 241,${active ? '0.8' : '0.3'})` :
                        `rgba(108, 92, 231,${active ? '0.8' : '0.3'})`;
                    
                    ctx.fill();
                });
            }

            function propagateSignal() {
                activeNeurons.clear();
                activeSynapses.clear();
                
                // Activate random input neurons
                const inputLayer = neurons[0];
                const numActive = 1 + Math.floor(Math.random() * 2);
                
                for (let i = 0; i < numActive; i++) {
                    const neuron = inputLayer[Math.floor(Math.random() * inputLayer.length)];
                    activeNeurons.add(neuron);
                }
                
                // Propagate through layers
                for (let i = 0; i < neurons.length - 1; i++) {
                    const nextActive = new Set();
                    
                    synapses.filter(s => s.from.layer === i).forEach(synapse => {
                        if (activeNeurons.has(synapse.from) && Math.random() < 0.7) {
                            nextActive.add(synapse.to);
                            activeSynapses.add(synapse);
                        }
                    });
                    
                    activeNeurons = nextActive;
                }
            }

            // Content analysis
            const contentTypes = {
                'hero': ['Analyzing portfolio introduction', 'Processing personal brand elements', 'Evaluating hero section impact'],
                'about': ['Analyzing professional background', 'Processing experience patterns', 'Evaluating skill correlations'],
                'skills': ['Mapping technical competencies', 'Analyzing skill relationships', 'Processing expertise clusters'],
                'education': ['Analyzing academic progression', 'Processing learning patterns', 'Mapping knowledge acquisition'],
                'projects': ['Analyzing project complexity', 'Processing technical implementations', 'Evaluating solution architectures'],
                'publications': ['Analyzing research depth', 'Processing knowledge sharing patterns', 'Evaluating technical writing'],
                'contact': ['Processing communication channels', 'Analyzing engagement options', 'Mapping connection points']
            };

            function getCurrentSection() {
                const sections = document.querySelectorAll('section[id]');
                let currentSection = 'hero';
                
                sections.forEach(section => {
                    const rect = section.getBoundingClientRect();
                    if (rect.top <= window.innerHeight / 2 && rect.bottom >= window.innerHeight / 2) {
                        currentSection = section.id;
                    }
                });
                
                return currentSection;
            }

            function updateThoughtContent() {
                const section = getCurrentSection();
                const thoughts = contentTypes[section] || contentTypes['hero'];
                const thought = thoughts[Math.floor(Math.random() * thoughts.length)];
                
                thoughtText.textContent = thought;
                thoughtContent.classList.add('thought-content-visible');
                
                setTimeout(() => {
                    thoughtContent.classList.remove('thought-content-visible');
                }, 3000);
            }

            let animationFrame;
            let lastThoughtUpdate = 0;

            function animate(timestamp) {
                if (timestamp - lastThoughtUpdate > 3500) {
                    propagateSignal();
                    updateThoughtContent();
                    lastThoughtUpdate = timestamp;
                }
                
                drawNetwork();
                animationFrame = requestAnimationFrame(animate);
            }

            // Show bubble when scrolling starts
            let scrollTimeout;
            window.addEventListener('scroll', () => {
                bubble.classList.add('thought-bubble-visible');
                clearTimeout(scrollTimeout);
                scrollTimeout = setTimeout(() => {
                    bubble.classList.remove('thought-bubble-visible');
                }, 1000);
            });

            // Start animation
            animate(0);

            // Cleanup
            document.addEventListener('visibilitychange', () => {
                if (document.hidden) {
                    cancelAnimationFrame(animationFrame);
                } else {
                    animate(0);
                }
            });
        });
    </script>

    <script>
        // Music Player Controls
        document.addEventListener('DOMContentLoaded', () => {
            const musicToggle = document.getElementById('music-toggle');
            const spotifyPlayer = document.getElementById('spotify-player');
            const closePlayer = document.getElementById('close-player');
            
            if (!musicToggle || !spotifyPlayer || !closePlayer) return;

            let isPlaying = false;

            musicToggle.addEventListener('click', () => {
                spotifyPlayer.classList.toggle('visible');
                if (!isPlaying) {
                    // Add equalizer animation to button
                    const musicIcon = musicToggle.querySelector('[data-lucide="music"]');
                    if (musicIcon) {
                        musicIcon.outerHTML = `
                            <div class="flex items-end h-5 gap-[2px]">
                                <div class="equalizer-bar"></div>
                                <div class="equalizer-bar"></div>
                                <div class="equalizer-bar"></div>
                                <div class="equalizer-bar"></div>
                            </div>
                        `;
                    }
                    isPlaying = true;
                }
            });

            closePlayer.addEventListener('click', (e) => {
                e.stopPropagation();
                spotifyPlayer.classList.remove('visible');
            });

            // Close player when clicking outside
            document.addEventListener('click', (e) => {
                if (!spotifyPlayer.contains(e.target) && !musicToggle.contains(e.target)) {
                    spotifyPlayer.classList.remove('visible');
                }
            });
        });
    </script>

    <script>
        // Enhanced Music Player Controls
        document.addEventListener('DOMContentLoaded', () => {
            const musicPlayer = document.getElementById('floating-music-player');
            const musicToggle = document.getElementById('music-toggle');
            const spotifyPlayer = document.getElementById('spotify-player');
            const closePlayer = document.getElementById('close-player');
            const playlist1Btn = document.getElementById('playlist-1');
            const playlist2Btn = document.getElementById('playlist-2');
            const codingPlaylist = document.getElementById('coding-playlist');
            const ambientPlaylist = document.getElementById('ambient-playlist');
            
            if (!musicPlayer || !musicToggle || !spotifyPlayer || !closePlayer) return;

            let isPlaying = true; // Start with equalizer animation
            let currentPlaylist = 'coding';

            // Smooth section-based positioning
            let lastScrollY = window.scrollY;
            let scrollDirection = 'down';
            let ticking = false;

            const updatePlayerPosition = () => {
                const sections = document.querySelectorAll('section[id]');
                let nearestSection = null;
                let minDistance = Infinity;
                const viewportMiddle = window.innerHeight / 2;

                sections.forEach(section => {
                    const rect = section.getBoundingClientRect();
                    const distance = Math.abs(rect.top + rect.height / 2 - viewportMiddle);
                    if (distance < minDistance) {
                        minDistance = distance;
                        nearestSection = section;
                    }
                });

                if (nearestSection) {
                    const rect = nearestSection.getBoundingClientRect();
                    const sectionProgress = -rect.top / (rect.height - window.innerHeight);
                    const baseY = rect.top + rect.height / 2;
                    
                    // Add some organic movement based on scroll direction
                    const directionOffset = scrollDirection === 'down' ? 50 : -50;
                    const targetY = baseY + directionOffset;
                    
                    // Apply smooth transition
                    musicPlayer.style.transform = `translateY(${targetY}px) rotate(${Math.sin(sectionProgress * Math.PI) * 5}deg)`;
                }
            };

            window.addEventListener('scroll', () => {
                scrollDirection = window.scrollY > lastScrollY ? 'down' : 'up';
                lastScrollY = window.scrollY;

                if (!ticking) {
                    window.requestAnimationFrame(() => {
                        updatePlayerPosition();
                        ticking = false;
                    });
                    ticking = true;
                }
            });

            // Toggle player visibility
            musicToggle.addEventListener('click', () => {
                spotifyPlayer.classList.toggle('visible');
            });

            // Switch playlists
            playlist1Btn.addEventListener('click', () => {
                if (currentPlaylist !== 'coding') {
                    codingPlaylist.style.opacity = '1';
                    codingPlaylist.style.pointerEvents = 'auto';
                    ambientPlaylist.style.opacity = '0';
                    ambientPlaylist.style.pointerEvents = 'none';
                    currentPlaylist = 'coding';
                    playlist1Btn.classList.add('bg-accent/20', 'dark:bg-dark-accent/20');
                    playlist2Btn.classList.remove('bg-accent/20', 'dark:bg-dark-accent/20');
                }
            });

            playlist2Btn.addEventListener('click', () => {
                if (currentPlaylist !== 'ambient') {
                    ambientPlaylist.style.opacity = '1';
                    ambientPlaylist.style.pointerEvents = 'auto';
                    codingPlaylist.style.opacity = '0';
                    codingPlaylist.style.pointerEvents = 'none';
                    currentPlaylist = 'ambient';
                    playlist2Btn.classList.add('bg-accent/20', 'dark:bg-dark-accent/20');
                    playlist1Btn.classList.remove('bg-accent/20', 'dark:bg-dark-accent/20');
                }
            });

            closePlayer.addEventListener('click', (e) => {
                e.stopPropagation();
                spotifyPlayer.classList.remove('visible');
            });

            // Close player when clicking outside
            document.addEventListener('click', (e) => {
                if (!spotifyPlayer.contains(e.target) && !musicToggle.contains(e.target)) {
                    spotifyPlayer.classList.remove('visible');
                }
            });

            // Initial position update
            updatePlayerPosition();
        });
    </script>

    <script>
        // Music Visualizer
        document.addEventListener('DOMContentLoaded', () => {
            const canvas = document.getElementById('music-visualizer');
            const ctx = canvas.getContext('2d');
            let animationId;
            let isPlaying = true;

            function resizeCanvas() {
                canvas.width = canvas.offsetWidth;
                canvas.height = canvas.offsetHeight;
            }
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);

            function drawVisualizer() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                const barCount = 30;
                const barWidth = canvas.width / barCount;
                const maxHeight = canvas.height * 0.8;

                for (let i = 0; i < barCount; i++) {
                    const height = Math.random() * maxHeight;
                    const hue = (i / barCount) * 360;
                    
                    ctx.fillStyle = `hsla(${hue}, 70%, 60%, 0.8)`;
                    ctx.fillRect(
                        i * barWidth,
                        canvas.height - height,
                        barWidth - 2,
                        height
                    );
                }

                if (isPlaying) {
                    animationId = requestAnimationFrame(drawVisualizer);
                }
            }

            document.getElementById('toggle-visualizer').addEventListener('click', () => {
                isPlaying = !isPlaying;
                if (isPlaying) {
                    drawVisualizer();
                } else {
                    cancelAnimationFrame(animationId);
                }
            });

            drawVisualizer();
        });

        // Mood Selector
        const moodButtons = document.querySelectorAll('.mood-btn');
        moodButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                // Remove active state from all buttons
                moodButtons.forEach(b => b.classList.remove('bg-accent', 'dark:bg-dark-accent', 'text-white', 'dark:text-jet-black'));
                // Add active state to clicked button
                btn.classList.add('bg-accent', 'dark:bg-dark-accent', 'text-white', 'dark:text-jet-black');
                
                // Add a fun animation
                btn.style.transform = 'scale(1.1)';
                setTimeout(() => btn.style.transform = 'scale(1)', 200);

                // Show a toast notification
                showToast(`Mood set to: ${btn.textContent.trim()}`);
            });
        });

        // Toast Notification
        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'fixed bottom-4 left-1/2 transform -translate-x-1/2 px-4 py-2 rounded-lg bg-accent dark:bg-dark-accent text-white dark:text-jet-black text-sm font-medium shadow-lg z-50 opacity-0 transition-opacity duration-300';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            // Fade in
            requestAnimationFrame(() => {
                toast.style.opacity = '1';
            });
            
            // Fade out and remove
            setTimeout(() => {
                toast.style.opacity = '0';
                setTimeout(() => toast.remove(), 300);
            }, 2000);
        }
    </script>

    <!-- Add to script section -->
    <script>
    // Spotify Authentication
    const clientId = '573805aedac64955829435745536cf78';
    const redirectUri = 'https://danco-analytics.github.io/Portifolio/';
    let accessToken = null;

    document.getElementById('spotify-auth').addEventListener('click', () => {
        const scope = 'streaming user-read-email user-read-private user-read-playback-state user-modify-playback-state';
        const authUrl = `https://accounts.spotify.com/authorize?client_id=${'573805aedac64955829435745536cf78'}&response_type=token&redirect_uri=${encodeURIComponent(redirectUri)}&scope=${encodeURIComponent(scope)}`;
        window.location.href = authUrl;
    });

    // Check for access token in URL after auth
    window.addEventListener('load', () => {
        const hash = window.location.hash.substring(1);
        const params = new URLSearchParams(hash);
        accessToken = params.get('access_token');
        
        if (accessToken) {
            // Initialize player with token
            initializePlayer(accessToken);
            // Remove token from URL
            window.location.hash = '';
        }
    });

    // Initialize Spotify Player
    function initializePlayer(token) {
        const player = new Spotify.Player({
            name: 'Portfolio Music Player',
            getOAuthToken: cb => { cb(token); }
        });

        // Error handling
        player.addListener('initialization_error', ({ message }) => { console.error(message); });
        player.addListener('authentication_error', ({ message }) => { console.error(message); });
        player.addListener('account_error', ({ message }) => { console.error(message); });
        player.addListener('playback_error', ({ message }) => { console.error(message); });

        // Playback status updates
        player.addListener('player_state_changed', state => {
            if (state) {
                updateNowPlaying(state);
                updateVisualizer(state);
            }
        });

        // Ready
        player.addListener('ready', ({ device_id }) => {
            console.log('Ready with Device ID', device_id);
            // Enable controls
            setupControls(player);
        });

        player.connect();
    }

    // Update Now Playing
    function updateNowPlaying(state) {
        const titleEl = document.getElementById('now-playing-title');
        const artistEl = document.getElementById('now-playing-artist');
        const artEl = document.getElementById('now-playing-art');

        if (state.track_window.current_track) {
            const track = state.track_window.current_track;
            titleEl.textContent = track.name;
            artistEl.textContent = track.artists[0].name;
            artEl.style.backgroundImage = 'url("' + track.album.images[0].url + '")';
        }
    }

    // Update Visualizer
    function updateVisualizer(state) {
        // Implement visualizer update logic based on Spotify state
        console.log('Spotify player state:', state);
    }

    // Setup controls
    function setupControls(player) {
        player.addListener('player_state_changed', state => {
            updateNowPlaying(state);
            updateVisualizer(state);
        });
    }
    </script>

    <script>
    const SPOTIFY_CLIENT_ID = '573805aedac64955829435745536cf78';
    const SPOTIFY_REDIRECT_URI = 'https://danco-analytics.github.io/Portifolio/';

    window.onSpotifyWebPlaybackSDKReady = () => {
        const token = localStorage.getItem('spotify_token');
        if (token) {
            initializePlayer(token);
        }
    };

    // Check for access token in URL after auth
    window.addEventListener('load', () => {
        const hash = window.location.hash.substring(1);
        const params = new URLSearchParams(hash);
        const accessToken = params.get('access_token');
        
        if (accessToken) {
            localStorage.setItem('spotify_token', accessToken);
            initializePlayer(accessToken);
            window.location.hash = '';
        }
    });
    </script>

    <script>
    function initializePlayer(token) {
        const player = new Spotify.Player({
            name: 'Portfolio Music Player',
            getOAuthToken: cb => { cb(token); }
        });

        // Error handling
        player.addListener('initialization_error', ({ message }) => { showToast('Failed to initialize player: ' + message); });
        player.addListener('authentication_error', ({ message }) => { showToast('Authentication failed: ' + message); });
        player.addListener('account_error', ({ message }) => { showToast('Account error: ' + message); });
        player.addListener('playback_error', ({ message }) => { showToast('Playback error: ' + message); });

        // Ready
        player.addListener('ready', ({ device_id }) => {
            console.log('Ready with Device ID', device_id);
            localStorage.setItem('spotify_device_id', device_id);
            showToast('Connected to Spotify! 🎵');
        });

        player.connect();
    }

    function connectToSpotify() {
        const scope = 'streaming user-read-email user-read-private user-read-playback-state user-modify-playback-state';
        const authUrl = `https://accounts.spotify.com/authorize?client_id=${SPOTIFY_CLIENT_ID}&response_type=token&redirect_uri=${encodeURIComponent(SPOTIFY_REDIRECT_URI)}&scope=${encodeURIComponent(scope)}`;
        window.location.href = authUrl;
    }
    </script>

    <script>
    function updateNowPlaying(track) {
        const titleEl = document.getElementById('now-playing-title');
        const artistEl = document.getElementById('now-playing-artist');
        const artEl = document.getElementById('now-playing-art');
        
        if (track) {
            titleEl.textContent = track.name;
            artistEl.textContent = track.artists.map(a => a.name).join(', ');
            if (track.album.images[0]) {
                artEl.innerHTML = `<img src="${track.album.images[0].url}" alt="Album Art" class="w-full h-full object-cover rounded-lg">`;
            }
        }
    }

    // Update the player initialization
    function initializePlayer(token) {
        const player = new Spotify.Player({
            name: 'Portfolio Player',
            getOAuthToken: cb => { cb(token); }
        });

        player.addListener('player_state_changed', state => {
            if (state && state.track_window.current_track) {
                updateNowPlaying(state.track_window.current_track);
            }
        });

        const playPauseBtn = document.getElementById('play-pause');
        playPauseBtn.addEventListener('click', () => {
            player.togglePlay();
        });

        player.connect();
    }
    </script>
</body>
</html>
